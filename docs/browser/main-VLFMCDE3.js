import{a as Yb,b as Pu,c as Xb,d as Jo,e as Nu,f as bc,g as Zb,h as Jb,i as Fu,j as It,k as Rn,l as ii,m as _c,n as ts,o as t_,p as e_,q as Gi,r as fe}from"./chunk-EWFKFQOD.js";import{$ as Li,$a as pe,$b as fc,A as Fi,Aa as Ar,Ab as Fb,B as Oi,Ba as Ib,Bb as dc,C as yu,Ca as Eb,Cb as uc,D as wu,Da as Ab,Db as Yo,E as Ve,Ea as kb,Eb as Ob,F as gb,Fa as Cb,Fb as hc,G as ic,Ga as Tb,Gb as mc,H as vi,Ha as Sb,Hb as Su,I as Ye,Ia as ye,Ib as Du,J as xu,Ja as Bi,Jb as Ru,K as bb,Ka as Db,Kb as pc,L as nc,La as Rb,Lb as Vb,M as yr,Ma as xt,Mb as Mu,N as _b,Na as ac,Nb as Lb,O as $o,Oa as kr,Ob as Bb,P as rc,Pa as Cn,Pb as Wt,Q as Vi,Qa as j,Qb as jb,R as Pt,Ra as R,Rb as Ub,S as Iu,Sa as Tn,Sb as Sn,T as wr,Ta as ti,Tb as zb,U as _t,Ua as we,Ub as qb,V as ot,Va as J,Vb as mt,W as En,Wa as Mb,Wb as Gb,X as O,Xa as Jt,Xb as Xo,Y as G,Ya as Le,Yb as $b,Z as vb,Za as ku,Zb as Kb,_ as Eu,_a as Qt,_b as Zo,a as qo,aa as B,ab as ct,ac as zi,b as ub,ba as _,bb as Cr,bc as qi,c as He,ca as M,cb as te,cc as Rr,d as bu,da as Ko,db as Tr,dc as Qb,e as _u,ea as ut,eb as I,ec as Wb,f as oe,fa as Q,fb as y,fc as Dn,g as me,ga as $,gb as ht,gc as Hb,h as Ja,ha as at,hb as cc,hc as gc,i as hb,ia as Xe,ib as kt,j as wn,ja as Ze,jb as Be,k as xn,ka as oc,kb as ei,l as _r,la as xr,lb as xe,m as ft,ma as Au,mb as lc,n as F,na as Ir,nb as Pb,o as In,oa as yb,ob as Sr,p as mb,pa as An,pb as ji,q as pb,qa as Je,qb as Ui,r as V,ra as sc,rb as Cu,s as vr,sa as wb,sb as C,t as ve,ta as Qo,tb as yi,u as Go,ua as xb,ub as jt,v as tc,va as ae,vb as Te,w as vu,wa as kn,wb as Nb,x as ec,xa as Wo,xb as Tu,y as fb,ya as Ho,yb as Ie,z as se,za as Er,zb as Dr}from"./chunk-2MSFAMVE.js";import{a as k,b as bt,e as gu,f as g}from"./chunk-CQCHLVVT.js";var is=class{},yc=class{},Mn=class e{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(i=>{let n=i.indexOf(":");if(n>0){let r=i.slice(0,n),o=r.toLowerCase(),s=i.slice(n+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((i,n)=>{this.setHeaderEntries(n,i)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([i,n])=>{this.setHeaderEntries(i,n)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let i=this.headers.get(t.toLowerCase());return i&&i.length>0?i[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,i){return this.clone({name:t,value:i,op:"a"})}set(t,i){return this.clone({name:t,value:i,op:"s"})}delete(t,i){return this.clone({name:t,value:i,op:"d"})}maybeSetNormalizedName(t,i){this.normalizedNames.has(i)||this.normalizedNames.set(i,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(i=>{this.headers.set(i,t.headers.get(i)),this.normalizedNames.set(i,t.normalizedNames.get(i))})}clone(t){let i=new e;return i.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,i.lazyUpdate=(this.lazyUpdate||[]).concat([t]),i}applyUpdate(t){let i=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if(typeof n=="string"&&(n=[n]),n.length===0)return;this.maybeSetNormalizedName(t.name,i);let r=(t.op==="a"?this.headers.get(i):void 0)||[];r.push(...n),this.headers.set(i,r);break;case"d":let o=t.value;if(!o)this.headers.delete(i),this.normalizedNames.delete(i);else{let s=this.headers.get(i);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(i),this.normalizedNames.delete(i)):this.headers.set(i,s)}break}}setHeaderEntries(t,i){let n=(Array.isArray(i)?i:[i]).map(o=>o.toString()),r=t.toLowerCase();this.headers.set(r,n),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(i=>t(this.normalizedNames.get(i),this.headers.get(i)))}};var Vu=class{encodeKey(t){return i_(t)}encodeValue(t){return i_(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function ZE(e,t){let i=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,o)),t.decodeValue(r.slice(o+1))],c=i.get(s)||[];c.push(a),i.set(s,c)}),i}var JE=/%(\d[a-f0-9])/gi,tA={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function i_(e){return encodeURIComponent(e).replace(JE,(t,i)=>tA[i]??t)}function vc(e){return`${e}`}var $i=class e{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Vu,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=ZE(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(i=>{let n=t.fromObject[i],r=Array.isArray(n)?n.map(vc):[vc(n)];this.map.set(i,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let i=this.map.get(t);return i?i[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,i){return this.clone({param:t,value:i,op:"a"})}appendAll(t){let i=[];return Object.keys(t).forEach(n=>{let r=t[n];Array.isArray(r)?r.forEach(o=>{i.push({param:n,value:o,op:"a"})}):i.push({param:n,value:r,op:"a"})}),this.clone(i)}set(t,i){return this.clone({param:t,value:i,op:"s"})}delete(t,i){return this.clone({param:t,value:i,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let i=this.encoder.encodeKey(t);return this.map.get(t).map(n=>i+"="+this.encoder.encodeValue(n)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let i=new e({encoder:this.encoder});return i.cloneFrom=this.cloneFrom||this,i.updates=(this.updates||[]).concat(t),i}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let i=(t.op==="a"?this.map.get(t.param):void 0)||[];i.push(vc(t.value)),this.map.set(t.param,i);break;case"d":if(t.value!==void 0){let n=this.map.get(t.param)||[],r=n.indexOf(vc(t.value));r!==-1&&n.splice(r,1),n.length>0?this.map.set(t.param,n):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var Lu=class{constructor(){this.map=new Map}set(t,i){return this.map.set(t,i),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function eA(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function n_(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function r_(e){return typeof Blob<"u"&&e instanceof Blob}function o_(e){return typeof FormData<"u"&&e instanceof FormData}function iA(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var es=class e{constructor(t,i,n,r){this.url=i,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let o;if(eA(this.method)||r?(this.body=n!==void 0?n:null,o=r):o=n,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Mn,this.context??=new Lu,!this.params)this.params=new $i,this.urlWithParams=i;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=i;else{let a=i.indexOf("?"),c=a===-1?"?":a<i.length-1?"&":"";this.urlWithParams=i+c+s}}}serializeBody(){return this.body===null?null:n_(this.body)||r_(this.body)||o_(this.body)||iA(this.body)||typeof this.body=="string"?this.body:this.body instanceof $i?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||o_(this.body)?null:r_(this.body)?this.body.type||null:n_(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof $i?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let i=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,o=t.body!==void 0?t.body:this.body,s=t.withCredentials!==void 0?t.withCredentials:this.withCredentials,a=t.reportProgress!==void 0?t.reportProgress:this.reportProgress,c=t.headers||this.headers,l=t.params||this.params,d=t.context??this.context;return t.setHeaders!==void 0&&(c=Object.keys(t.setHeaders).reduce((u,h)=>u.set(h,t.setHeaders[h]),c)),t.setParams&&(l=Object.keys(t.setParams).reduce((u,h)=>u.set(h,t.setParams[h]),l)),new e(i,n,o,{params:l,headers:c,context:d,reportProgress:a,responseType:r,withCredentials:s})}},Mr=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(Mr||{}),ns=class{constructor(t,i=Ic.Ok,n="OK"){this.headers=t.headers||new Mn,this.status=t.status!==void 0?t.status:i,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},Bu=class e extends ns{constructor(t={}){super(t),this.type=Mr.ResponseHeader}clone(t={}){return new e({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},wc=class e extends ns{constructor(t={}){super(t),this.type=Mr.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},xc=class extends ns{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},Ic=function(e){return e[e.Continue=100]="Continue",e[e.SwitchingProtocols=101]="SwitchingProtocols",e[e.Processing=102]="Processing",e[e.EarlyHints=103]="EarlyHints",e[e.Ok=200]="Ok",e[e.Created=201]="Created",e[e.Accepted=202]="Accepted",e[e.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",e[e.NoContent=204]="NoContent",e[e.ResetContent=205]="ResetContent",e[e.PartialContent=206]="PartialContent",e[e.MultiStatus=207]="MultiStatus",e[e.AlreadyReported=208]="AlreadyReported",e[e.ImUsed=226]="ImUsed",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.Found=302]="Found",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.Unused=306]="Unused",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.LengthRequired=411]="LengthRequired",e[e.PreconditionFailed=412]="PreconditionFailed",e[e.PayloadTooLarge=413]="PayloadTooLarge",e[e.UriTooLong=414]="UriTooLong",e[e.UnsupportedMediaType=415]="UnsupportedMediaType",e[e.RangeNotSatisfiable=416]="RangeNotSatisfiable",e[e.ExpectationFailed=417]="ExpectationFailed",e[e.ImATeapot=418]="ImATeapot",e[e.MisdirectedRequest=421]="MisdirectedRequest",e[e.UnprocessableEntity=422]="UnprocessableEntity",e[e.Locked=423]="Locked",e[e.FailedDependency=424]="FailedDependency",e[e.TooEarly=425]="TooEarly",e[e.UpgradeRequired=426]="UpgradeRequired",e[e.PreconditionRequired=428]="PreconditionRequired",e[e.TooManyRequests=429]="TooManyRequests",e[e.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",e[e.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout",e[e.HttpVersionNotSupported=505]="HttpVersionNotSupported",e[e.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",e[e.InsufficientStorage=507]="InsufficientStorage",e[e.LoopDetected=508]="LoopDetected",e[e.NotExtended=510]="NotExtended",e[e.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",e}(Ic||{});function Ou(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,transferCache:e.transferCache}}var Pn=(()=>{let t=class t{constructor(n){this.handler=n}request(n,r,o={}){let s;if(n instanceof es)s=n;else{let l;o.headers instanceof Mn?l=o.headers:l=new Mn(o.headers);let d;o.params&&(o.params instanceof $i?d=o.params:d=new $i({fromObject:o.params})),s=new es(n,r,o.body!==void 0?o.body:null,{headers:l,context:o.context,params:d,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=F(s).pipe(Oi(l=>this.handler.handle(l)));if(n instanceof es||o.observe==="events")return a;let c=a.pipe(se(l=>l instanceof wc));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(V(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(V(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(V(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(V(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new $i().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,o={}){return this.request("PATCH",n,Ou(o,r))}post(n,r,o={}){return this.request("POST",n,Ou(o,r))}put(n,r,o={}){return this.request("PUT",n,Ou(o,r))}};t.\u0275fac=function(r){return new(r||t)(_(is))},t.\u0275prov=O({token:t,factory:t.\u0275fac});let e=t;return e})();function l_(e,t){return t(e)}function nA(e,t){return(i,n)=>t.intercept(i,{handle:r=>e(r,n)})}function rA(e,t,i){return(n,r)=>Je(i,()=>t(n,o=>e(o,r)))}var oA=new B(""),ju=new B(""),sA=new B(""),aA=new B("");function cA(){let e=null;return(t,i)=>{e===null&&(e=(M(oA,{optional:!0})??[]).reduceRight(nA,l_));let n=M(Yo),r=n.add();return e(t,i).pipe(vi(()=>n.remove(r)))}}var s_=(()=>{let t=class t extends is{constructor(n,r){super(),this.backend=n,this.injector=r,this.chain=null,this.pendingTasks=M(Yo);let o=M(aA,{optional:!0});this.backend=o??n}handle(n){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(ju),...this.injector.get(sA,[])]));this.chain=o.reduceRight((s,a)=>rA(s,a,this.injector),l_)}let r=this.pendingTasks.add();return this.chain(n,o=>this.backend.handle(o)).pipe(vi(()=>this.pendingTasks.remove(r)))}};t.\u0275fac=function(r){return new(r||t)(_(yc),_(An))},t.\u0275prov=O({token:t,factory:t.\u0275fac});let e=t;return e})();var lA=/^\)\]\}',?\n/;function dA(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}var a_=(()=>{let t=class t{constructor(n){this.xhrFactory=n}handle(n){if(n.method==="JSONP")throw new ot(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?ft(r.\u0275loadImpl()):F(null)).pipe(Pt(()=>new He(s=>{let a=r.build();if(a.open(n.method,n.urlWithParams),n.withCredentials&&(a.withCredentials=!0),n.headers.forEach((b,A)=>a.setRequestHeader(b,A.join(","))),n.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){let b=n.detectContentTypeHeader();b!==null&&a.setRequestHeader("Content-Type",b)}if(n.responseType){let b=n.responseType.toLowerCase();a.responseType=b!=="json"?b:"text"}let c=n.serializeBody(),l=null,d=()=>{if(l!==null)return l;let b=a.statusText||"OK",A=new Mn(a.getAllResponseHeaders()),q=dA(a)||n.url;return l=new Bu({headers:A,status:a.status,statusText:b,url:q}),l},u=()=>{let{headers:b,status:A,statusText:q,url:N}=d(),z=null;A!==Ic.NoContent&&(z=typeof a.response>"u"?a.responseText:a.response),A===0&&(A=z?Ic.Ok:0);let H=A>=200&&A<300;if(n.responseType==="json"&&typeof z=="string"){let et=z;z=z.replace(lA,"");try{z=z!==""?JSON.parse(z):null}catch(At){z=et,H&&(H=!1,z={error:At,text:z})}}H?(s.next(new wc({body:z,headers:b,status:A,statusText:q,url:N||void 0})),s.complete()):s.error(new xc({error:z,headers:b,status:A,statusText:q,url:N||void 0}))},h=b=>{let{url:A}=d(),q=new xc({error:b,status:a.status||0,statusText:a.statusText||"Unknown Error",url:A||void 0});s.error(q)},m=!1,E=b=>{m||(s.next(d()),m=!0);let A={type:Mr.DownloadProgress,loaded:b.loaded};b.lengthComputable&&(A.total=b.total),n.responseType==="text"&&a.responseText&&(A.partialText=a.responseText),s.next(A)},w=b=>{let A={type:Mr.UploadProgress,loaded:b.loaded};b.lengthComputable&&(A.total=b.total),s.next(A)};return a.addEventListener("load",u),a.addEventListener("error",h),a.addEventListener("timeout",h),a.addEventListener("abort",h),n.reportProgress&&(a.addEventListener("progress",E),c!==null&&a.upload&&a.upload.addEventListener("progress",w)),a.send(c),s.next({type:Mr.Sent}),()=>{a.removeEventListener("error",h),a.removeEventListener("abort",h),a.removeEventListener("load",u),a.removeEventListener("timeout",h),n.reportProgress&&(a.removeEventListener("progress",E),c!==null&&a.upload&&a.upload.removeEventListener("progress",w)),a.readyState!==a.DONE&&a.abort()}})))}};t.\u0275fac=function(r){return new(r||t)(_(gc))},t.\u0275prov=O({token:t,factory:t.\u0275fac});let e=t;return e})(),d_=new B(""),uA="XSRF-TOKEN",hA=new B("",{providedIn:"root",factory:()=>uA}),mA="X-XSRF-TOKEN",pA=new B("",{providedIn:"root",factory:()=>mA}),Ec=class{},fA=(()=>{let t=class t{constructor(n,r,o){this.doc=n,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=fc(n,this.cookieName),this.lastCookieString=n),this.lastToken}};t.\u0275fac=function(r){return new(r||t)(_(mt),_(ae),_(hA))},t.\u0275prov=O({token:t,factory:t.\u0275fac});let e=t;return e})();function gA(e,t){let i=e.url.toLowerCase();if(!M(d_)||e.method==="GET"||e.method==="HEAD"||i.startsWith("http://")||i.startsWith("https://"))return t(e);let n=M(Ec).getToken(),r=M(pA);return n!=null&&!e.headers.has(r)&&(e=e.clone({headers:e.headers.set(r,n)})),t(e)}var u_=function(e){return e[e.Interceptors=0]="Interceptors",e[e.LegacyInterceptors=1]="LegacyInterceptors",e[e.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",e[e.NoXsrfProtection=3]="NoXsrfProtection",e[e.JsonpSupport=4]="JsonpSupport",e[e.RequestsMadeViaParent=5]="RequestsMadeViaParent",e[e.Fetch=6]="Fetch",e}(u_||{});function bA(e,t){return{\u0275kind:e,\u0275providers:t}}function _A(...e){let t=[Pn,a_,s_,{provide:is,useExisting:s_},{provide:yc,useExisting:a_},{provide:ju,useValue:gA,multi:!0},{provide:d_,useValue:!0},{provide:Ec,useClass:fA}];for(let i of e)t.push(...i.\u0275providers);return Ir(t)}var c_=new B("");function vA(){return bA(u_.LegacyInterceptors,[{provide:c_,useFactory:cA},{provide:ju,useExisting:c_,multi:!0}])}var h_=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=$({type:t}),t.\u0275inj=G({providers:[_A(vA())]});let e=t;return e})();var Gu=class extends qb{constructor(){super(...arguments),this.supportsDOMEvents=!0}},$u=class e extends Gu{static makeCurrent(){zb(new e)}onAndCancel(t,i,n){return t.addEventListener(i,n),()=>{t.removeEventListener(i,n)}}dispatchEvent(t,i){t.dispatchEvent(i)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,i){return i=i||this.getDefaultDocument(),i.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,i){return i==="window"?window:i==="document"?t:i==="body"?t.body:null}getBaseHref(t){let i=wA();return i==null?null:xA(i)}resetBaseElement(){rs=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return fc(document.cookie,t)}},rs=null;function wA(){return rs=rs||document.querySelector("base"),rs?rs.getAttribute("href"):null}function xA(e){return new URL(e,document.baseURI).pathname}var Ku=class{addToWindow(t){Li.getAngularTestability=(n,r=!0)=>{let o=t.findTestabilityInTree(n,r);if(o==null)throw new ot(5103,!1);return o},Li.getAllAngularTestabilities=()=>t.getAllTestabilities(),Li.getAllAngularRootElements=()=>t.getAllRootElements();let i=n=>{let r=Li.getAllAngularTestabilities(),o=r.length,s=function(){o--,o==0&&n()};r.forEach(a=>{a.whenStable(s)})};Li.frameworkStabilizers||(Li.frameworkStabilizers=[]),Li.frameworkStabilizers.push(i)}findTestabilityInTree(t,i,n){if(i==null)return null;let r=t.getTestability(i);return r??(n?Sn().isShadowRoot(i)?this.findTestabilityInTree(t,i.host,!0):this.findTestabilityInTree(t,i.parentElement,!0):null)}},IA=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac});let e=t;return e})(),Qu=new B(""),f_=(()=>{let t=class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(o=>{o.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,o){return this._findPluginFor(r).addEventListener(n,r,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new ot(5101,!1);return this._eventNameToPlugin.set(n,r),r}};t.\u0275fac=function(r){return new(r||t)(_(Qu),_(J))},t.\u0275prov=O({token:t,factory:t.\u0275fac});let e=t;return e})(),Ac=class{constructor(t){this._doc=t}},zu="ng-app-id",g_=(()=>{let t=class t{constructor(n,r,o,s={}){this.doc=n,this.appId=r,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Dn(s),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(o=>o.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${zu}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(o=>{o.textContent!=null&&r.set(o.textContent,o)}),r}return null}changeUsageCount(n,r){let o=this.styleRef;if(o.has(n)){let s=o.get(n);return s.usage+=r,s.usage}return o.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let o=this.styleNodesInDOM,s=o?.get(r);if(s?.parentNode===n)return o.delete(r),s.removeAttribute(zu),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(zu,this.appId),n.appendChild(a),a}}addStyleToHost(n,r){let o=this.getStyleElement(n,r),s=this.styleRef,a=s.get(r)?.elements;a?a.push(o):s.set(r,{elements:[o],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}};t.\u0275fac=function(r){return new(r||t)(_(mt),_(Qo),_(Wo,8),_(ae))},t.\u0275prov=O({token:t,factory:t.\u0275fac});let e=t;return e})(),qu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Hu=/%COMP%/g,b_="%COMP%",EA=`_nghost-${b_}`,AA=`_ngcontent-${b_}`,kA=!0,CA=new B("",{providedIn:"root",factory:()=>kA});function TA(e){return AA.replace(Hu,e)}function SA(e){return EA.replace(Hu,e)}function __(e,t){return t.map(i=>i.replace(Hu,e))}var kc=(()=>{let t=class t{constructor(n,r,o,s,a,c,l,d=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Dn(c),this.defaultRenderer=new os(n,a,l,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Ko.ShadowDom&&(r=bt(k({},r),{encapsulation:Ko.Emulated}));let o=this.getOrCreateRenderer(n,r);return o instanceof Cc?o.applyToHost(n):o instanceof ss&&o.applyStyles(),o}getOrCreateRenderer(n,r){let o=this.rendererByCompId,s=o.get(r.id);if(!s){let a=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case Ko.Emulated:s=new Cc(l,d,r,this.appId,u,a,c,h);break;case Ko.ShadowDom:return new Wu(l,d,n,r,a,c,this.nonce,h);default:s=new ss(l,d,r,u,a,c,h);break}o.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(r){return new(r||t)(_(f_),_(g_),_(Qo),_(CA),_(mt),_(ae),_(J),_(Wo))},t.\u0275prov=O({token:t,factory:t.\u0275fac});let e=t;return e})(),os=class{constructor(t,i,n,r){this.eventManager=t,this.doc=i,this.ngZone=n,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,i){return i?this.doc.createElementNS(qu[i]||i,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,i){(m_(t)?t.content:t).appendChild(i)}insertBefore(t,i,n){t&&(m_(t)?t.content:t).insertBefore(i,n)}removeChild(t,i){t&&t.removeChild(i)}selectRootElement(t,i){let n=typeof t=="string"?this.doc.querySelector(t):t;if(!n)throw new ot(-5104,!1);return i||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,i,n,r){if(r){i=r+":"+i;let o=qu[r];o?t.setAttributeNS(o,i,n):t.setAttribute(i,n)}else t.setAttribute(i,n)}removeAttribute(t,i,n){if(n){let r=qu[n];r?t.removeAttributeNS(r,i):t.removeAttribute(`${n}:${i}`)}else t.removeAttribute(i)}addClass(t,i){t.classList.add(i)}removeClass(t,i){t.classList.remove(i)}setStyle(t,i,n,r){r&(Ho.DashCase|Ho.Important)?t.style.setProperty(i,n,r&Ho.Important?"important":""):t.style[i]=n}removeStyle(t,i,n){n&Ho.DashCase?t.style.removeProperty(i):t.style[i]=""}setProperty(t,i,n){t!=null&&(t[i]=n)}setValue(t,i){t.nodeValue=i}listen(t,i,n){if(typeof t=="string"&&(t=Sn().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${i}`);return this.eventManager.addEventListener(t,i,this.decoratePreventDefault(n))}decoratePreventDefault(t){return i=>{if(i==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(i)):t(i))===!1&&i.preventDefault()}}};function m_(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var Wu=class extends os{constructor(t,i,n,r,o,s,a,c){super(t,o,s,c),this.sharedStylesHost=i,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=__(r.id,r.styles);for(let d of l){let u=document.createElement("style");a&&u.setAttribute("nonce",a),u.textContent=d,this.shadowRoot.appendChild(u)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,i){return super.appendChild(this.nodeOrShadowRoot(t),i)}insertBefore(t,i,n){return super.insertBefore(this.nodeOrShadowRoot(t),i,n)}removeChild(t,i){return super.removeChild(this.nodeOrShadowRoot(t),i)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ss=class extends os{constructor(t,i,n,r,o,s,a,c){super(t,o,s,a),this.sharedStylesHost=i,this.removeStylesOnCompDestroy=r,this.styles=c?__(c,n.styles):n.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Cc=class extends ss{constructor(t,i,n,r,o,s,a,c){let l=r+"-"+n.id;super(t,i,n,o,s,a,c,l),this.contentAttr=TA(l),this.hostAttr=SA(l)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,i){let n=super.createElement(t,i);return super.setAttribute(n,this.contentAttr,""),n}},DA=(()=>{let t=class t extends Ac{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,o){return n.addEventListener(r,o,!1),()=>this.removeEventListener(n,r,o)}removeEventListener(n,r,o){return n.removeEventListener(r,o)}};t.\u0275fac=function(r){return new(r||t)(_(mt))},t.\u0275prov=O({token:t,factory:t.\u0275fac});let e=t;return e})(),p_=["alt","control","meta","shift"],RA={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},MA={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},PA=(()=>{let t=class t extends Ac{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Sn().onAndCancel(n,s.domEventName,a))}static parseEventName(n){let r=n.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let s=t._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),p_.forEach(d=>{let u=r.indexOf(d);u>-1&&(r.splice(u,1),a+=d+".")}),a+=s,r.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(n,r){let o=RA[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(o=n.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),p_.forEach(a=>{if(a!==o){let c=MA[a];c(n)&&(s+=a+".")}}),s+=o,s===r)}static eventCallback(n,r,o){return s=>{t.matchEventFullKeyCode(s,n)&&o.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}};t.\u0275fac=function(r){return new(r||t)(_(mt))},t.\u0275prov=O({token:t,factory:t.\u0275fac});let e=t;return e})();function NA(){$u.makeCurrent()}function FA(){return new Cn}function OA(){return wb(document),document}var VA=[{provide:ae,useValue:Qb},{provide:xb,useValue:NA,multi:!0},{provide:mt,useFactory:OA,deps:[]}],v_=Vb(Lb,"browser",VA),LA=new B(""),BA=[{provide:hc,useClass:Ku,deps:[]},{provide:Ob,useClass:mc,deps:[J,Su,hc]},{provide:mc,useClass:mc,deps:[J,Su,hc]}],jA=[{provide:yb,useValue:"root"},{provide:Cn,useFactory:FA,deps:[]},{provide:Qu,useClass:DA,multi:!0,deps:[mt,J,ae]},{provide:Qu,useClass:PA,multi:!0,deps:[mt]},kc,g_,f_,{provide:ac,useExisting:kc},{provide:gc,useClass:IA,deps:[]},[]],y_=(()=>{let t=class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:Qo,useValue:n.appId}]}}};t.\u0275fac=function(r){return new(r||t)(_(LA,12))},t.\u0275mod=$({type:t}),t.\u0275inj=G({providers:[...jA,...BA],imports:[Rr,Bb]});let e=t;return e})();var w_=(()=>{let t=class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}};t.\u0275fac=function(r){return new(r||t)(_(mt))},t.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Yu=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=O({token:t,factory:function(r){let o=null;return r?o=new(r||t):o=_(UA),o},providedIn:"root"});let e=t;return e})(),UA=(()=>{let t=class t extends Yu{constructor(n){super(),this._doc=n}sanitize(n,r){if(r==null)return null;switch(n){case ye.NONE:return r;case ye.HTML:return Ar(r,"HTML")?Er(r):Sb(this._doc,String(r)).toString();case ye.STYLE:return Ar(r,"Style")?Er(r):r;case ye.SCRIPT:if(Ar(r,"Script"))return Er(r);throw new ot(5200,!1);case ye.URL:return Ar(r,"URL")?Er(r):Tb(String(r));case ye.RESOURCE_URL:if(Ar(r,"ResourceURL"))return Er(r);throw new ot(5201,!1);default:throw new ot(5202,!1)}}bypassSecurityTrustHtml(n){return Ib(n)}bypassSecurityTrustStyle(n){return Eb(n)}bypassSecurityTrustScript(n){return Ab(n)}bypassSecurityTrustUrl(n){return kb(n)}bypassSecurityTrustResourceUrl(n){return Cb(n)}};t.\u0275fac=function(r){return new(r||t)(_(mt))},t.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var zA="firebase",qA="10.8.0";Gi(zA,qA,"app");var Nr=new Dr("ANGULARFIRE2_VERSION");var GA=(e,t)=>{let i=t?[t]:e_(),n=[];return i.forEach(r=>{r.container.getProvider(e).instances.forEach(s=>{n.includes(s)||n.push(s)})}),n},Nn=class{constructor(){return GA($A)}},$A="app-check";function Zu(){}var Tc=class{zone;delegate;constructor(t,i=hb){this.zone=t,this.delegate=i}now(){return this.delegate.now()}schedule(t,i,n){let r=this.zone,o=function(s){r.runGuarded(()=>{t.apply(this,[s])})};return this.delegate.schedule(o,i,n)}},Ju=class{zone;task=null;constructor(t){this.zone=t}call(t,i){let n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zu,{},Zu,Zu)),i.pipe(_t({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Sc=(()=>{class e{ngZone;outsideAngular;insideAngular;constructor(i){this.ngZone=i,this.outsideAngular=i.runOutsideAngular(()=>new Tc(Zone.current)),this.insideAngular=i.run(()=>new Tc(Zone.current,Ja)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(n){return new(n||e)(_(J))};static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function KA(){let e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return e}function ge(e){return QA(KA())(e)}function QA(e){return function(i){return i=i.lift(new Ju(e.ngZone)),i.pipe(_r(e.outsideAngular),xn(e.insideAngular))}}var WA="firebase",HA="10.8.0";fe.registerVersion(WA,HA,"app-compat");var YA=["ngOnDestroy"],E_=(e,t,i,n={})=>new Proxy(e,{get:(r,o)=>i.runOutsideAngular(()=>{if(e[o])return n?.spy?.get&&n.spy.get(o,e[o]),e[o];if(YA.indexOf(o)>-1)return()=>{};let s=t.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>i.run(()=>l)):i.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(d=>{let u=d?.(...l);return n?.spy?.apply&&n.spy.apply(o,l,u),u})})})});var Dc=class{constructor(t){return t}},Fr=new B("angularfire2.app.options"),Or=new B("angularfire2.app.name");function as(e,t,i){let n=typeof i=="string"&&i||"[DEFAULT]",r=typeof i=="object"&&i||{};r.name=r.name||n;let s=fe.apps.filter(a=>a&&a.name===r.name)[0]||t.runOutsideAngular(()=>fe.initializeApp(e,r));try{if(JSON.stringify(e)!==JSON.stringify(s.options)){let a=!!module.hot;XA("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Dc(s)}var XA=(e,...t)=>{Mu()&&typeof console<"u"&&console[e](...t)},ZA={provide:Dc,useFactory:as,deps:[Fr,J,[new xr,Or]]},A_=(()=>{class e{static initializeApp(i,n){return{ngModule:e,providers:[{provide:Fr,useValue:i},{provide:Or,useValue:n}]}}constructor(i){fe.registerVersion("angularfire",Nr.full,"core"),fe.registerVersion("angularfire",Nr.full,"app-compat"),fe.registerVersion("angular",Fb.full,i.toString())}static \u0275fac=function(n){return new(n||e)(_(ae))};static \u0275mod=$({type:e});static \u0275inj=G({providers:[ZA]})}return e})();function Rc(e,t,i,n,r){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===e)||[];if(o)return JA(r,s)||(I_("error",`${t} was already initialized on the ${i} Firebase App with different settings.${tk?" You may need to reload as Firebase is not HMR aware.":""}`),I_("warn",{is:r,was:s})),o;{let a=n();return globalThis.\u0275AngularfireInstanceCache.push([e,a,r]),a}}function JA(e,t){try{return e.toString()===t.toString()}catch{return e===t}}var tk=typeof module<"u"&&!!module.hot,I_=(e,...t)=>{Mu()&&typeof console<"u"&&console[e](...t)};globalThis.\u0275AngularfireInstanceCache||=[];var nk=new Map,rk={activated:!1,tokenObservers:[]},ok={initialized:!1,enabled:!1};function je(e){return nk.get(e)||Object.assign({},rk)}function D_(){return ok}var sk="https://content-firebaseappcheck.googleapis.com/v1";var ak="exchangeDebugToken",k_={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},mP=24*60*60*1e3;var eh=class{constructor(t,i,n,r,o){if(this.operation=t,this.retryPolicy=i,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){return g(this,null,function*(){this.stop();try{this.pending=new Pu,this.pending.promise.catch(i=>{}),yield ck(this.getNextRun(t)),this.pending.resolve(),yield this.pending.promise,this.pending=new Pu,this.pending.promise.catch(i=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(i){this.retryPolicy(i)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let i=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),i}}};function ck(e){return new Promise(t=>{setTimeout(t,e)})}var lk={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Ki=new Jb("appCheck","AppCheck",lk);function R_(e){if(!je(e).activated)throw Ki.create("use-before-activation",{appName:e.name})}function M_(n,r){return g(this,arguments,function*({url:e,body:t},i){let o={"Content-Type":"application/json"},s=i.getImmediate({optional:!0});if(s){let m=yield s.getHeartbeatsHeader();m&&(o["X-Firebase-Client"]=m)}let a={method:"POST",body:JSON.stringify(t),headers:o},c;try{c=yield fetch(e,a)}catch(m){throw Ki.create("fetch-network-error",{originalErrorMessage:m?.message})}if(c.status!==200)throw Ki.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(m){throw Ki.create("fetch-parse-error",{originalErrorMessage:m?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Ki.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let u=Number(d[1])*1e3,h=Date.now();return{token:l.token,expireTimeMillis:h+u,issuedAtTimeMillis:h}})}function P_(e,t){let{projectId:i,appId:n,apiKey:r}=e.options;return{url:`${sk}/projects/${i}/apps/${n}:${ak}?key=${r}`,body:{debug_token:t}}}var dk="firebase-app-check-database",uk=1,ih="firebase-app-check-store";var Mc=null;function hk(){return Mc||(Mc=new Promise((e,t)=>{try{let i=indexedDB.open(dk,uk);i.onsuccess=n=>{e(n.target.result)},i.onerror=n=>{var r;t(Ki.create("storage-open",{originalErrorMessage:(r=n.target.error)===null||r===void 0?void 0:r.message}))},i.onupgradeneeded=n=>{let r=n.target.result;switch(n.oldVersion){case 0:r.createObjectStore(ih,{keyPath:"compositeKey"})}}}catch(i){t(Ki.create("storage-open",{originalErrorMessage:i?.message}))}}),Mc)}function mk(e,t){return pk(fk(e),t)}function pk(e,t){return g(this,null,function*(){let n=(yield hk()).transaction(ih,"readwrite"),o=n.objectStore(ih).put({compositeKey:e,value:t});return new Promise((s,a)=>{o.onsuccess=c=>{s()},n.onerror=c=>{var l;a(Ki.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function fk(e){return`${e.options.appId}-${e.name}`}var nh=new _c("@firebase/app-check");function th(e,t){return bc()?mk(e,t).catch(i=>{nh.warn(`Failed to write token to IndexedDB. Error: ${i}`)}):Promise.resolve()}function N_(){return D_().enabled}function F_(){return g(this,null,function*(){let e=D_();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var gk={error:"UNKNOWN_ERROR"};function bk(e){return Yb.encodeString(JSON.stringify(e),!1)}function rh(e,t=!1){return g(this,null,function*(){let i=e.app;R_(i);let n=je(i),r=n.token,o;if(r&&!cs(r)&&(n.token=void 0,r=void 0),!r){let c=yield n.cachedTokenPromise;c&&(cs(c)?r=c:yield th(i,void 0))}if(!t&&r&&cs(r))return{token:r.token};let s=!1;if(N_()){n.exchangeTokenPromise||(n.exchangeTokenPromise=M_(P_(i,yield F_()),e.heartbeatServiceProvider).finally(()=>{n.exchangeTokenPromise=void 0}),s=!0);let c=yield n.exchangeTokenPromise;return yield th(i,c),n.token=c,{token:c.token}}try{n.exchangeTokenPromise||(n.exchangeTokenPromise=n.provider.getToken().finally(()=>{n.exchangeTokenPromise=void 0}),s=!0),r=yield je(i).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?nh.warn(c.message):nh.error(c),o=c}let a;return r?o?cs(r)?a={token:r.token,internalError:o}:a=T_(o):(a={token:r.token},n.token=r,yield th(i,r)):a=T_(o),s&&wk(i,a),a})}function _k(e){return g(this,null,function*(){let t=e.app;R_(t);let{provider:i}=je(t);if(N_()){let n=yield F_(),{token:r}=yield M_(P_(t,n),e.heartbeatServiceProvider);return{token:r}}else{let{token:n}=yield i.getToken();return{token:n}}})}function vk(e,t,i,n){let{app:r}=e,o=je(r),s={next:i,error:n,type:t};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&cs(o.token)){let a=o.token;Promise.resolve().then(()=>{i({token:a.token}),C_(e)}).catch(()=>{})}o.cachedTokenPromise.then(()=>C_(e))}function O_(e,t){let i=je(e),n=i.tokenObservers.filter(r=>r.next!==t);n.length===0&&i.tokenRefresher&&i.tokenRefresher.isRunning()&&i.tokenRefresher.stop(),i.tokenObservers=n}function C_(e){let{app:t}=e,i=je(t),n=i.tokenRefresher;n||(n=yk(e),i.tokenRefresher=n),!n.isRunning()&&i.isTokenAutoRefreshEnabled&&n.start()}function yk(e){let{app:t}=e;return new eh(()=>g(this,null,function*(){let i=je(t),n;if(i.token?n=yield rh(e,!0):n=yield rh(e),n.error)throw n.error;if(n.internalError)throw n.internalError}),()=>!0,()=>{let i=je(t);if(i.token){let n=i.token.issuedAtTimeMillis+(i.token.expireTimeMillis-i.token.issuedAtTimeMillis)*.5+3e5,r=i.token.expireTimeMillis-5*60*1e3;return n=Math.min(n,r),Math.max(0,n-Date.now())}else return 0},k_.RETRIAL_MIN_WAIT,k_.RETRIAL_MAX_WAIT)}function wk(e,t){let i=je(e).tokenObservers;for(let n of i)try{n.type==="EXTERNAL"&&t.error!=null?n.error(t.error):n.next(t)}catch{}}function cs(e){return e.expireTimeMillis-Date.now()>0}function T_(e){return{token:bk(gk),error:e}}var oh=class{constructor(t,i){this.app=t,this.heartbeatServiceProvider=i}_delete(){let{tokenObservers:t}=je(this.app);for(let i of t)O_(this.app,i.next);return Promise.resolve()}};function xk(e,t){return new oh(e,t)}function Ik(e){return{getToken:t=>rh(e,t),getLimitedUseToken:()=>_k(e),addTokenListener:t=>vk(e,"INTERNAL",t),removeTokenListener:t=>O_(e.app,t)}}var Ek="@firebase/app-check",Ak="0.8.2";var kk="app-check",S_="app-check-internal";function Ck(){ts(new Rn(kk,e=>{let t=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat");return xk(t,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider(S_).initialize()})),ts(new Rn(S_,e=>{let t=e.getProvider("app-check").getImmediate();return Ik(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Gi(Ek,Ak)}Ck();var Tk=["localhost","0.0.0.0","127.0.0.1"],AP=typeof window<"u"&&Tk.includes(window.location.hostname);var sh=new B("angularfire2.auth.use-emulator"),ah=new B("angularfire2.auth.settings"),ch=new B("angularfire2.auth.tenant-id"),lh=new B("angularfire2.auth.langugage-code"),dh=new B("angularfire2.auth.use-device-language"),uh=new B("angularfire.auth.persistence"),hh=(e,t,i,n,r,o,s,a)=>Rc(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{let c=t.runOutsideAngular(()=>e.auth());if(i&&c.useEmulator(...i),n&&(c.tenantId=n),c.languageCode=r,o&&c.useDeviceLanguage(),s)for(let[l,d]of Object.entries(s))c.settings[l]=d;return a&&c.setPersistence(a),c},[i,n,r,o,s,a]),L_=(()=>{class e{authState;idToken;user;idTokenResult;credential;constructor(i,n,r,o,s,a,c,l,d,u,h,m){let E=new oe,w=F(void 0).pipe(xn(s.outsideAngular),Pt(()=>o.runOutsideAngular(()=>import("./chunk-7LM5ICIG.js"))),V(()=>as(i,o,n)),V(b=>hh(b,o,a,l,d,u,c,h)),$o({bufferSize:1,refCount:!1}));if(Dn(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=F(null);else{w.pipe(Ye()).subscribe();let b=w.pipe(Pt(N=>N.getRedirectResult().then(z=>z,()=>null)),ge,$o({bufferSize:1,refCount:!1})),A=w.pipe(Pt(N=>new He(z=>({unsubscribe:o.runOutsideAngular(()=>N.onAuthStateChanged(H=>z.next(H),H=>z.error(H),()=>z.complete()))})))),q=w.pipe(Pt(N=>new He(z=>({unsubscribe:o.runOutsideAngular(()=>N.onIdTokenChanged(H=>z.next(H),H=>z.error(H),()=>z.complete()))}))));this.authState=b.pipe(Iu(A),_r(s.outsideAngular),xn(s.insideAngular)),this.user=b.pipe(Iu(q),_r(s.outsideAngular),xn(s.insideAngular)),this.idToken=this.user.pipe(Pt(N=>N?ft(N.getIdToken()):F(null))),this.idTokenResult=this.user.pipe(Pt(N=>N?ft(N.getIdTokenResult()):F(null))),this.credential=fb(b,E,this.authState.pipe(se(N=>!N))).pipe(V(N=>N?.user?N:null),_r(s.outsideAngular),xn(s.insideAngular))}return E_(this,w,o,{spy:{apply:(b,A,q)=>{(b.startsWith("signIn")||b.startsWith("createUser"))&&q.then(N=>E.next(N))}}})}static \u0275fac=function(n){return new(n||e)(_(Fr),_(Or,8),_(ae),_(J),_(Sc),_(sh,8),_(ah,8),_(ch,8),_(lh,8),_(dh,8),_(uh,8),_(Nn,8))};static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})();var Dk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ze={},S,Nh=Nh||{},K=Dk||self;function Kc(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function xs(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function Rk(e){return Object.prototype.hasOwnProperty.call(e,mh)&&e[mh]||(e[mh]=++Mk)}var mh="closure_uid_"+(1e9*Math.random()>>>0),Mk=0;function Pk(e,t,i){return e.call.apply(e.bind,arguments)}function Nk(e,t,i){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,n),e.apply(t,r)}}return function(){return e.apply(t,arguments)}}function ee(e,t,i){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ee=Pk:ee=Nk,ee.apply(null,arguments)}function Pc(e,t){var i=Array.prototype.slice.call(arguments,1);return function(){var n=i.slice();return n.push.apply(n,arguments),e.apply(this,n)}}function qt(e,t){function i(){}i.prototype=t.prototype,e.$=t.prototype,e.prototype=new i,e.prototype.constructor=e,e.ac=function(n,r,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return t.prototype[r].apply(n,s)}}function Qi(){this.s=this.s,this.o=this.o}var Fk=0;Qi.prototype.s=!1;Qi.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),Fk!=0)&&Rk(this)};Qi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var X_=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let i=0;i<e.length;i++)if(i in e&&e[i]===t)return i;return-1};function Fh(e){let t=e.length;if(0<t){let i=Array(t);for(let n=0;n<t;n++)i[n]=e[n];return i}return[]}function B_(e,t){for(let i=1;i<arguments.length;i++){let n=arguments[i];if(Kc(n)){let r=e.length||0,o=n.length||0;e.length=r+o;for(let s=0;s<o;s++)e[r+s]=n[s]}else e.push(n)}}function ie(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var Ok=function(){if(!K.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{let i=()=>{};K.addEventListener("test",i,t),K.removeEventListener("test",i,t)}catch{}return e}();function ps(e){return/^[\s\xa0]*$/.test(e)}function Qc(){var e=K.navigator;return e&&(e=e.userAgent)?e:""}function ni(e){return Qc().indexOf(e)!=-1}function Oh(e){return Oh[" "](e),e}Oh[" "]=function(){};function Vk(e,t){var i=AC;return Object.prototype.hasOwnProperty.call(i,e)?i[e]:i[e]=t(e)}var Lk=ni("Opera"),jr=ni("Trident")||ni("MSIE"),Z_=ni("Edge"),_h=Z_||jr,J_=ni("Gecko")&&!(Qc().toLowerCase().indexOf("webkit")!=-1&&!ni("Edge"))&&!(ni("Trident")||ni("MSIE"))&&!ni("Edge"),Bk=Qc().toLowerCase().indexOf("webkit")!=-1&&!ni("Edge");function tv(){var e=K.document;return e?e.documentMode:void 0}var vh;t:{if(Nc="",Fc=function(){var e=Qc();if(J_)return/rv:([^\);]+)(\)|;)/.exec(e);if(Z_)return/Edge\/([\d\.]+)/.exec(e);if(jr)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(Bk)return/WebKit\/(\S+)/.exec(e);if(Lk)return/(?:Version)[ \/]?(\S+)/.exec(e)}(),Fc&&(Nc=Fc?Fc[1]:""),jr&&(Oc=tv(),Oc!=null&&Oc>parseFloat(Nc))){vh=String(Oc);break t}vh=Nc}var Nc,Fc,Oc,yh;K.document&&jr?(ph=tv(),yh=ph||parseInt(vh,10)||void 0):yh=void 0;var ph,jk=yh;function fs(e,t){if(ie.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var i=this.type=e.type,n=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(J_){t:{try{Oh(t.nodeName);var r=!0;break t}catch{}r=!1}r||(t=null)}}else i=="mouseover"?t=e.fromElement:i=="mouseout"&&(t=e.toElement);this.relatedTarget=t,n?(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:Uk[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&fs.$.h.call(this)}}qt(fs,ie);var Uk={2:"touch",3:"pen",4:"mouse"};fs.prototype.h=function(){fs.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Is="closure_listenable_"+(1e6*Math.random()|0),zk=0;function qk(e,t,i,n,r){this.listener=e,this.proxy=null,this.src=t,this.type=i,this.capture=!!n,this.la=r,this.key=++zk,this.fa=this.ia=!1}function Wc(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Vh(e,t,i){for(let n in e)t.call(i,e[n],n,e)}function Gk(e,t){for(let i in e)t.call(void 0,e[i],i,e)}function ev(e){let t={};for(let i in e)t[i]=e[i];return t}var j_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function iv(e,t){let i,n;for(let r=1;r<arguments.length;r++){n=arguments[r];for(i in n)e[i]=n[i];for(let o=0;o<j_.length;o++)i=j_[o],Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}}function Hc(e){this.src=e,this.g={},this.h=0}Hc.prototype.add=function(e,t,i,n,r){var o=e.toString();e=this.g[o],e||(e=this.g[o]=[],this.h++);var s=xh(e,t,n,r);return-1<s?(t=e[s],i||(t.ia=!1)):(t=new qk(t,this.src,o,!!n,r),t.ia=i,e.push(t)),t};function wh(e,t){var i=t.type;if(i in e.g){var n=e.g[i],r=X_(n,t),o;(o=0<=r)&&Array.prototype.splice.call(n,r,1),o&&(Wc(t),e.g[i].length==0&&(delete e.g[i],e.h--))}}function xh(e,t,i,n){for(var r=0;r<e.length;++r){var o=e[r];if(!o.fa&&o.listener==t&&o.capture==!!i&&o.la==n)return r}return-1}var Lh="closure_lm_"+(1e6*Math.random()|0),fh={};function nv(e,t,i,n,r){if(n&&n.once)return ov(e,t,i,n,r);if(Array.isArray(t)){for(var o=0;o<t.length;o++)nv(e,t[o],i,n,r);return null}return i=Uh(i),e&&e[Is]?e.O(t,i,xs(n)?!!n.capture:!!n,r):rv(e,t,i,!1,n,r)}function rv(e,t,i,n,r,o){if(!t)throw Error("Invalid event type");var s=xs(r)?!!r.capture:!!r,a=jh(e);if(a||(e[Lh]=a=new Hc(e)),i=a.add(t,i,n,s,o),i.proxy)return i;if(n=$k(),i.proxy=n,n.src=e,n.listener=i,e.addEventListener)Ok||(r=s),r===void 0&&(r=!1),e.addEventListener(t.toString(),n,r);else if(e.attachEvent)e.attachEvent(av(t.toString()),n);else if(e.addListener&&e.removeListener)e.addListener(n);else throw Error("addEventListener and attachEvent are unavailable.");return i}function $k(){function e(i){return t.call(e.src,e.listener,i)}let t=Kk;return e}function ov(e,t,i,n,r){if(Array.isArray(t)){for(var o=0;o<t.length;o++)ov(e,t[o],i,n,r);return null}return i=Uh(i),e&&e[Is]?e.P(t,i,xs(n)?!!n.capture:!!n,r):rv(e,t,i,!0,n,r)}function sv(e,t,i,n,r){if(Array.isArray(t))for(var o=0;o<t.length;o++)sv(e,t[o],i,n,r);else n=xs(n)?!!n.capture:!!n,i=Uh(i),e&&e[Is]?(e=e.i,t=String(t).toString(),t in e.g&&(o=e.g[t],i=xh(o,i,n,r),-1<i&&(Wc(o[i]),Array.prototype.splice.call(o,i,1),o.length==0&&(delete e.g[t],e.h--)))):e&&(e=jh(e))&&(t=e.g[t.toString()],e=-1,t&&(e=xh(t,i,n,r)),(i=-1<e?t[e]:null)&&Bh(i))}function Bh(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[Is])wh(t.i,e);else{var i=e.type,n=e.proxy;t.removeEventListener?t.removeEventListener(i,n,e.capture):t.detachEvent?t.detachEvent(av(i),n):t.addListener&&t.removeListener&&t.removeListener(n),(i=jh(t))?(wh(i,e),i.h==0&&(i.src=null,t[Lh]=null)):Wc(e)}}}function av(e){return e in fh?fh[e]:fh[e]="on"+e}function Kk(e,t){if(e.fa)e=!0;else{t=new fs(t,this);var i=e.listener,n=e.la||e.src;e.ia&&Bh(e),e=i.call(n,t)}return e}function jh(e){return e=e[Lh],e instanceof Hc?e:null}var gh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Uh(e){return typeof e=="function"?e:(e[gh]||(e[gh]=function(t){return e.handleEvent(t)}),e[gh])}function zt(){Qi.call(this),this.i=new Hc(this),this.S=this,this.J=null}qt(zt,Qi);zt.prototype[Is]=!0;zt.prototype.removeEventListener=function(e,t,i,n){sv(this,e,t,i,n)};function Yt(e,t){var i,n=e.J;if(n)for(i=[];n;n=n.J)i.push(n);if(e=e.S,n=t.type||t,typeof t=="string")t=new ie(t,e);else if(t instanceof ie)t.target=t.target||e;else{var r=t;t=new ie(n,e),iv(t,r)}if(r=!0,i)for(var o=i.length-1;0<=o;o--){var s=t.g=i[o];r=Vc(s,n,!0,t)&&r}if(s=t.g=e,r=Vc(s,n,!0,t)&&r,r=Vc(s,n,!1,t)&&r,i)for(o=0;o<i.length;o++)s=t.g=i[o],r=Vc(s,n,!1,t)&&r}zt.prototype.N=function(){if(zt.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var i=e.g[t],n=0;n<i.length;n++)Wc(i[n]);delete e.g[t],e.h--}}this.J=null};zt.prototype.O=function(e,t,i,n){return this.i.add(String(e),t,!1,i,n)};zt.prototype.P=function(e,t,i,n){return this.i.add(String(e),t,!0,i,n)};function Vc(e,t,i,n){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var r=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.fa&&s.capture==i){var a=s.listener,c=s.la||s.src;s.ia&&wh(e.i,s),r=a.call(c,n)!==!1&&r}}return r&&!n.defaultPrevented}var zh=K.JSON.stringify,Ih=class{constructor(t,i){this.i=t,this.j=i,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}};function Qk(){var e=qh;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Eh=class{constructor(){this.h=this.g=null}add(t,i){let n=cv.get();n.set(t,i),this.h?this.h.next=n:this.g=n,this.h=n}},cv=new Ih(()=>new Ah,e=>e.reset()),Ah=class{constructor(){this.next=this.g=this.h=null}set(t,i){this.h=t,this.g=i,this.next=null}reset(){this.next=this.g=this.h=null}};function Wk(e){var t=1;e=e.split(":");let i=[];for(;0<t&&e.length;)i.push(e.shift()),t--;return e.length&&i.push(e.join(":")),i}function Hk(e){K.setTimeout(()=>{throw e},0)}var gs,bs=!1,qh=new Eh,lv=()=>{let e=K.Promise.resolve(void 0);gs=()=>{e.then(Yk)}},Yk=()=>{for(var e;e=Qk();){try{e.h.call(e.g)}catch(i){Hk(i)}var t=cv;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}bs=!1};function Yc(e,t){zt.call(this),this.h=e||1,this.g=t||K,this.j=ee(this.qb,this),this.l=Date.now()}qt(Yc,zt);S=Yc.prototype;S.ga=!1;S.T=null;S.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Yt(this,"tick"),this.ga&&(Gh(this),this.start()))}};S.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Gh(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}S.N=function(){Yc.$.N.call(this),Gh(this),delete this.g};function $h(e,t,i){if(typeof e=="function")i&&(e=ee(e,i));else if(e&&typeof e.handleEvent=="function")e=ee(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:K.setTimeout(e,t||0)}function dv(e){e.g=$h(()=>{e.g=null,e.i&&(e.i=!1,dv(e))},e.j);let t=e.h;e.h=null,e.m.apply(null,t)}var kh=class extends Qi{constructor(t,i){super(),this.m=t,this.j=i,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:dv(this)}N(){super.N(),this.g&&(K.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function _s(e){Qi.call(this),this.h=e,this.g={}}qt(_s,Qi);var U_=[];function uv(e,t,i,n){Array.isArray(i)||(i&&(U_[0]=i.toString()),i=U_);for(var r=0;r<i.length;r++){var o=nv(t,i[r],n||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function hv(e){Vh(e.g,function(t,i){this.g.hasOwnProperty(i)&&Bh(t)},e),e.g={}}_s.prototype.N=function(){_s.$.N.call(this),hv(this)};_s.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Xc(){this.g=!0}Xc.prototype.Ea=function(){this.g=!1};function Xk(e,t,i,n,r,o){e.info(function(){if(e.g)if(o)for(var s="",a=o.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var d=l[0];l=l[1];var u=d.split("_");s=2<=u.length&&u[1]=="type"?s+(d+"="+l+"&"):s+(d+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+n+") [attempt "+r+"]: "+t+`
`+i+`
`+s})}function Zk(e,t,i,n,r,o,s){e.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+r+"]: "+t+`
`+i+`
`+o+" "+s})}function Lr(e,t,i,n){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+tC(e,i)+(n?" "+n:"")})}function Jk(e,t){e.info(function(){return"TIMEOUT: "+t})}Xc.prototype.info=function(){};function tC(e,t){if(!e.g)return t;if(!t)return null;try{var i=JSON.parse(t);if(i){for(e=0;e<i.length;e++)if(Array.isArray(i[e])){var n=i[e];if(!(2>n.length)){var r=n[1];if(Array.isArray(r)&&!(1>r.length)){var o=r[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<r.length;s++)r[s]=""}}}}return zh(i)}catch{return t}}var Ln={},z_=null;function Zc(){return z_=z_||new zt}Ln.Ta="serverreachability";function mv(e){ie.call(this,Ln.Ta,e)}qt(mv,ie);function vs(e){let t=Zc();Yt(t,new mv(t))}Ln.STAT_EVENT="statevent";function pv(e,t){ie.call(this,Ln.STAT_EVENT,e),this.stat=t}qt(pv,ie);function ce(e){let t=Zc();Yt(t,new pv(t,e))}Ln.Ua="timingevent";function fv(e,t){ie.call(this,Ln.Ua,e),this.size=t}qt(fv,ie);function Es(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return K.setTimeout(function(){e()},t)}var Jc={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},gv={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Kh(){}Kh.prototype.h=null;function q_(e){return e.h||(e.h=e.i())}function bv(){}var As={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Qh(){ie.call(this,"d")}qt(Qh,ie);function Wh(){ie.call(this,"c")}qt(Wh,ie);var Ch;function tl(){}qt(tl,Kh);tl.prototype.g=function(){return new XMLHttpRequest};tl.prototype.i=function(){return{}};Ch=new tl;function ks(e,t,i,n){this.l=e,this.j=t,this.m=i,this.W=n||1,this.U=new _s(this),this.P=eC,e=_h?125:void 0,this.V=new Yc(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new _v}function _v(){this.i=null,this.g="",this.h=!1}var eC=45e3,vv={},Th={};S=ks.prototype;S.setTimeout=function(e){this.P=e};function Sh(e,t,i){e.L=1,e.A=il(xi(t)),e.u=i,e.S=!0,yv(e,null)}function yv(e,t){e.G=Date.now(),Cs(e),e.B=xi(e.A);var i=e.B,n=e.W;Array.isArray(n)||(n=[String(n)]),Tv(i.i,"t",n),e.o=0,i=e.l.J,e.h=new _v,e.g=Hv(e.l,i?t:null,!e.u),0<e.O&&(e.M=new kh(ee(e.Pa,e,e.g),e.O)),uv(e.U,e.g,"readystatechange",e.nb),t=e.I?ev(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),vs(),Xk(e.j,e.v,e.B,e.m,e.W,e.u)}S.nb=function(e){e=e.target;let t=this.M;t&&ri(e)==3?t.l():this.Pa(e)};S.Pa=function(e){try{if(e==this.g)t:{let d=ri(this.g);var t=this.g.Ia();let u=this.g.da();if(!(3>d)&&(d!=3||_h||this.g&&(this.h.h||this.g.ja()||Q_(this.g)))){this.J||d!=4||t==7||(t==8||0>=u?vs(3):vs(2)),el(this);var i=this.g.da();this.ca=i;e:if(wv(this)){var n=Q_(this.g);e="";var r=n.length,o=ri(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fn(this),ms(this);var s="";break e}this.h.i=new K.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,e+=this.h.i.decode(n[t],{stream:o&&t==r-1});n.length=0,this.h.g+=e,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=i==200,Zk(this.j,this.v,this.B,this.m,this.W,d,i),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ps(a)){var l=a;break e}}l=null}if(i=l)Lr(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Dh(this,i);else{this.i=!1,this.s=3,ce(12),Fn(this),ms(this);break t}}this.S?(xv(this,d,s),_h&&this.i&&d==3&&(uv(this.U,this.V,"tick",this.mb),this.V.start())):(Lr(this.j,this.m,s,null),Dh(this,s)),d==4&&Fn(this),this.i&&!this.J&&(d==4?$v(this.l,this):(this.i=!1,Cs(this)))}else xC(this.g),i==400&&0<s.indexOf("Unknown SID")?(this.s=3,ce(12)):(this.s=0,ce(13)),Fn(this),ms(this)}}}catch{}finally{}};function wv(e){return e.g?e.v=="GET"&&e.L!=2&&e.l.Ha:!1}function xv(e,t,i){let n=!0,r;for(;!e.J&&e.o<i.length;)if(r=iC(e,i),r==Th){t==4&&(e.s=4,ce(14),n=!1),Lr(e.j,e.m,null,"[Incomplete Response]");break}else if(r==vv){e.s=4,ce(15),Lr(e.j,e.m,i,"[Invalid Chunk]"),n=!1;break}else Lr(e.j,e.m,r,null),Dh(e,r);wv(e)&&e.o!=0&&(e.h.g=e.h.g.slice(e.o),e.o=0),t!=4||i.length!=0||e.h.h||(e.s=1,ce(16),n=!1),e.i=e.i&&n,n?0<i.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+i.length),tm(t),t.M=!0,ce(11))):(Lr(e.j,e.m,i,"[Invalid Chunked Response]"),Fn(e),ms(e))}S.mb=function(){if(this.g){var e=ri(this.g),t=this.g.ja();this.o<t.length&&(el(this),xv(this,e,t),this.i&&e!=4&&Cs(this))}};function iC(e,t){var i=e.o,n=t.indexOf(`
`,i);return n==-1?Th:(i=Number(t.substring(i,n)),isNaN(i)?vv:(n+=1,n+i>t.length?Th:(t=t.slice(n,n+i),e.o=n+i,t)))}S.cancel=function(){this.J=!0,Fn(this)};function Cs(e){e.Y=Date.now()+e.P,Iv(e,e.P)}function Iv(e,t){if(e.C!=null)throw Error("WatchDog timer not null");e.C=Es(ee(e.lb,e),t)}function el(e){e.C&&(K.clearTimeout(e.C),e.C=null)}S.lb=function(){this.C=null;let e=Date.now();0<=e-this.Y?(Jk(this.j,this.B),this.L!=2&&(vs(),ce(17)),Fn(this),this.s=2,ms(this)):Iv(this,this.Y-e)};function ms(e){e.l.H==0||e.J||$v(e.l,e)}function Fn(e){el(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,Gh(e.V),hv(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Dh(e,t){try{var i=e.l;if(i.H!=0&&(i.g==e||Rh(i.i,e))){if(!e.K&&Rh(i.i,e)&&i.H==3){try{var n=i.Ja.g.parse(t)}catch{n=null}if(Array.isArray(n)&&n.length==3){var r=n;if(r[0]==0){t:if(!i.u){if(i.g)if(i.g.G+3e3<e.G)zc(i),ol(i);else break t;Jh(i),ce(18)}}else i.Fa=r[1],0<i.Fa-i.V&&37500>r[2]&&i.G&&i.A==0&&!i.v&&(i.v=Es(ee(i.ib,i),6e3));if(1>=Rv(i.i)&&i.oa){try{i.oa()}catch{}i.oa=void 0}}else On(i,11)}else if((e.K||i.g==e)&&zc(i),!ps(t))for(r=i.Ja.g.parse(t),t=0;t<r.length;t++){let l=r[t];if(i.V=l[0],l=l[1],i.H==2)if(l[0]=="c"){i.K=l[1],i.pa=l[2];let d=l[3];d!=null&&(i.ra=d,i.l.info("VER="+i.ra));let u=l[4];u!=null&&(i.Ga=u,i.l.info("SVER="+i.Ga));let h=l[5];h!=null&&typeof h=="number"&&0<h&&(n=1.5*h,i.L=n,i.l.info("backChannelRequestTimeoutMs_="+n)),n=i;let m=e.g;if(m){let E=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(E){var o=n.i;o.g||E.indexOf("spdy")==-1&&E.indexOf("quic")==-1&&E.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(Hh(o,o.h),o.h=null))}if(n.F){let w=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;w&&(n.Da=w,vt(n.I,n.F,w))}}i.H=3,i.h&&i.h.Ba(),i.ca&&(i.S=Date.now()-e.G,i.l.info("Handshake RTT: "+i.S+"ms")),n=i;var s=e;if(n.wa=Wv(n,n.J?n.pa:null,n.Y),s.K){Mv(n.i,s);var a=s,c=n.L;c&&a.setTimeout(c),a.C&&(el(a),Cs(a)),n.g=s}else qv(n);0<i.j.length&&sl(i)}else l[0]!="stop"&&l[0]!="close"||On(i,7);else i.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?On(i,7):Zh(i):l[0]!="noop"&&i.h&&i.h.Aa(l),i.A=0)}}vs(4)}catch{}}function nC(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if(Kc(e)){for(var t=[],i=e.length,n=0;n<i;n++)t.push(e[n]);return t}t=[],i=0;for(n in e)t[i++]=e[n];return t}function rC(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(Kc(e)||typeof e=="string"){var t=[];e=e.length;for(var i=0;i<e;i++)t.push(i);return t}t=[],i=0;for(let n in e)t[i++]=n;return t}}}function Ev(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(Kc(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var i=rC(e),n=nC(e),r=n.length,o=0;o<r;o++)t.call(void 0,n[o],i&&i[o],e)}var Av=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oC(e,t){if(e){e=e.split("&");for(var i=0;i<e.length;i++){var n=e[i].indexOf("="),r=null;if(0<=n){var o=e[i].substring(0,n);r=e[i].substring(n+1)}else o=e[i];t(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function Vn(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Vn){this.h=e.h,jc(this,e.j),this.s=e.s,this.g=e.g,Uc(this,e.m),this.l=e.l;var t=e.i,i=new ys;i.i=t.i,t.g&&(i.g=new Map(t.g),i.h=t.h),G_(this,i),this.o=e.o}else e&&(t=String(e).match(Av))?(this.h=!1,jc(this,t[1]||"",!0),this.s=us(t[2]||""),this.g=us(t[3]||"",!0),Uc(this,t[4]),this.l=us(t[5]||"",!0),G_(this,t[6]||"",!0),this.o=us(t[7]||"")):(this.h=!1,this.i=new ys(null,this.h))}Vn.prototype.toString=function(){var e=[],t=this.j;t&&e.push(hs(t,$_,!0),":");var i=this.g;return(i||t=="file")&&(e.push("//"),(t=this.s)&&e.push(hs(t,$_,!0),"@"),e.push(encodeURIComponent(String(i)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i=this.m,i!=null&&e.push(":",String(i))),(i=this.l)&&(this.g&&i.charAt(0)!="/"&&e.push("/"),e.push(hs(i,i.charAt(0)=="/"?cC:aC,!0))),(i=this.i.toString())&&e.push("?",i),(i=this.o)&&e.push("#",hs(i,dC)),e.join("")};function xi(e){return new Vn(e)}function jc(e,t,i){e.j=i?us(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Uc(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function G_(e,t,i){t instanceof ys?(e.i=t,uC(e.i,e.h)):(i||(t=hs(t,lC)),e.i=new ys(t,e.h))}function vt(e,t,i){e.i.set(t,i)}function il(e){return vt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function us(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function hs(e,t,i){return typeof e=="string"?(e=encodeURI(e).replace(t,sC),i&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function sC(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var $_=/[#\/\?@]/g,aC=/[#\?:]/g,cC=/[#\?]/g,lC=/[#\?@]/g,dC=/#/g;function ys(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Wi(e){e.g||(e.g=new Map,e.h=0,e.i&&oC(e.i,function(t,i){e.add(decodeURIComponent(t.replace(/\+/g," ")),i)}))}S=ys.prototype;S.add=function(e,t){Wi(this),this.i=null,e=Ur(this,e);var i=this.g.get(e);return i||this.g.set(e,i=[]),i.push(t),this.h+=1,this};function kv(e,t){Wi(e),t=Ur(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Cv(e,t){return Wi(e),t=Ur(e,t),e.g.has(t)}S.forEach=function(e,t){Wi(this),this.g.forEach(function(i,n){i.forEach(function(r){e.call(t,r,n,this)},this)},this)};S.ta=function(){Wi(this);let e=Array.from(this.g.values()),t=Array.from(this.g.keys()),i=[];for(let n=0;n<t.length;n++){let r=e[n];for(let o=0;o<r.length;o++)i.push(t[n])}return i};S.Z=function(e){Wi(this);let t=[];if(typeof e=="string")Cv(this,e)&&(t=t.concat(this.g.get(Ur(this,e))));else{e=Array.from(this.g.values());for(let i=0;i<e.length;i++)t=t.concat(e[i])}return t};S.set=function(e,t){return Wi(this),this.i=null,e=Ur(this,e),Cv(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};S.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function Tv(e,t,i){kv(e,t),0<i.length&&(e.i=null,e.g.set(Ur(e,t),Fh(i)),e.h+=i.length)}S.toString=function(){if(this.i)return this.i;if(!this.g)return"";let e=[],t=Array.from(this.g.keys());for(var i=0;i<t.length;i++){var n=t[i];let o=encodeURIComponent(String(n)),s=this.Z(n);for(n=0;n<s.length;n++){var r=o;s[n]!==""&&(r+="="+encodeURIComponent(String(s[n]))),e.push(r)}}return this.i=e.join("&")};function Ur(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function uC(e,t){t&&!e.j&&(Wi(e),e.i=null,e.g.forEach(function(i,n){var r=n.toLowerCase();n!=r&&(kv(this,n),Tv(this,r,i))},e)),e.j=t}var hC=class{constructor(e,t){this.g=e,this.map=t}};function Sv(e){this.l=e||mC,K.PerformanceNavigationTiming?(e=K.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(K.g&&K.g.Ka&&K.g.Ka()&&K.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var mC=10;function Dv(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function Rv(e){return e.h?1:e.g?e.g.size:0}function Rh(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function Hh(e,t){e.g?e.g.add(t):e.h=t}function Mv(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}Sv.prototype.cancel=function(){if(this.i=Pv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let e of this.g.values())e.cancel();this.g.clear()}};function Pv(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(let i of e.g.values())t=t.concat(i.F);return t}return Fh(e.i)}var pC=class{stringify(e){return K.JSON.stringify(e,void 0)}parse(e){return K.JSON.parse(e,void 0)}};function fC(){this.g=new pC}function gC(e,t,i){let n=i||"";try{Ev(e,function(r,o){let s=r;xs(r)&&(s=zh(r)),t.push(n+o+"="+encodeURIComponent(s))})}catch(r){throw t.push(n+"type="+encodeURIComponent("_badmap")),r}}function bC(e,t){let i=new Xc;if(K.Image){let n=new Image;n.onload=Pc(Lc,i,n,"TestLoadImage: loaded",!0,t),n.onerror=Pc(Lc,i,n,"TestLoadImage: error",!1,t),n.onabort=Pc(Lc,i,n,"TestLoadImage: abort",!1,t),n.ontimeout=Pc(Lc,i,n,"TestLoadImage: timeout",!1,t),K.setTimeout(function(){n.ontimeout&&n.ontimeout()},1e4),n.src=e}else t(!1)}function Lc(e,t,i,n,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(n)}catch{}}function Ts(e){this.l=e.ec||null,this.j=e.ob||!1}qt(Ts,Kh);Ts.prototype.g=function(){return new nl(this.l,this.j)};Ts.prototype.i=function(e){return function(){return e}}({});function nl(e,t){zt.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Yh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}qt(nl,zt);var Yh=0;S=nl.prototype;S.open=function(e,t){if(this.readyState!=Yh)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ws(this)};S.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||K).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};S.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ss(this)),this.readyState=Yh};S.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ws(this)),this.g&&(this.readyState=3,ws(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof K.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Nv(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function Nv(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}S.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ss(this):ws(this),this.readyState==3&&Nv(this)}};S.Za=function(e){this.g&&(this.response=this.responseText=e,Ss(this))};S.Ya=function(e){this.g&&(this.response=e,Ss(this))};S.ka=function(){this.g&&Ss(this)};function Ss(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ws(e)}S.setRequestHeader=function(e,t){this.v.append(e,t)};S.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};S.getAllResponseHeaders=function(){if(!this.h)return"";let e=[],t=this.h.entries();for(var i=t.next();!i.done;)i=i.value,e.push(i[0]+": "+i[1]),i=t.next();return e.join(`\r
`)};function ws(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(nl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var _C=K.JSON.parse;function Ct(e){zt.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Fv,this.L=this.M=!1}qt(Ct,zt);var Fv="",vC=/^https?$/i,yC=["POST","PUT"];S=Ct.prototype;S.Oa=function(e){this.M=e};S.ha=function(e,t,i,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ch.g(),this.C=this.u?q_(this.u):q_(Ch),this.g.onreadystatechange=ee(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(o){K_(this,o);return}if(e=i||"",i=new Map(this.headers),n)if(Object.getPrototypeOf(n)===Object.prototype)for(var r in n)i.set(r,n[r]);else if(typeof n.keys=="function"&&typeof n.get=="function")for(let o of n.keys())i.set(o,n.get(o));else throw Error("Unknown input type for opt_headers: "+String(n));n=Array.from(i.keys()).find(o=>o.toLowerCase()=="content-type"),r=K.FormData&&e instanceof K.FormData,!(0<=X_(yC,t))||n||r||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[o,s]of i)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Lv(this),0<this.B&&((this.L=wC(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ee(this.ua,this)):this.A=$h(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){K_(this,o)}};function wC(e){return jr&&typeof e.timeout=="number"&&e.ontimeout!==void 0}S.ua=function(){typeof Nh<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Yt(this,"timeout"),this.abort(8))};function K_(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Ov(e),rl(e)}function Ov(e){e.F||(e.F=!0,Yt(e,"complete"),Yt(e,"error"))}S.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Yt(this,"complete"),Yt(this,"abort"),rl(this))};S.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),rl(this,!0)),Ct.$.N.call(this)};S.La=function(){this.s||(this.G||this.v||this.l?Vv(this):this.kb())};S.kb=function(){Vv(this)};function Vv(e){if(e.h&&typeof Nh<"u"&&(!e.C[1]||ri(e)!=4||e.da()!=2)){if(e.v&&ri(e)==4)$h(e.La,0,e);else if(Yt(e,"readystatechange"),ri(e)==4){e.h=!1;try{let s=e.da();t:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break t;default:t=!1}var i;if(!(i=t)){var n;if(n=s===0){var r=String(e.I).match(Av)[1]||null;!r&&K.self&&K.self.location&&(r=K.self.location.protocol.slice(0,-1)),n=!vC.test(r?r.toLowerCase():"")}i=n}if(i)Yt(e,"complete"),Yt(e,"success");else{e.m=6;try{var o=2<ri(e)?e.g.statusText:""}catch{o=""}e.j=o+" ["+e.da()+"]",Ov(e)}}finally{rl(e)}}}}function rl(e,t){if(e.g){Lv(e);let i=e.g,n=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Yt(e,"ready");try{i.onreadystatechange=n}catch{}}}function Lv(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(K.clearTimeout(e.A),e.A=null)}S.isActive=function(){return!!this.g};function ri(e){return e.g?e.g.readyState:0}S.da=function(){try{return 2<ri(this)?this.g.status:-1}catch{return-1}};S.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};S.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),_C(t)}};function Q_(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Fv:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function xC(e){let t={};e=(e.g&&2<=ri(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let n=0;n<e.length;n++){if(ps(e[n]))continue;var i=Wk(e[n]);let r=i[0];if(i=i[1],typeof i!="string")continue;i=i.trim();let o=t[r]||[];t[r]=o,o.push(i)}Gk(t,function(n){return n.join(", ")})}S.Ia=function(){return this.m};S.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Bv(e){let t="";return Vh(e,function(i,n){t+=n,t+=":",t+=i,t+=`\r
`}),t}function Xh(e,t,i){t:{for(n in i){var n=!1;break t}n=!0}n||(i=Bv(i),typeof e=="string"?i!=null&&encodeURIComponent(String(i)):vt(e,t,i))}function ls(e,t,i){return i&&i.internalChannelParams&&i.internalChannelParams[e]||t}function jv(e){this.Ga=0,this.j=[],this.l=new Xc,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ls("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ls("baseRetryDelayMs",5e3,e),this.hb=ls("retryDelaySeedMs",1e4,e),this.eb=ls("forwardChannelMaxRetries",2,e),this.xa=ls("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Sv(e&&e.concurrentRequestLimit),this.Ja=new fC,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}S=jv.prototype;S.ra=8;S.H=1;function Zh(e){if(Uv(e),e.H==3){var t=e.W++,i=xi(e.I);if(vt(i,"SID",e.K),vt(i,"RID",t),vt(i,"TYPE","terminate"),Ds(e,i),t=new ks(e,e.l,t),t.L=2,t.A=il(xi(i)),i=!1,K.navigator&&K.navigator.sendBeacon)try{i=K.navigator.sendBeacon(t.A.toString(),"")}catch{}!i&&K.Image&&(new Image().src=t.A,i=!0),i||(t.g=Hv(t.l,null),t.g.ha(t.A)),t.G=Date.now(),Cs(t)}Qv(e)}function ol(e){e.g&&(tm(e),e.g.cancel(),e.g=null)}function Uv(e){ol(e),e.u&&(K.clearTimeout(e.u),e.u=null),zc(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&K.clearTimeout(e.m),e.m=null)}function sl(e){if(!Dv(e.i)&&!e.m){e.m=!0;var t=e.Na;gs||lv(),bs||(gs(),bs=!0),qh.add(t,e),e.C=0}}function IC(e,t){return Rv(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=Es(ee(e.Na,e,t),Kv(e,e.C)),e.C++,!0)}S.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;let r=new ks(this,this.l,e),o=this.s;if(this.U&&(o?(o=ev(o),iv(o,this.U)):o=this.U),this.o!==null||this.O||(r.I=o,o=null),this.P)t:{for(var t=0,i=0;i<this.j.length;i++){e:{var n=this.j[i];if("__data__"in n.map&&(n=n.map.__data__,typeof n=="string")){n=n.length;break e}n=void 0}if(n===void 0)break;if(t+=n,4096<t){t=i;break t}if(t===4096||i===this.j.length-1){t=i+1;break t}}t=1e3}else t=1e3;t=zv(this,r,t),i=xi(this.I),vt(i,"RID",e),vt(i,"CVER",22),this.F&&vt(i,"X-HTTP-Session-Id",this.F),Ds(this,i),o&&(this.O?t="headers="+encodeURIComponent(String(Bv(o)))+"&"+t:this.o&&Xh(i,this.o,o)),Hh(this.i,r),this.bb&&vt(i,"TYPE","init"),this.P?(vt(i,"$req",t),vt(i,"SID","null"),r.aa=!0,Sh(r,i,null)):Sh(r,i,t),this.H=2}}else this.H==3&&(e?W_(this,e):this.j.length==0||Dv(this.i)||W_(this))};function W_(e,t){var i;t?i=t.m:i=e.W++;let n=xi(e.I);vt(n,"SID",e.K),vt(n,"RID",i),vt(n,"AID",e.V),Ds(e,n),e.o&&e.s&&Xh(n,e.o,e.s),i=new ks(e,e.l,i,e.C+1),e.o===null&&(i.I=e.s),t&&(e.j=t.F.concat(e.j)),t=zv(e,i,1e3),i.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Hh(e.i,i),Sh(i,n,t)}function Ds(e,t){e.na&&Vh(e.na,function(i,n){vt(t,n,i)}),e.h&&Ev({},function(i,n){vt(t,n,i)})}function zv(e,t,i){i=Math.min(e.j.length,i);var n=e.h?ee(e.h.Va,e.h,e):null;t:{var r=e.j;let o=-1;for(;;){let s=["count="+i];o==-1?0<i?(o=r[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let c=0;c<i;c++){let l=r[c].g,d=r[c].map;if(l-=o,0>l)o=Math.max(0,r[c].g-100),a=!1;else try{gC(d,s,"req"+l+"_")}catch{n&&n(d)}}if(a){n=s.join("&");break t}}}return e=e.j.splice(0,i),t.F=e,n}function qv(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;gs||lv(),bs||(gs(),bs=!0),qh.add(t,e),e.A=0}}function Jh(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=Es(ee(e.Ma,e),Kv(e,e.A)),e.A++,!0)}S.Ma=function(){if(this.u=null,Gv(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Es(ee(this.jb,this),e)}};S.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ce(10),ol(this),Gv(this))};function tm(e){e.B!=null&&(K.clearTimeout(e.B),e.B=null)}function Gv(e){e.g=new ks(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=xi(e.wa);vt(t,"RID","rpc"),vt(t,"SID",e.K),vt(t,"AID",e.V),vt(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&vt(t,"TO",e.qa),vt(t,"TYPE","xmlhttp"),Ds(e,t),e.o&&e.s&&Xh(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var i=e.g;e=e.pa,i.L=1,i.A=il(xi(t)),i.u=null,i.S=!0,yv(i,e)}S.ib=function(){this.v!=null&&(this.v=null,ol(this),Jh(this),ce(19))};function zc(e){e.v!=null&&(K.clearTimeout(e.v),e.v=null)}function $v(e,t){var i=null;if(e.g==t){zc(e),tm(e),e.g=null;var n=2}else if(Rh(e.i,t))i=t.F,Mv(e.i,t),n=1;else return;if(e.H!=0){if(t.i)if(n==1){i=t.u?t.u.length:0,t=Date.now()-t.G;var r=e.C;n=Zc(),Yt(n,new fv(n,i)),sl(e)}else qv(e);else if(r=t.s,r==3||r==0&&0<t.ca||!(n==1&&IC(e,t)||n==2&&Jh(e)))switch(i&&0<i.length&&(t=e.i,t.i=t.i.concat(i)),r){case 1:On(e,5);break;case 4:On(e,10);break;case 3:On(e,6);break;default:On(e,2)}}}function Kv(e,t){let i=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(i*=2),i*t}function On(e,t){if(e.l.info("Error code "+t),t==2){var i=null;e.h&&(i=null);var n=ee(e.pb,e);i||(i=new Vn("//www.google.com/images/cleardot.gif"),K.location&&K.location.protocol=="http"||jc(i,"https"),il(i)),bC(i.toString(),n)}else ce(2);e.H=0,e.h&&e.h.za(t),Qv(e),Uv(e)}S.pb=function(e){e?(this.l.info("Successfully pinged google.com"),ce(2)):(this.l.info("Failed to ping google.com"),ce(1))};function Qv(e){if(e.H=0,e.ma=[],e.h){let t=Pv(e.i);(t.length!=0||e.j.length!=0)&&(B_(e.ma,t),B_(e.ma,e.j),e.i.i.length=0,Fh(e.j),e.j.length=0),e.h.ya()}}function Wv(e,t,i){var n=i instanceof Vn?xi(i):new Vn(i);if(n.g!="")t&&(n.g=t+"."+n.g),Uc(n,n.m);else{var r=K.location;n=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;var o=new Vn(null);n&&jc(o,n),t&&(o.g=t),r&&Uc(o,r),i&&(o.l=i),n=o}return i=e.F,t=e.Da,i&&t&&vt(n,i,t),vt(n,"VER",e.ra),Ds(e,n),n}function Hv(e,t,i){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=e.Ha&&!e.va?new Ct(new Ts({ob:i})):new Ct(e.va),t.Oa(e.J),t}S.isActive=function(){return!!this.h&&this.h.isActive(this)};function Yv(){}S=Yv.prototype;S.Ba=function(){};S.Aa=function(){};S.za=function(){};S.ya=function(){};S.isActive=function(){return!0};S.Va=function(){};function qc(){if(jr&&!(10<=Number(jk)))throw Error("Environmental error: no available transport.")}qc.prototype.g=function(e,t){return new Ee(e,t)};function Ee(e,t){zt.call(this),this.g=new jv(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!ps(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ps(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new zr(this)}qt(Ee,zt);Ee.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,i=this.h||void 0;ce(0),e.Y=t,e.na=i||{},e.G=e.aa,e.I=Wv(e,null,e.Y),sl(e)};Ee.prototype.close=function(){Zh(this.g)};Ee.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var i={};i.__data__=e,e=i}else this.v&&(i={},i.__data__=zh(e),e=i);t.j.push(new hC(t.fb++,e)),t.H==3&&sl(t)};Ee.prototype.N=function(){this.g.h=null,delete this.j,Zh(this.g),delete this.g,Ee.$.N.call(this)};function Xv(e){Qh.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){t:{for(let i in t){e=i;break t}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}qt(Xv,Qh);function Zv(){Wh.call(this),this.status=1}qt(Zv,Wh);function zr(e){this.g=e}qt(zr,Yv);zr.prototype.Ba=function(){Yt(this.g,"a")};zr.prototype.Aa=function(e){Yt(this.g,new Xv(e))};zr.prototype.za=function(e){Yt(this.g,new Zv)};zr.prototype.ya=function(){Yt(this.g,"b")};function EC(){this.blockSize=-1}function Ue(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}qt(Ue,EC);Ue.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function bh(e,t,i){i||(i=0);var n=Array(16);if(typeof t=="string")for(var r=0;16>r;++r)n[r]=t.charCodeAt(i++)|t.charCodeAt(i++)<<8|t.charCodeAt(i++)<<16|t.charCodeAt(i++)<<24;else for(r=0;16>r;++r)n[r]=t[i++]|t[i++]<<8|t[i++]<<16|t[i++]<<24;t=e.g[0],i=e.g[1],r=e.g[2];var o=e.g[3],s=t+(o^i&(r^o))+n[0]+3614090360&4294967295;t=i+(s<<7&4294967295|s>>>25),s=o+(r^t&(i^r))+n[1]+3905402710&4294967295,o=t+(s<<12&4294967295|s>>>20),s=r+(i^o&(t^i))+n[2]+606105819&4294967295,r=o+(s<<17&4294967295|s>>>15),s=i+(t^r&(o^t))+n[3]+3250441966&4294967295,i=r+(s<<22&4294967295|s>>>10),s=t+(o^i&(r^o))+n[4]+4118548399&4294967295,t=i+(s<<7&4294967295|s>>>25),s=o+(r^t&(i^r))+n[5]+1200080426&4294967295,o=t+(s<<12&4294967295|s>>>20),s=r+(i^o&(t^i))+n[6]+2821735955&4294967295,r=o+(s<<17&4294967295|s>>>15),s=i+(t^r&(o^t))+n[7]+4249261313&4294967295,i=r+(s<<22&4294967295|s>>>10),s=t+(o^i&(r^o))+n[8]+1770035416&4294967295,t=i+(s<<7&4294967295|s>>>25),s=o+(r^t&(i^r))+n[9]+2336552879&4294967295,o=t+(s<<12&4294967295|s>>>20),s=r+(i^o&(t^i))+n[10]+4294925233&4294967295,r=o+(s<<17&4294967295|s>>>15),s=i+(t^r&(o^t))+n[11]+2304563134&4294967295,i=r+(s<<22&4294967295|s>>>10),s=t+(o^i&(r^o))+n[12]+1804603682&4294967295,t=i+(s<<7&4294967295|s>>>25),s=o+(r^t&(i^r))+n[13]+4254626195&4294967295,o=t+(s<<12&4294967295|s>>>20),s=r+(i^o&(t^i))+n[14]+2792965006&4294967295,r=o+(s<<17&4294967295|s>>>15),s=i+(t^r&(o^t))+n[15]+1236535329&4294967295,i=r+(s<<22&4294967295|s>>>10),s=t+(r^o&(i^r))+n[1]+4129170786&4294967295,t=i+(s<<5&4294967295|s>>>27),s=o+(i^r&(t^i))+n[6]+3225465664&4294967295,o=t+(s<<9&4294967295|s>>>23),s=r+(t^i&(o^t))+n[11]+643717713&4294967295,r=o+(s<<14&4294967295|s>>>18),s=i+(o^t&(r^o))+n[0]+3921069994&4294967295,i=r+(s<<20&4294967295|s>>>12),s=t+(r^o&(i^r))+n[5]+3593408605&4294967295,t=i+(s<<5&4294967295|s>>>27),s=o+(i^r&(t^i))+n[10]+38016083&4294967295,o=t+(s<<9&4294967295|s>>>23),s=r+(t^i&(o^t))+n[15]+3634488961&4294967295,r=o+(s<<14&4294967295|s>>>18),s=i+(o^t&(r^o))+n[4]+3889429448&4294967295,i=r+(s<<20&4294967295|s>>>12),s=t+(r^o&(i^r))+n[9]+568446438&4294967295,t=i+(s<<5&4294967295|s>>>27),s=o+(i^r&(t^i))+n[14]+3275163606&4294967295,o=t+(s<<9&4294967295|s>>>23),s=r+(t^i&(o^t))+n[3]+4107603335&4294967295,r=o+(s<<14&4294967295|s>>>18),s=i+(o^t&(r^o))+n[8]+1163531501&4294967295,i=r+(s<<20&4294967295|s>>>12),s=t+(r^o&(i^r))+n[13]+2850285829&4294967295,t=i+(s<<5&4294967295|s>>>27),s=o+(i^r&(t^i))+n[2]+4243563512&4294967295,o=t+(s<<9&4294967295|s>>>23),s=r+(t^i&(o^t))+n[7]+1735328473&4294967295,r=o+(s<<14&4294967295|s>>>18),s=i+(o^t&(r^o))+n[12]+2368359562&4294967295,i=r+(s<<20&4294967295|s>>>12),s=t+(i^r^o)+n[5]+4294588738&4294967295,t=i+(s<<4&4294967295|s>>>28),s=o+(t^i^r)+n[8]+2272392833&4294967295,o=t+(s<<11&4294967295|s>>>21),s=r+(o^t^i)+n[11]+1839030562&4294967295,r=o+(s<<16&4294967295|s>>>16),s=i+(r^o^t)+n[14]+4259657740&4294967295,i=r+(s<<23&4294967295|s>>>9),s=t+(i^r^o)+n[1]+2763975236&4294967295,t=i+(s<<4&4294967295|s>>>28),s=o+(t^i^r)+n[4]+1272893353&4294967295,o=t+(s<<11&4294967295|s>>>21),s=r+(o^t^i)+n[7]+4139469664&4294967295,r=o+(s<<16&4294967295|s>>>16),s=i+(r^o^t)+n[10]+3200236656&4294967295,i=r+(s<<23&4294967295|s>>>9),s=t+(i^r^o)+n[13]+681279174&4294967295,t=i+(s<<4&4294967295|s>>>28),s=o+(t^i^r)+n[0]+3936430074&4294967295,o=t+(s<<11&4294967295|s>>>21),s=r+(o^t^i)+n[3]+3572445317&4294967295,r=o+(s<<16&4294967295|s>>>16),s=i+(r^o^t)+n[6]+76029189&4294967295,i=r+(s<<23&4294967295|s>>>9),s=t+(i^r^o)+n[9]+3654602809&4294967295,t=i+(s<<4&4294967295|s>>>28),s=o+(t^i^r)+n[12]+3873151461&4294967295,o=t+(s<<11&4294967295|s>>>21),s=r+(o^t^i)+n[15]+530742520&4294967295,r=o+(s<<16&4294967295|s>>>16),s=i+(r^o^t)+n[2]+3299628645&4294967295,i=r+(s<<23&4294967295|s>>>9),s=t+(r^(i|~o))+n[0]+4096336452&4294967295,t=i+(s<<6&4294967295|s>>>26),s=o+(i^(t|~r))+n[7]+1126891415&4294967295,o=t+(s<<10&4294967295|s>>>22),s=r+(t^(o|~i))+n[14]+2878612391&4294967295,r=o+(s<<15&4294967295|s>>>17),s=i+(o^(r|~t))+n[5]+4237533241&4294967295,i=r+(s<<21&4294967295|s>>>11),s=t+(r^(i|~o))+n[12]+1700485571&4294967295,t=i+(s<<6&4294967295|s>>>26),s=o+(i^(t|~r))+n[3]+2399980690&4294967295,o=t+(s<<10&4294967295|s>>>22),s=r+(t^(o|~i))+n[10]+4293915773&4294967295,r=o+(s<<15&4294967295|s>>>17),s=i+(o^(r|~t))+n[1]+2240044497&4294967295,i=r+(s<<21&4294967295|s>>>11),s=t+(r^(i|~o))+n[8]+1873313359&4294967295,t=i+(s<<6&4294967295|s>>>26),s=o+(i^(t|~r))+n[15]+4264355552&4294967295,o=t+(s<<10&4294967295|s>>>22),s=r+(t^(o|~i))+n[6]+2734768916&4294967295,r=o+(s<<15&4294967295|s>>>17),s=i+(o^(r|~t))+n[13]+1309151649&4294967295,i=r+(s<<21&4294967295|s>>>11),s=t+(r^(i|~o))+n[4]+4149444226&4294967295,t=i+(s<<6&4294967295|s>>>26),s=o+(i^(t|~r))+n[11]+3174756917&4294967295,o=t+(s<<10&4294967295|s>>>22),s=r+(t^(o|~i))+n[2]+718787259&4294967295,r=o+(s<<15&4294967295|s>>>17),s=i+(o^(r|~t))+n[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(r+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+r&4294967295,e.g[3]=e.g[3]+o&4294967295}Ue.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var i=t-this.blockSize,n=this.m,r=this.h,o=0;o<t;){if(r==0)for(;o<=i;)bh(this,e,o),o+=this.blockSize;if(typeof e=="string"){for(;o<t;)if(n[r++]=e.charCodeAt(o++),r==this.blockSize){bh(this,n),r=0;break}}else for(;o<t;)if(n[r++]=e[o++],r==this.blockSize){bh(this,n),r=0;break}}this.h=r,this.i+=t};Ue.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var i=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=i&255,i/=256;for(this.j(e),e=Array(16),t=i=0;4>t;++t)for(var n=0;32>n;n+=8)e[i++]=this.g[t]>>>n&255;return e};function lt(e,t){this.h=t;for(var i=[],n=!0,r=e.length-1;0<=r;r--){var o=e[r]|0;n&&o==t||(i[r]=o,n=!1)}this.g=i}var AC={};function em(e){return-128<=e&&128>e?Vk(e,function(t){return new lt([t|0],0>t?-1:0)}):new lt([e|0],0>e?-1:0)}function oi(e){if(isNaN(e)||!isFinite(e))return Br;if(0>e)return Ht(oi(-e));for(var t=[],i=1,n=0;e>=i;n++)t[n]=e/i|0,i*=Mh;return new lt(t,0)}function Jv(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return Ht(Jv(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=oi(Math.pow(t,8)),n=Br,r=0;r<e.length;r+=8){var o=Math.min(8,e.length-r),s=parseInt(e.substring(r,r+o),t);8>o?(o=oi(Math.pow(t,o)),n=n.R(o).add(oi(s))):(n=n.R(i),n=n.add(oi(s)))}return n}var Mh=4294967296,Br=em(0),Ph=em(1),H_=em(16777216);S=lt.prototype;S.ea=function(){if(Se(this))return-Ht(this).ea();for(var e=0,t=1,i=0;i<this.g.length;i++){var n=this.D(i);e+=(0<=n?n:Mh+n)*t,t*=Mh}return e};S.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(wi(this))return"0";if(Se(this))return"-"+Ht(this).toString(e);for(var t=oi(Math.pow(e,6)),i=this,n="";;){var r=$c(i,t).g;i=Gc(i,r.R(t));var o=((0<i.g.length?i.g[0]:i.h)>>>0).toString(e);if(i=r,wi(i))return o+n;for(;6>o.length;)o="0"+o;n=o+n}};S.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function wi(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function Se(e){return e.h==-1}S.X=function(e){return e=Gc(this,e),Se(e)?-1:wi(e)?0:1};function Ht(e){for(var t=e.g.length,i=[],n=0;n<t;n++)i[n]=~e.g[n];return new lt(i,~e.h).add(Ph)}S.abs=function(){return Se(this)?Ht(this):this};S.add=function(e){for(var t=Math.max(this.g.length,e.g.length),i=[],n=0,r=0;r<=t;r++){var o=n+(this.D(r)&65535)+(e.D(r)&65535),s=(o>>>16)+(this.D(r)>>>16)+(e.D(r)>>>16);n=s>>>16,o&=65535,s&=65535,i[r]=s<<16|o}return new lt(i,i[i.length-1]&-2147483648?-1:0)};function Gc(e,t){return e.add(Ht(t))}S.R=function(e){if(wi(this)||wi(e))return Br;if(Se(this))return Se(e)?Ht(this).R(Ht(e)):Ht(Ht(this).R(e));if(Se(e))return Ht(this.R(Ht(e)));if(0>this.X(H_)&&0>e.X(H_))return oi(this.ea()*e.ea());for(var t=this.g.length+e.g.length,i=[],n=0;n<2*t;n++)i[n]=0;for(n=0;n<this.g.length;n++)for(var r=0;r<e.g.length;r++){var o=this.D(n)>>>16,s=this.D(n)&65535,a=e.D(r)>>>16,c=e.D(r)&65535;i[2*n+2*r]+=s*c,Bc(i,2*n+2*r),i[2*n+2*r+1]+=o*c,Bc(i,2*n+2*r+1),i[2*n+2*r+1]+=s*a,Bc(i,2*n+2*r+1),i[2*n+2*r+2]+=o*a,Bc(i,2*n+2*r+2)}for(n=0;n<t;n++)i[n]=i[2*n+1]<<16|i[2*n];for(n=t;n<2*t;n++)i[n]=0;return new lt(i,0)};function Bc(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function ds(e,t){this.g=e,this.h=t}function $c(e,t){if(wi(t))throw Error("division by zero");if(wi(e))return new ds(Br,Br);if(Se(e))return t=$c(Ht(e),t),new ds(Ht(t.g),Ht(t.h));if(Se(t))return t=$c(e,Ht(t)),new ds(Ht(t.g),t.h);if(30<e.g.length){if(Se(e)||Se(t))throw Error("slowDivide_ only works with positive integers.");for(var i=Ph,n=t;0>=n.X(e);)i=Y_(i),n=Y_(n);var r=Vr(i,1),o=Vr(n,1);for(n=Vr(n,2),i=Vr(i,2);!wi(n);){var s=o.add(n);0>=s.X(e)&&(r=r.add(i),o=s),n=Vr(n,1),i=Vr(i,1)}return t=Gc(e,r.R(t)),new ds(r,t)}for(r=Br;0<=e.X(t);){for(i=Math.max(1,Math.floor(e.ea()/t.ea())),n=Math.ceil(Math.log(i)/Math.LN2),n=48>=n?1:Math.pow(2,n-48),o=oi(i),s=o.R(t);Se(s)||0<s.X(e);)i-=n,o=oi(i),s=o.R(t);wi(o)&&(o=Ph),r=r.add(o),e=Gc(e,s)}return new ds(r,e)}S.gb=function(e){return $c(this,e).h};S.and=function(e){for(var t=Math.max(this.g.length,e.g.length),i=[],n=0;n<t;n++)i[n]=this.D(n)&e.D(n);return new lt(i,this.h&e.h)};S.or=function(e){for(var t=Math.max(this.g.length,e.g.length),i=[],n=0;n<t;n++)i[n]=this.D(n)|e.D(n);return new lt(i,this.h|e.h)};S.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),i=[],n=0;n<t;n++)i[n]=this.D(n)^e.D(n);return new lt(i,this.h^e.h)};function Y_(e){for(var t=e.g.length+1,i=[],n=0;n<t;n++)i[n]=e.D(n)<<1|e.D(n-1)>>>31;return new lt(i,e.h)}function Vr(e,t){var i=t>>5;t%=32;for(var n=e.g.length-i,r=[],o=0;o<n;o++)r[o]=0<t?e.D(o+i)>>>t|e.D(o+i+1)<<32-t:e.D(o+i);return new lt(r,e.h)}qc.prototype.createWebChannel=qc.prototype.g;Ee.prototype.send=Ee.prototype.u;Ee.prototype.open=Ee.prototype.m;Ee.prototype.close=Ee.prototype.close;Jc.NO_ERROR=0;Jc.TIMEOUT=8;Jc.HTTP_ERROR=6;gv.COMPLETE="complete";bv.EventType=As;As.OPEN="a";As.CLOSE="b";As.ERROR="c";As.MESSAGE="d";zt.prototype.listen=zt.prototype.O;Ct.prototype.listenOnce=Ct.prototype.P;Ct.prototype.getLastError=Ct.prototype.Sa;Ct.prototype.getLastErrorCode=Ct.prototype.Ia;Ct.prototype.getStatus=Ct.prototype.da;Ct.prototype.getResponseJson=Ct.prototype.Wa;Ct.prototype.getResponseText=Ct.prototype.ja;Ct.prototype.send=Ct.prototype.ha;Ct.prototype.setWithCredentials=Ct.prototype.Oa;Ue.prototype.digest=Ue.prototype.l;Ue.prototype.reset=Ue.prototype.reset;Ue.prototype.update=Ue.prototype.j;lt.prototype.add=lt.prototype.add;lt.prototype.multiply=lt.prototype.R;lt.prototype.modulo=lt.prototype.gb;lt.prototype.compare=lt.prototype.X;lt.prototype.toNumber=lt.prototype.ea;lt.prototype.toString=lt.prototype.toString;lt.prototype.getBits=lt.prototype.D;lt.fromNumber=oi;lt.fromString=Jv;var t0=ze.createWebChannelTransport=function(){return new qc},e0=ze.getStatEventTarget=function(){return Zc()},al=ze.ErrorCode=Jc,i0=ze.EventType=gv,n0=ze.Event=Ln,im=ze.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},UP=ze.FetchXmlHttpFactory=Ts,Rs=ze.WebChannel=bv,r0=ze.XhrIo=Ct,o0=ze.Md5=Ue,Bn=ze.Integer=lt;var s0="@firebase/firestore";var Ot=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");var vo="10.8.0";var en=new _c("@firebase/firestore");function Qr(){return en.logLevel}function oy(e){en.setLogLevel(e)}function x(e,...t){if(en.logLevel<=ii.DEBUG){let i=t.map(of);en.debug(`Firestore (${vo}): ${e}`,...i)}}function Dt(e,...t){if(en.logLevel<=ii.ERROR){let i=t.map(of);en.error(`Firestore (${vo}): ${e}`,...i)}}function Re(e,...t){if(en.logLevel<=ii.WARN){let i=t.map(of);en.warn(`Firestore (${vo}): ${e}`,...i)}}function of(e){if(typeof e=="string")return e;try{return function(i){return JSON.stringify(i)}(e)}catch{return e}}function P(e="Unexpected state"){let t=`FIRESTORE (${vo}) INTERNAL ASSERTION FAILED: `+e;throw Dt(t),new Error(t)}function L(e,t){e||P()}function sy(e,t){e||P()}function D(e,t){return e}var f={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},v=class extends Zb{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Vt=class{constructor(){this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}};var _l=class{constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},am=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable(()=>i(Ot.UNAUTHENTICATED))}shutdown(){}},cm=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,i){this.changeListener=i,t.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}},lm=class{constructor(t){this.t=t,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){let n=this.i,r=c=>this.i!==n?(n=this.i,i(c)):Promise.resolve(),o=new Vt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Vt,t.enqueueRetryable(()=>r(this.currentUser))};let s=()=>{let c=o;t.enqueueRetryable(()=>g(this,null,function*(){yield c.promise,yield r(this.currentUser)}))},a=c=>{x("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(x("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Vt)}},0),s()}getToken(){let t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(n=>this.i!==t?(x("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(L(typeof n.accessToken=="string"),new _l(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let t=this.auth&&this.auth.getUid();return L(t===null||typeof t=="string"),new Ot(t)}},dm=class{constructor(t,i,n){this.l=t,this.h=i,this.P=n,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},um=class{constructor(t,i,n){this.l=t,this.h=i,this.P=n}getToken(){return Promise.resolve(new dm(this.l,this.h,this.P))}start(t,i){t.enqueueRetryable(()=>i(Ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}},hm=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},mm=class{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,i){let n=o=>{o.error!=null&&x("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,x("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?i(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>n(o))};let r=o=>{x("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):x("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(i=>i?(L(typeof i.token=="string"),this.R=i.token,new hm(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function kC(e){let t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(i);else for(let n=0;n<e;n++)i[n]=Math.floor(256*Math.random());return i}var vl=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=Math.floor(256/t.length)*t.length,n="";for(;n.length<20;){let r=kC(40);for(let o=0;o<r.length;++o)n.length<20&&r[o]<i&&(n+=t.charAt(r[o]%t.length))}return n}};function W(e,t){return e<t?-1:e>t?1:0}function io(e,t,i){return e.length===t.length&&e.every((n,r)=>i(n,t[r]))}function ay(e){return e+"\0"}var Et=class e{constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new v(f.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new v(f.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<-62135596800)throw new v(f.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new v(f.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return e.fromMillis(Date.now())}static fromDate(t){return e.fromMillis(t.getTime())}static fromMillis(t){let i=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*i));return new e(i,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?W(this.nanoseconds,t.nanoseconds):W(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var U=class e{constructor(t){this.timestamp=t}static fromTimestamp(t){return new e(t)}static min(){return new e(new Et(0,0))}static max(){return new e(new Et(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var yl=class e{constructor(t,i,n){i===void 0?i=0:i>t.length&&P(),n===void 0?n=t.length-i:n>t.length-i&&P(),this.segments=t,this.offset=i,this.len=n}get length(){return this.len}isEqual(t){return e.comparator(this,t)===0}child(t){let i=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(n=>{i.push(n)}):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,n=this.limit();i<n;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){let n=Math.min(t.length,i.length);for(let r=0;r<n;r++){let o=t.get(r),s=i.get(r);if(o<s)return-1;if(o>s)return 1}return t.length<i.length?-1:t.length>i.length?1:0}},nt=class e extends yl{construct(t,i,n){return new e(t,i,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let i=[];for(let n of t){if(n.indexOf("//")>=0)throw new v(f.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);i.push(...n.split("/").filter(r=>r.length>0))}return new e(i)}static emptyPath(){return new e([])}},CC=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Rt=class e extends yl{construct(t,i,n){return new e(t,i,n)}static isValidIdentifier(t){return CC.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new e(["__name__"])}static fromServerFormat(t){let i=[],n="",r=0,o=()=>{if(n.length===0)throw new v(f.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(n),n=""},s=!1;for(;r<t.length;){let a=t[r];if(a==="\\"){if(r+1===t.length)throw new v(f.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let c=t[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new v(f.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=c,r+=2}else a==="`"?(s=!s,r++):a!=="."||s?(n+=a,r++):(o(),r++)}if(o(),s)throw new v(f.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(i)}static emptyPath(){return new e([])}};var T=class e{constructor(t){this.path=t}static fromPath(t){return new e(nt.fromString(t))}static fromName(t){return new e(nt.fromString(t).popFirst(5))}static empty(){return new e(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&nt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,i){return nt.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new e(new nt(t.slice()))}};var no=class{constructor(t,i,n,r){this.indexId=t,this.collectionGroup=i,this.fields=n,this.indexState=r}};function pm(e){return e.fields.find(t=>t.kind===2)}function Un(e){return e.fields.filter(t=>t.kind!==2)}no.UNKNOWN_ID=-1;var Jr=class{constructor(t,i){this.fieldPath=t,this.kind=i}};var qs=class e{constructor(t,i){this.sequenceNumber=t,this.offset=i}static empty(){return new e(0,Me.min())}};function cy(e,t){let i=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,r=U.fromTimestamp(n===1e9?new Et(i+1,0):new Et(i,n));return new Me(r,T.empty(),t)}function ly(e){return new Me(e.readTime,e.key,-1)}var Me=class e{constructor(t,i,n){this.readTime=t,this.documentKey=i,this.largestBatchId=n}static min(){return new e(U.min(),T.empty(),-1)}static max(){return new e(U.max(),T.empty(),-1)}};function sf(e,t){let i=e.readTime.compareTo(t.readTime);return i!==0?i:(i=T.comparator(e.documentKey,t.documentKey),i!==0?i:W(e.largestBatchId,t.largestBatchId))}var dy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",wl=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};function hn(e){return g(this,null,function*(){if(e.code!==f.FAILED_PRECONDITION||e.message!==dy)throw e;x("LocalStore","Unexpectedly lost primary lease")})}var p=class e{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&P(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new e((n,r)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(n,r)},this.catchCallback=o=>{this.wrapFailure(i,o).next(n,r)}})}toPromise(){return new Promise((t,i)=>{this.next(t,i)})}wrapUserFunction(t){try{let i=t();return i instanceof e?i:e.resolve(i)}catch(i){return e.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction(()=>t(i)):e.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction(()=>t(i)):e.reject(i)}static resolve(t){return new e((i,n)=>{i(t)})}static reject(t){return new e((i,n)=>{n(t)})}static waitFor(t){return new e((i,n)=>{let r=0,o=0,s=!1;t.forEach(a=>{++r,a.next(()=>{++o,s&&o===r&&i()},c=>n(c))}),s=!0,o===r&&i()})}static or(t){let i=e.resolve(!1);for(let n of t)i=i.next(r=>r?e.resolve(r):n());return i}static forEach(t,i){let n=[];return t.forEach((r,o)=>{n.push(i.call(this,r,o))}),this.waitFor(n)}static mapArray(t,i){return new e((n,r)=>{let o=t.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;i(t[l]).next(d=>{s[l]=d,++a,a===o&&n(s)},d=>r(d))}})}static doWhile(t,i){return new e((n,r)=>{let o=()=>{t()===!0?i().next(()=>{o()},r):n()};o()})}};var xl=class e{constructor(t,i){this.action=t,this.transaction=i,this.aborted=!1,this.V=new Vt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{i.error?this.V.reject(new Qn(t,i.error)):this.V.resolve()},this.transaction.onerror=n=>{let r=af(n.target.error);this.V.reject(new Qn(t,r))}}static open(t,i,n,r){try{return new e(i,t.transaction(r,n))}catch(o){throw new Qn(i,o)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(x("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){let i=this.transaction.objectStore(t);return new gm(i)}},Ai=class e{constructor(t,i,n){this.name=t,this.version=i,this.p=n,e.S(Jo())===12.2&&Dt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return x("SimpleDb","Removing database:",t),zn(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!bc())return!1;if(e.C())return!0;let t=Jo(),i=e.S(t),n=0<i&&i<10,r=e.v(t),o=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||o)}static C(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.F)==="YES"}static M(t,i){return t.store(i)}static S(t){let i=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=i?i[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(t){let i=t.match(/Android ([\d.]+)/i),n=i?i[1].split(".").slice(0,2).join("."):"-1";return Number(n)}O(t){return g(this,null,function*(){return this.db||(x("SimpleDb","Opening database:",this.name),this.db=yield new Promise((i,n)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=o=>{let s=o.target.result;i(s)},r.onblocked=()=>{n(new Qn(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=o=>{let s=o.target.error;s.name==="VersionError"?n(new v(f.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?n(new v(f.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):n(new Qn(t,s))},r.onupgradeneeded=o=>{x("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.N(s,r.transaction,o.oldVersion,this.version).next(()=>{x("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=i=>this.B(i)),this.db})}L(t){this.B=t,this.db&&(this.db.onversionchange=i=>t(i))}runTransaction(t,i,n,r){return g(this,null,function*(){let o=i==="readonly",s=0;for(;;){++s;try{this.db=yield this.O(t);let a=xl.open(this.db,t,o?"readonly":"readwrite",n),c=r(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),p.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(x("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},fm=class{constructor(t){this.k=t,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(t){this.k=t}done(){this.q=!0}U(t){this.K=t}delete(){return zn(this.k.delete())}},Qn=class extends v{constructor(t,i){super(f.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${i}`),this.name="IndexedDbTransactionError"}};function mn(e){return e.name==="IndexedDbTransactionError"}var gm=class{constructor(t){this.store=t}put(t,i){let n;return i!==void 0?(x("SimpleDb","PUT",this.store.name,t,i),n=this.store.put(i,t)):(x("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),zn(n)}add(t){return x("SimpleDb","ADD",this.store.name,t,t),zn(this.store.add(t))}get(t){return zn(this.store.get(t)).next(i=>(i===void 0&&(i=null),x("SimpleDb","GET",this.store.name,t,i),i))}delete(t){return x("SimpleDb","DELETE",this.store.name,t),zn(this.store.delete(t))}count(){return x("SimpleDb","COUNT",this.store.name),zn(this.store.count())}W(t,i){let n=this.options(t,i),r=n.index?this.store.index(n.index):this.store;if(typeof r.getAll=="function"){let o=r.getAll(n.range);return new p((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(n),s=[];return this.G(o,(a,c)=>{s.push(c)}).next(()=>s)}}j(t,i){let n=this.store.getAll(t,i===null?void 0:i);return new p((r,o)=>{n.onerror=s=>{o(s.target.error)},n.onsuccess=s=>{r(s.target.result)}})}H(t,i){x("SimpleDb","DELETE ALL",this.store.name);let n=this.options(t,i);n.J=!1;let r=this.cursor(n);return this.G(r,(o,s,a)=>a.delete())}Y(t,i){let n;i?n=t:(n={},i=t);let r=this.cursor(n);return this.G(r,i)}Z(t){let i=this.cursor({});return new p((n,r)=>{i.onerror=o=>{let s=af(o.target.error);r(s)},i.onsuccess=o=>{let s=o.target.result;s?t(s.primaryKey,s.value).next(a=>{a?s.continue():n()}):n()}})}G(t,i){let n=[];return new p((r,o)=>{t.onerror=s=>{o(s.target.error)},t.onsuccess=s=>{let a=s.target.result;if(!a)return void r();let c=new fm(a),l=i(a.primaryKey,a.value,c);if(l instanceof p){let d=l.catch(u=>(c.done(),p.reject(u)));n.push(d)}c.isDone?r():c.$===null?a.continue():a.continue(c.$)}}).next(()=>p.waitFor(n))}options(t,i){let n;return t!==void 0&&(typeof t=="string"?n=t:i=t),{index:n,range:i}}cursor(t){let i="next";if(t.reverse&&(i="prev"),t.index){let n=this.store.index(t.index);return t.J?n.openKeyCursor(t.range,i):n.openCursor(t.range,i)}return this.store.openCursor(t.range,i)}};function zn(e){return new p((t,i)=>{e.onsuccess=n=>{let r=n.target.result;t(r)},e.onerror=n=>{let r=af(n.target.error);i(r)}})}var a0=!1;function af(e){let t=Ai.S(Jo());if(t>=12.2&&t<13){let i="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(i)>=0){let n=new v("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${i}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return a0||(a0=!0,setTimeout(()=>{throw n},0)),n}}return e}var bm=class{constructor(t,i){this.asyncQueue=t,this.X=i,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(t){x("IndexBackfiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,()=>g(this,null,function*(){this.task=null;try{x("IndexBackfiller",`Documents written: ${yield this.X.te()}`)}catch(i){mn(i)?x("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",i):yield hn(i)}yield this.ee(6e4)}))}},_m=class{constructor(t,i){this.localStore=t,this.persistence=i}te(t=50){return g(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>this.ne(i,t))})}ne(t,i){let n=new Set,r=i,o=!0;return p.doWhile(()=>o===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(s=>{if(s!==null&&!n.has(s))return x("IndexBackfiller",`Processing collection: ${s}`),this.re(t,s,r).next(a=>{r-=a,n.add(s)});o=!1})).next(()=>i-r)}re(t,i,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,i).next(r=>this.localStore.localDocuments.getNextDocuments(t,i,r,n).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(t,s).next(()=>this.ie(r,o)).next(a=>(x("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(t,i,a))).next(()=>s.size)}))}ie(t,i){let n=t;return i.changes.forEach((r,o)=>{let s=ly(o);sf(s,n)>0&&(n=s)}),new Me(n.readTime,n.documentKey,Math.max(i.batchId,t.largestBatchId))}};var Ae=(()=>{class e{constructor(i,n){this.previousValue=i,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(i){return this.previousValue=Math.max(i,this.previousValue),this.previousValue}next(){let i=++this.previousValue;return this.oe&&this.oe(i),i}}return e._e=-1,e})();function ha(e){return e==null}function Gs(e){return e===0&&1/e==-1/0}function uy(e){return typeof e=="number"&&Number.isInteger(e)&&!Gs(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function le(e){let t="";for(let i=0;i<e.length;i++)t.length>0&&(t=c0(t)),t=TC(e.get(i),t);return c0(t)}function TC(e,t){let i=t,n=e.length;for(let r=0;r<n;r++){let o=e.charAt(r);switch(o){case"\0":i+="";break;case"":i+="";break;default:i+=o}}return i}function c0(e){return e+""}function si(e){let t=e.length;if(L(t>=2),t===2)return L(e.charAt(0)===""&&e.charAt(1)===""),nt.emptyPath();let i=t-2,n=[],r="";for(let o=0;o<t;){let s=e.indexOf("",o);switch((s<0||s>i)&&P(),e.charAt(s+1)){case"":let a=e.substring(o,s),c;r.length===0?c=a:(r+=a,c=r,r=""),n.push(c);break;case"":r+=e.substring(o,s),r+="\0";break;case"":r+=e.substring(o,s+1);break;default:P()}o=s+2}return new nt(n)}var l0=["userId","batchId"];function hl(e,t){return[e,le(t)]}function hy(e,t,i){return[e,le(t),i]}var SC={},DC=["prefixPath","collectionGroup","readTime","documentId"],RC=["prefixPath","collectionGroup","documentId"],MC=["collectionGroup","readTime","prefixPath","documentId"],PC=["canonicalId","targetId"],NC=["targetId","path"],FC=["path","targetId"],OC=["collectionId","parent"],VC=["indexId","uid"],LC=["uid","sequenceNumber"],BC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],jC=["indexId","uid","orderedDocumentKey"],UC=["userId","collectionPath","documentId"],zC=["userId","collectionPath","largestBatchId"],qC=["userId","collectionGroup","largestBatchId"],my=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],GC=[...my,"documentOverlays"],py=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],fy=py,$C=[...fy,"indexConfiguration","indexState","indexEntries"];var $s=class extends wl{constructor(t,i){super(),this.ae=t,this.currentSequenceNumber=i}};function $t(e,t){let i=D(e);return Ai.M(i.ae,t)}function d0(e){let t=0;for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&t++;return t}function or(e,t){for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&t(i,e[i])}function gy(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var yt=class e{constructor(t,i){this.comparator=t,this.root=i||ci.EMPTY}insert(t,i){return new e(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,ci.BLACK,null,null))}remove(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ci.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){let n=this.comparator(t,i.key);if(n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}indexOf(t){let i=0,n=this.root;for(;!n.isEmpty();){let r=this.comparator(t,n.key);if(r===0)return i+n.left.size;r<0?n=n.left:(i+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((i,n)=>(t(i,n),!1))}toString(){let t=[];return this.inorderTraversal((i,n)=>(t.push(`${i}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Zr(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Zr(this.root,t,this.comparator,!1)}getReverseIterator(){return new Zr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Zr(this.root,t,this.comparator,!0)}},Zr=class{constructor(t,i,n,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=i?n(t.key,i):1,i&&r&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},ci=class e{constructor(t,i,n,r,o){this.key=t,this.value=i,this.color=n??e.RED,this.left=r??e.EMPTY,this.right=o??e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,n,r,o){return new e(t??this.key,i??this.value,n??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,n){let r=this,o=n(t,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(t,i,n),null):o===0?r.copy(null,i,null,null,null):r.copy(null,null,null,null,r.right.insert(t,i,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let n,r=this;if(i(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),i(t,r.key)===0){if(r.right.isEmpty())return e.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw P();let t=this.left.check();if(t!==this.right.check())throw P();return t+(this.isRed()?0:1)}};ci.EMPTY=null,ci.RED=!0,ci.BLACK=!1;ci.EMPTY=new class{constructor(){this.size=0}get key(){throw P()}get value(){throw P()}get color(){throw P()}get left(){throw P()}get right(){throw P()}copy(t,i,n,r,o){return this}insert(t,i,n){return new ci(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var pt=class e{constructor(t){this.comparator=t,this.data=new yt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((i,n)=>(t(i),!1))}forEachInRange(t,i){let n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){let r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;i(r.key)}}forEachWhile(t,i){let n;for(n=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){let i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new Il(this.data.getIterator())}getIteratorFrom(t){return new Il(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach(n=>{i=i.add(n)}),i}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let i=this.data.getIterator(),n=t.data.getIterator();for(;i.hasNext();){let r=i.getNext().key,o=n.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(i=>{t.push(i)}),t}toString(){let t=[];return this.forEach(i=>t.push(i)),"SortedSet("+t.toString()+")"}copy(t){let i=new e(this.comparator);return i.data=t,i}},Il=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function qr(e){return e.hasNext()?e.getNext():void 0}var ke=class e{constructor(t){this.fields=t,t.sort(Rt.comparator)}static empty(){return new e([])}unionWith(t){let i=new pt(Rt.comparator);for(let n of this.fields)i=i.add(n);for(let n of t)i=i.add(n);return new e(i.toArray())}covers(t){for(let i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return io(this.fields,t.fields,(i,n)=>i.isEqual(n))}};var El=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function by(){return typeof atob<"u"}var Gt=class e{constructor(t){this.binaryString=t}static fromBase64String(t){let i=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new El("Invalid base64 string: "+o):o}}(t);return new e(i)}static fromUint8Array(t){let i=function(r){let o="";for(let s=0;s<r.length;++s)o+=String.fromCharCode(r[s]);return o}(t);return new e(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(i){return btoa(i)}(this.binaryString)}toUint8Array(){return function(i){let n=new Uint8Array(i.length);for(let r=0;r<i.length;r++)n[r]=i.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return W(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};Gt.EMPTY_BYTE_STRING=new Gt("");var KC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nn(e){if(L(!!e),typeof e=="string"){let t=0,i=KC.exec(e);if(L(!!i),i[1]){let r=i[1];r=(r+"000000000").substr(0,9),t=Number(r)}let n=new Date(e);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:Tt(e.seconds),nanos:Tt(e.nanos)}}function Tt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function rn(e){return typeof e=="string"?Gt.fromBase64String(e):Gt.fromUint8Array(e)}function pd(e){var t,i;return((i=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||i===void 0?void 0:i.stringValue)==="server_timestamp"}function cf(e){let t=e.mapValue.fields.__previous_value__;return pd(t)?cf(t):t}function Ks(e){let t=nn(e.mapValue.fields.__local_write_time__.timestampValue);return new Et(t.seconds,t.nanos)}var vm=class{constructor(t,i,n,r,o,s,a,c,l){this.databaseId=t,this.appId=i,this.persistenceKey=n,this.host=r,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},on=class e{constructor(t,i){this.projectId=t,this.database=i||"(default)"}static empty(){return new e("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}};var Ji={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ml={nullValue:"NULL_VALUE"};function Wn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?pd(e)?4:_y(e)?9007199254740991:10:P()}function ui(e,t){if(e===t)return!0;let i=Wn(e);if(i!==Wn(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ks(e).isEqual(Ks(t));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let s=nn(r.timestampValue),a=nn(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,o){return rn(r.bytesValue).isEqual(rn(o.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,o){return Tt(r.geoPointValue.latitude)===Tt(o.geoPointValue.latitude)&&Tt(r.geoPointValue.longitude)===Tt(o.geoPointValue.longitude)}(e,t);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Tt(r.integerValue)===Tt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let s=Tt(r.doubleValue),a=Tt(o.doubleValue);return s===a?Gs(s)===Gs(a):isNaN(s)&&isNaN(a)}return!1}(e,t);case 9:return io(e.arrayValue.values||[],t.arrayValue.values||[],ui);case 10:return function(r,o){let s=r.mapValue.fields||{},a=o.mapValue.fields||{};if(d0(s)!==d0(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!ui(s[c],a[c])))return!1;return!0}(e,t);default:return P()}}function Qs(e,t){return(e.values||[]).find(i=>ui(i,t))!==void 0}function sn(e,t){if(e===t)return 0;let i=Wn(e),n=Wn(t);if(i!==n)return W(i,n);switch(i){case 0:case 9007199254740991:return 0;case 1:return W(e.booleanValue,t.booleanValue);case 2:return function(o,s){let a=Tt(o.integerValue||o.doubleValue),c=Tt(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(e,t);case 3:return u0(e.timestampValue,t.timestampValue);case 4:return u0(Ks(e),Ks(t));case 5:return W(e.stringValue,t.stringValue);case 6:return function(o,s){let a=rn(o),c=rn(s);return a.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=W(a[l],c[l]);if(d!==0)return d}return W(a.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(o,s){let a=W(Tt(o.latitude),Tt(s.latitude));return a!==0?a:W(Tt(o.longitude),Tt(s.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(o,s){let a=o.values||[],c=s.values||[];for(let l=0;l<a.length&&l<c.length;++l){let d=sn(a[l],c[l]);if(d)return d}return W(a.length,c.length)}(e.arrayValue,t.arrayValue);case 10:return function(o,s){if(o===Ji.mapValue&&s===Ji.mapValue)return 0;if(o===Ji.mapValue)return 1;if(s===Ji.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let u=0;u<c.length&&u<d.length;++u){let h=W(c[u],d[u]);if(h!==0)return h;let m=sn(a[c[u]],l[d[u]]);if(m!==0)return m}return W(c.length,d.length)}(e.mapValue,t.mapValue);default:throw P()}}function u0(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return W(e,t);let i=nn(e),n=nn(t),r=W(i.seconds,n.seconds);return r!==0?r:W(i.nanos,n.nanos)}function ro(e){return ym(e)}function ym(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(i){let n=nn(i);return`time(${n.seconds},${n.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(i){return rn(i).toBase64()}(e.bytesValue):"referenceValue"in e?function(i){return T.fromName(i).toString()}(e.referenceValue):"geoPointValue"in e?function(i){return`geo(${i.latitude},${i.longitude})`}(e.geoPointValue):"arrayValue"in e?function(i){let n="[",r=!0;for(let o of i.values||[])r?r=!1:n+=",",n+=ym(o);return n+"]"}(e.arrayValue):"mapValue"in e?function(i){let n=Object.keys(i.fields||{}).sort(),r="{",o=!0;for(let s of n)o?o=!1:r+=",",r+=`${s}:${ym(i.fields[s])}`;return r+"}"}(e.mapValue):P()}function Hn(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function wm(e){return!!e&&"integerValue"in e}function Ws(e){return!!e&&"arrayValue"in e}function h0(e){return!!e&&"nullValue"in e}function m0(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function pl(e){return!!e&&"mapValue"in e}function Ls(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){let t={mapValue:{fields:{}}};return or(e.mapValue.fields,(i,n)=>t.mapValue.fields[i]=Ls(n)),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let i=0;i<(e.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=Ls(e.arrayValue.values[i]);return t}return Object.assign({},e)}function _y(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function QC(e){return"nullValue"in e?ml:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Hn(on.empty(),T.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:P()}function WC(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Hn(on.empty(),T.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Ji:P()}function p0(e,t){let i=sn(e.value,t.value);return i!==0?i:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function f0(e,t){let i=sn(e.value,t.value);return i!==0?i:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var re=class e{constructor(t){this.value=t}static empty(){return new e({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let n=0;n<t.length-1;++n)if(i=(i.mapValue.fields||{})[t.get(n)],!pl(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ls(i)}setAll(t){let i=Rt.emptyPath(),n={},r=[];t.forEach((s,a)=>{if(!i.isImmediateParentOf(a)){let c=this.getFieldsMap(i);this.applyChanges(c,n,r),n={},r=[],i=a.popLast()}s?n[a.lastSegment()]=Ls(s):r.push(a.lastSegment())});let o=this.getFieldsMap(i);this.applyChanges(o,n,r)}delete(t){let i=this.field(t.popLast());pl(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return ui(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=i.mapValue.fields[t.get(n)];pl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},i.mapValue.fields[t.get(n)]=r),i=r}return i.mapValue.fields}applyChanges(t,i,n){or(i,(r,o)=>t[r]=o);for(let r of n)delete t[r]}clone(){return new e(Ls(this.value))}};function vy(e){let t=[];return or(e.fields,(i,n)=>{let r=new Rt([i]);if(pl(n)){let o=vy(n.mapValue).fields;if(o.length===0)t.push(r);else for(let s of o)t.push(r.child(s))}else t.push(r)}),new ke(t)}var Lt=class e{constructor(t,i,n,r,o,s,a){this.key=t,this.documentType=i,this.version=n,this.readTime=r,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(t){return new e(t,0,U.min(),U.min(),U.min(),re.empty(),0)}static newFoundDocument(t,i,n,r){return new e(t,1,i,U.min(),n,r,0)}static newNoDocument(t,i){return new e(t,2,i,U.min(),U.min(),re.empty(),0)}static newUnknownDocument(t,i){return new e(t,3,i,U.min(),U.min(),re.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(U.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=re.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=re.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=U.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var hi=class{constructor(t,i){this.position=t,this.inclusive=i}};function g0(e,t,i){let n=0;for(let r=0;r<e.position.length;r++){let o=t[r],s=e.position[r];if(o.field.isKeyField()?n=T.comparator(T.fromName(s.referenceValue),i.key):n=sn(s,i.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function b0(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let i=0;i<e.position.length;i++)if(!ui(e.position[i],t.position[i]))return!1;return!0}var Yn=class{constructor(t,i="asc"){this.field=t,this.dir=i}};function HC(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Al=class{},tt=class e extends Al{constructor(t,i,n){super(),this.field=t,this.op=i,this.value=n}static create(t,i,n){return t.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(t,i,n):new Em(t,i,n):i==="array-contains"?new Cm(t,n):i==="in"?new kl(t,n):i==="not-in"?new Tm(t,n):i==="array-contains-any"?new Sm(t,n):new e(t,i,n)}static createKeyFieldInFilter(t,i,n){return i==="in"?new Am(t,n):new km(t,n)}matches(t){let i=t.data.field(this.field);return this.op==="!="?i!==null&&this.matchesComparison(sn(i,this.value)):i!==null&&Wn(this.value)===Wn(i)&&this.matchesComparison(sn(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return P()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},dt=class e extends Al{constructor(t,i){super(),this.filters=t,this.op=i,this.ue=null}static create(t,i){return new e(t,i)}matches(t){return oo(this)?this.filters.find(i=>!i.matches(t))===void 0:this.filters.find(i=>i.matches(t))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((t,i)=>t.concat(i.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function oo(e){return e.op==="and"}function xm(e){return e.op==="or"}function lf(e){return yy(e)&&oo(e)}function yy(e){for(let t of e.filters)if(t instanceof dt)return!1;return!0}function Im(e){if(e instanceof tt)return e.field.canonicalString()+e.op.toString()+ro(e.value);if(lf(e))return e.filters.map(t=>Im(t)).join(",");{let t=e.filters.map(i=>Im(i)).join(",");return`${e.op}(${t})`}}function wy(e,t){return e instanceof tt?function(n,r){return r instanceof tt&&n.op===r.op&&n.field.isEqual(r.field)&&ui(n.value,r.value)}(e,t):e instanceof dt?function(n,r){return r instanceof dt&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((o,s,a)=>o&&wy(s,r.filters[a]),!0):!1}(e,t):void P()}function xy(e,t){let i=e.filters.concat(t);return dt.create(i,e.op)}function Iy(e){return e instanceof tt?function(i){return`${i.field.canonicalString()} ${i.op} ${ro(i.value)}`}(e):e instanceof dt?function(i){return i.op.toString()+" {"+i.getFilters().map(Iy).join(" ,")+"}"}(e):"Filter"}var Em=class extends tt{constructor(t,i,n){super(t,i,n),this.key=T.fromName(n.referenceValue)}matches(t){let i=T.comparator(t.key,this.key);return this.matchesComparison(i)}},Am=class extends tt{constructor(t,i){super(t,"in",i),this.keys=Ey("in",i)}matches(t){return this.keys.some(i=>i.isEqual(t.key))}},km=class extends tt{constructor(t,i){super(t,"not-in",i),this.keys=Ey("not-in",i)}matches(t){return!this.keys.some(i=>i.isEqual(t.key))}};function Ey(e,t){var i;return(((i=t.arrayValue)===null||i===void 0?void 0:i.values)||[]).map(n=>T.fromName(n.referenceValue))}var Cm=class extends tt{constructor(t,i){super(t,"array-contains",i)}matches(t){let i=t.data.field(this.field);return Ws(i)&&Qs(i.arrayValue,this.value)}},kl=class extends tt{constructor(t,i){super(t,"in",i)}matches(t){let i=t.data.field(this.field);return i!==null&&Qs(this.value.arrayValue,i)}},Tm=class extends tt{constructor(t,i){super(t,"not-in",i)}matches(t){if(Qs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let i=t.data.field(this.field);return i!==null&&!Qs(this.value.arrayValue,i)}},Sm=class extends tt{constructor(t,i){super(t,"array-contains-any",i)}matches(t){let i=t.data.field(this.field);return!(!Ws(i)||!i.arrayValue.values)&&i.arrayValue.values.some(n=>Qs(this.value.arrayValue,n))}};var Dm=class{constructor(t,i=null,n=[],r=[],o=null,s=null,a=null){this.path=t,this.collectionGroup=i,this.orderBy=n,this.filters=r,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}};function Rm(e,t=null,i=[],n=[],r=null,o=null,s=null){return new Dm(e,t,i,n,r,o,s)}function Xn(e){let t=D(e);if(t.ce===null){let i=t.path.canonicalString();t.collectionGroup!==null&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map(n=>Im(n)).join(","),i+="|ob:",i+=t.orderBy.map(n=>function(o){return o.field.canonicalString()+o.dir}(n)).join(","),ha(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(n=>ro(n)).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(n=>ro(n)).join(",")),t.ce=i}return t.ce}function ma(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<e.orderBy.length;i++)if(!HC(e.orderBy[i],t.orderBy[i]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if(!wy(e.filters[i],t.filters[i]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!b0(e.startAt,t.startAt)&&b0(e.endAt,t.endAt)}function Cl(e){return T.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}function Tl(e,t){return e.filters.filter(i=>i instanceof tt&&i.field.isEqual(t))}function _0(e,t,i){let n=ml,r=!0;for(let o of Tl(e,t)){let s=ml,a=!0;switch(o.op){case"<":case"<=":s=QC(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=ml}p0({value:n,inclusive:r},{value:s,inclusive:a})<0&&(n=s,r=a)}if(i!==null){for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){let s=i.position[o];p0({value:n,inclusive:r},{value:s,inclusive:i.inclusive})<0&&(n=s,r=i.inclusive);break}}return{value:n,inclusive:r}}function v0(e,t,i){let n=Ji,r=!0;for(let o of Tl(e,t)){let s=Ji,a=!0;switch(o.op){case">=":case">":s=WC(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Ji}f0({value:n,inclusive:r},{value:s,inclusive:a})>0&&(n=s,r=a)}if(i!==null){for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){let s=i.position[o];f0({value:n,inclusive:r},{value:s,inclusive:i.inclusive})>0&&(n=s,r=i.inclusive);break}}return{value:n,inclusive:r}}var qe=class{constructor(t,i=null,n=[],r=[],o=null,s="F",a=null,c=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=n,this.filters=r,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function Ay(e,t,i,n,r,o,s,a){return new qe(e,t,i,n,r,o,s,a)}function yo(e){return new qe(e)}function y0(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function df(e){return e.collectionGroup!==null}function to(e){let t=D(e);if(t.le===null){t.le=[];let i=new Set;for(let o of t.explicitOrderBy)t.le.push(o),i.add(o.field.canonicalString());let n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new pt(Rt.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(o=>{i.has(o.canonicalString())||o.isKeyField()||t.le.push(new Yn(o,n))}),i.has(Rt.keyField().canonicalString())||t.le.push(new Yn(Rt.keyField(),n))}return t.le}function de(e){let t=D(e);return t.he||(t.he=YC(t,to(e))),t.he}function YC(e,t){if(e.limitType==="F")return Rm(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new Yn(r.field,o)});let i=e.endAt?new hi(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new hi(e.startAt.position,e.startAt.inclusive):null;return Rm(e.path,e.collectionGroup,t,e.filters,e.limit,i,n)}}function Mm(e,t){let i=e.filters.concat([t]);return new qe(e.path,e.collectionGroup,e.explicitOrderBy.slice(),i,e.limit,e.limitType,e.startAt,e.endAt)}function Sl(e,t,i){return new qe(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,i,e.startAt,e.endAt)}function pa(e,t){return ma(de(e),de(t))&&e.limitType===t.limitType}function ky(e){return`${Xn(de(e))}|lt:${e.limitType}`}function Wr(e){return`Query(target=${function(i){let n=i.path.canonicalString();return i.collectionGroup!==null&&(n+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(n+=`, filters: [${i.filters.map(r=>Iy(r)).join(", ")}]`),ha(i.limit)||(n+=", limit: "+i.limit),i.orderBy.length>0&&(n+=`, orderBy: [${i.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),i.startAt&&(n+=", startAt: ",n+=i.startAt.inclusive?"b:":"a:",n+=i.startAt.position.map(r=>ro(r)).join(",")),i.endAt&&(n+=", endAt: ",n+=i.endAt.inclusive?"a:":"b:",n+=i.endAt.position.map(r=>ro(r)).join(",")),`Target(${n})`}(de(e))}; limitType=${e.limitType})`}function fa(e,t){return t.isFoundDocument()&&function(n,r){let o=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):T.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)}(e,t)&&function(n,r){for(let o of to(n))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(e,t)&&function(n,r){for(let o of n.filters)if(!o.matches(r))return!1;return!0}(e,t)&&function(n,r){return!(n.startAt&&!function(s,a,c){let l=g0(s,a,c);return s.inclusive?l<=0:l<0}(n.startAt,to(n),r)||n.endAt&&!function(s,a,c){let l=g0(s,a,c);return s.inclusive?l>=0:l>0}(n.endAt,to(n),r))}(e,t)}function Cy(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ty(e){return(t,i)=>{let n=!1;for(let r of to(e)){let o=XC(r,t,i);if(o!==0)return o;n=n||r.field.isKeyField()}return 0}}function XC(e,t,i){let n=e.field.isKeyField()?T.comparator(t.key,i.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?sn(c,l):P()}(e.field,t,i);switch(e.dir){case"asc":return n;case"desc":return-1*n;default:return P()}}var mi=class{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){let i=this.mapKeyFn(t),n=this.inner[i];if(n!==void 0){for(let[r,o]of n)if(this.equalsFn(r,t))return o}}has(t){return this.get(t)!==void 0}set(t,i){let n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return this.inner[n]=[[t,i]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return void(r[o]=[t,i]);r.push([t,i]),this.innerSize++}delete(t){let i=this.mapKeyFn(t),n=this.inner[i];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return n.length===1?delete this.inner[i]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(t){or(this.inner,(i,n)=>{for(let[r,o]of n)t(r,o)})}isEmpty(){return gy(this.inner)}size(){return this.innerSize}};var ZC=new yt(T.comparator);function be(){return ZC}var Sy=new yt(T.comparator);function Os(...e){let t=Sy;for(let i of e)t=t.insert(i.key,i);return t}function Dy(e){let t=Sy;return e.forEach((i,n)=>t=t.insert(i,n.overlayedDocument)),t}function ai(){return Bs()}function Ry(){return Bs()}function Bs(){return new mi(e=>e.toString(),(e,t)=>e.isEqual(t))}var JC=new yt(T.comparator),tT=new pt(T.comparator);function Y(...e){let t=tT;for(let i of e)t=t.add(i);return t}var eT=new pt(W);function uf(){return eT}function My(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gs(t)?"-0":t}}function Py(e){return{integerValue:""+e}}function Ny(e,t){return uy(t)?Py(t):My(e,t)}var so=class{constructor(){this._=void 0}};function iT(e,t,i){return e instanceof an?function(r,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&pd(o)&&(o=cf(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(i,t):e instanceof ki?Oy(e,t):e instanceof Ci?Vy(e,t):function(r,o){let s=Fy(r,o),a=w0(s)+w0(r.Ie);return wm(s)&&wm(r.Ie)?Py(a):My(r.serializer,a)}(e,t)}function nT(e,t,i){return e instanceof ki?Oy(e,t):e instanceof Ci?Vy(e,t):i}function Fy(e,t){return e instanceof cn?function(n){return wm(n)||function(o){return!!o&&"doubleValue"in o}(n)}(t)?t:{integerValue:0}:null}var an=class extends so{},ki=class extends so{constructor(t){super(),this.elements=t}};function Oy(e,t){let i=Ly(t);for(let n of e.elements)i.some(r=>ui(r,n))||i.push(n);return{arrayValue:{values:i}}}var Ci=class extends so{constructor(t){super(),this.elements=t}};function Vy(e,t){let i=Ly(t);for(let n of e.elements)i=i.filter(r=>!ui(r,n));return{arrayValue:{values:i}}}var cn=class extends so{constructor(t,i){super(),this.serializer=t,this.Ie=i}};function w0(e){return Tt(e.integerValue||e.doubleValue)}function Ly(e){return Ws(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Zn=class{constructor(t,i){this.field=t,this.transform=i}};function rT(e,t){return e.field.isEqual(t.field)&&function(n,r){return n instanceof ki&&r instanceof ki||n instanceof Ci&&r instanceof Ci?io(n.elements,r.elements,ui):n instanceof cn&&r instanceof cn?ui(n.Ie,r.Ie):n instanceof an&&r instanceof an}(e.transform,t.transform)}var Pm=class{constructor(t,i){this.version=t,this.transformResults=i}},St=class e{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new e}static exists(t){return new e(void 0,t)}static updateTime(t){return new e(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function fl(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}var ao=class{};function By(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new dn(e.key,St.none()):new ln(e.key,e.data,St.none());{let i=e.data,n=re.empty(),r=new pt(Rt.comparator);for(let o of t.fields)if(!r.has(o)){let s=i.field(o);s===null&&o.length>1&&(o=o.popLast(),s=i.field(o)),s===null?n.delete(o):n.set(o,s),r=r.add(o)}return new Ge(e.key,n,new ke(r.toArray()),St.none())}}function oT(e,t,i){e instanceof ln?function(r,o,s){let a=r.value.clone(),c=I0(r.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(e,t,i):e instanceof Ge?function(r,o,s){if(!fl(r.precondition,o))return void o.convertToUnknownDocument(s.version);let a=I0(r.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(jy(r)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(e,t,i):function(r,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,t,i)}function js(e,t,i,n){return e instanceof ln?function(o,s,a,c){if(!fl(o.precondition,s))return a;let l=o.value.clone(),d=E0(o.fieldTransforms,c,s);return l.setAll(d),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(e,t,i,n):e instanceof Ge?function(o,s,a,c){if(!fl(o.precondition,s))return a;let l=E0(o.fieldTransforms,c,s),d=s.data;return d.setAll(jy(o)),d.setAll(l),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(u=>u.field))}(e,t,i,n):function(o,s,a){return fl(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(e,t,i)}function sT(e,t){let i=null;for(let n of e.fieldTransforms){let r=t.data.field(n.field),o=Fy(n.transform,r||null);o!=null&&(i===null&&(i=re.empty()),i.set(n.field,o))}return i||null}function x0(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&io(n,r,(o,s)=>rT(o,s))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var ln=class extends ao{constructor(t,i,n,r=[]){super(),this.key=t,this.value=i,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Ge=class extends ao{constructor(t,i,n,r,o=[]){super(),this.key=t,this.data=i,this.fieldMask=n,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function jy(e){let t=new Map;return e.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){let n=e.data.field(i);t.set(i,n)}}),t}function I0(e,t,i){let n=new Map;L(e.length===i.length);for(let r=0;r<i.length;r++){let o=e[r],s=o.transform,a=t.data.field(o.field);n.set(o.field,nT(s,a,i[r]))}return n}function E0(e,t,i){let n=new Map;for(let r of e){let o=r.transform,s=i.data.field(r.field);n.set(r.field,iT(o,s,t))}return n}var dn=class extends ao{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Hs=class extends ao{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Ys=class{constructor(t,i,n,r){this.batchId=t,this.localWriteTime=i,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,i){let n=i.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(t.key)&&oT(o,t,n[r])}}applyToLocalView(t,i){for(let n of this.baseMutations)n.key.isEqual(t.key)&&(i=js(n,t,i,this.localWriteTime));for(let n of this.mutations)n.key.isEqual(t.key)&&(i=js(n,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){let n=Ry();return this.mutations.forEach(r=>{let o=t.get(r.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=i.has(r.key)?null:a;let c=By(s,a);c!==null&&n.set(r.key,c),s.isValidDocument()||s.convertToNoDocument(U.min())}),n}keys(){return this.mutations.reduce((t,i)=>t.add(i.key),Y())}isEqual(t){return this.batchId===t.batchId&&io(this.mutations,t.mutations,(i,n)=>x0(i,n))&&io(this.baseMutations,t.baseMutations,(i,n)=>x0(i,n))}},Nm=class e{constructor(t,i,n,r){this.batch=t,this.commitVersion=i,this.mutationResults=n,this.docVersions=r}static from(t,i,n){L(t.mutations.length===n.length);let r=function(){return JC}(),o=t.mutations;for(let s=0;s<o.length;s++)r=r.insert(o[s].key,n[s].version);return new e(t,i,n,r)}};var Xs=class{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Fm=class{constructor(t,i){this.count=t,this.unchangedNames=i}};var Nt,it;function Uy(e){switch(e){default:return P();case f.CANCELLED:case f.UNKNOWN:case f.DEADLINE_EXCEEDED:case f.RESOURCE_EXHAUSTED:case f.INTERNAL:case f.UNAVAILABLE:case f.UNAUTHENTICATED:return!1;case f.INVALID_ARGUMENT:case f.NOT_FOUND:case f.ALREADY_EXISTS:case f.PERMISSION_DENIED:case f.FAILED_PRECONDITION:case f.ABORTED:case f.OUT_OF_RANGE:case f.UNIMPLEMENTED:case f.DATA_LOSS:return!0}}function zy(e){if(e===void 0)return Dt("GRPC error has no .code"),f.UNKNOWN;switch(e){case Nt.OK:return f.OK;case Nt.CANCELLED:return f.CANCELLED;case Nt.UNKNOWN:return f.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return f.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return f.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return f.INTERNAL;case Nt.UNAVAILABLE:return f.UNAVAILABLE;case Nt.UNAUTHENTICATED:return f.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return f.INVALID_ARGUMENT;case Nt.NOT_FOUND:return f.NOT_FOUND;case Nt.ALREADY_EXISTS:return f.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return f.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return f.FAILED_PRECONDITION;case Nt.ABORTED:return f.ABORTED;case Nt.OUT_OF_RANGE:return f.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return f.UNIMPLEMENTED;case Nt.DATA_LOSS:return f.DATA_LOSS;default:return P()}}(it=Nt||(Nt={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";var A0=null;function qy(){return new TextEncoder}var aT=new Bn([4294967295,4294967295],0);function k0(e){let t=qy().encode(e),i=new o0;return i.update(t),new Uint8Array(i.digest())}function C0(e){let t=new DataView(e.buffer),i=t.getUint32(0,!0),n=t.getUint32(4,!0),r=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Bn([i,n],0),new Bn([r,o],0)]}var Om=class e{constructor(t,i,n){if(this.bitmap=t,this.padding=i,this.hashCount=n,i<0||i>=8)throw new Kn(`Invalid padding: ${i}`);if(n<0)throw new Kn(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new Kn(`Invalid hash count: ${n}`);if(t.length===0&&i!==0)throw new Kn(`Invalid padding when bitmap length is 0: ${i}`);this.Te=8*t.length-i,this.Ee=Bn.fromNumber(this.Te)}de(t,i,n){let r=t.add(i.multiply(Bn.fromNumber(n)));return r.compare(aT)===1&&(r=new Bn([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;let i=k0(t),[n,r]=C0(i);for(let o=0;o<this.hashCount;o++){let s=this.de(n,r,o);if(!this.Ae(s))return!1}return!0}static create(t,i,n){let r=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),s=new e(o,r,i);return n.forEach(a=>s.insert(a)),s}insert(t){if(this.Te===0)return;let i=k0(t),[n,r]=C0(i);for(let o=0;o<this.hashCount;o++){let s=this.de(n,r,o);this.Re(s)}}Re(t){let i=Math.floor(t/8),n=t%8;this.bitmap[i]|=1<<n}},Kn=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Zs=class e{constructor(t,i,n,r,o){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,i,n){let r=new Map;return r.set(t,Js.createSynthesizedTargetChangeForCurrentChange(t,i,n)),new e(U.min(),r,new yt(W),be(),Y())}},Js=class e{constructor(t,i,n,r,o){this.resumeToken=t,this.current=i,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,i,n){return new e(n,i,Y(),Y(),Y())}};var eo=class{constructor(t,i,n,r){this.Ve=t,this.removedTargetIds=i,this.key=n,this.me=r}},Dl=class{constructor(t,i){this.targetId=t,this.fe=i}},Rl=class{constructor(t,i,n=Gt.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=i,this.resumeToken=n,this.cause=r}},Ml=class{constructor(){this.ge=0,this.pe=S0(),this.ye=Gt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=Y(),i=Y(),n=Y();return this.pe.forEach((r,o)=>{switch(o){case 0:t=t.add(r);break;case 2:i=i.add(r);break;case 1:n=n.add(r);break;default:P()}}),new Js(this.ye,this.we,t,i,n)}Fe(){this.Se=!1,this.pe=S0()}Me(t,i){this.Se=!0,this.pe=this.pe.insert(t,i)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,L(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},Vm=class{constructor(t){this.Le=t,this.ke=new Map,this.qe=be(),this.Qe=T0(),this.Ke=new yt(W)}$e(t){for(let i of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(i,t.me):this.We(i,t.key,t.me);for(let i of t.removedTargetIds)this.We(i,t.key,t.me)}Ge(t){this.forEachTarget(t,i=>{let n=this.ze(i);switch(t.state){case 0:this.je(i)&&n.Ce(t.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(t.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(i);break;case 3:this.je(i)&&(n.Be(),n.Ce(t.resumeToken));break;case 4:this.je(i)&&(this.He(i),n.Ce(t.resumeToken));break;default:P()}})}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.ke.forEach((n,r)=>{this.je(r)&&i(r)})}Je(t){let i=t.targetId,n=t.fe.count,r=this.Ye(i);if(r){let o=r.target;if(Cl(o))if(n===0){let s=new T(o.path);this.We(i,s,Lt.newNoDocument(s,U.min()))}else L(n===1);else{let s=this.Ze(i);if(s!==n){let a=this.Xe(t),c=a?this.et(a,t,s):1;if(c!==0){this.He(i);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(i,l)}A0?.tt(function(d,u,h,m,E){var w,b,A,q,N,z;let H={localCacheCount:d,existenceFilterCount:u.count,databaseId:h.database,projectId:h.projectId},et=u.unchangedNames;return et&&(H.bloomFilter={applied:E===0,hashCount:(w=et?.hashCount)!==null&&w!==void 0?w:0,bitmapLength:(q=(A=(b=et?.bits)===null||b===void 0?void 0:b.bitmap)===null||A===void 0?void 0:A.length)!==null&&q!==void 0?q:0,padding:(z=(N=et?.bits)===null||N===void 0?void 0:N.padding)!==null&&z!==void 0?z:0,mightContain:At=>{var We;return(We=m?.mightContain(At))!==null&&We!==void 0&&We}}),H}(s,t.fe,this.Le.nt(),a,c))}}}}Xe(t){let i=t.fe.unchangedNames;if(!i||!i.bits)return null;let{bits:{bitmap:n="",padding:r=0},hashCount:o=0}=i,s,a;try{s=rn(n).toUint8Array()}catch(c){if(c instanceof El)return Re("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Om(s,r,o)}catch(c){return Re(c instanceof Kn?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(t,i,n){return i.fe.count===n-this.rt(t,i.targetId)?0:2}rt(t,i){let n=this.Le.getRemoteKeysForTarget(i),r=0;return n.forEach(o=>{let s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;t.mightContain(a)||(this.We(i,o,null),r++)}),r}it(t){let i=new Map;this.ke.forEach((o,s)=>{let a=this.Ye(s);if(a){if(o.current&&Cl(a.target)){let c=new T(a.target.path);this.qe.get(c)!==null||this.st(s,c)||this.We(s,c,Lt.newNoDocument(c,t))}o.De&&(i.set(s,o.ve()),o.Fe())}});let n=Y();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Ye(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(n=n.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(t));let r=new Zs(t,i,this.Ke,this.qe,n);return this.qe=be(),this.Qe=T0(),this.Ke=new yt(W),r}Ue(t,i){if(!this.je(t))return;let n=this.st(t,i.key)?2:0;this.ze(t).Me(i.key,n),this.qe=this.qe.insert(i.key,i),this.Qe=this.Qe.insert(i.key,this.ot(i.key).add(t))}We(t,i,n){if(!this.je(t))return;let r=this.ze(t);this.st(t,i)?r.Me(i,1):r.xe(i),this.Qe=this.Qe.insert(i,this.ot(i).delete(t)),n&&(this.qe=this.qe.insert(i,n))}removeTarget(t){this.ke.delete(t)}Ze(t){let i=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let i=this.ke.get(t);return i||(i=new Ml,this.ke.set(t,i)),i}ot(t){let i=this.Qe.get(t);return i||(i=new pt(W),this.Qe=this.Qe.insert(t,i)),i}je(t){let i=this.Ye(t)!==null;return i||x("WatchChangeAggregator","Detected inactive target",t),i}Ye(t){let i=this.ke.get(t);return i&&i.be?null:this.Le._t(t)}He(t){this.ke.set(t,new Ml),this.Le.getRemoteKeysForTarget(t).forEach(i=>{this.We(t,i,null)})}st(t,i){return this.Le.getRemoteKeysForTarget(t).has(i)}};function T0(){return new yt(T.comparator)}function S0(){return new yt(T.comparator)}var cT={asc:"ASCENDING",desc:"DESCENDING"},lT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dT={and:"AND",or:"OR"},Lm=class{constructor(t,i){this.databaseId=t,this.useProto3Json=i}};function Bm(e,t){return e.useProto3Json||ha(t)?t:{value:t}}function co(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Gy(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function uT(e,t){return co(e,t.toTimestamp())}function Mt(e){return L(!!e),U.fromTimestamp(function(i){let n=nn(i);return new Et(n.seconds,n.nanos)}(e))}function hf(e,t){return jm(e,t).canonicalString()}function jm(e,t){let i=function(r){return new nt(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?i:i.child(t)}function $y(e){let t=nt.fromString(e);return L(ew(t)),t}function ta(e,t){return hf(e.databaseId,t.path)}function li(e,t){let i=$y(t);if(i.get(1)!==e.databaseId.projectId)throw new v(f.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+e.databaseId.projectId);if(i.get(3)!==e.databaseId.database)throw new v(f.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+e.databaseId.database);return new T(Wy(i))}function Ky(e,t){return hf(e.databaseId,t)}function Qy(e){let t=$y(e);return t.length===4?nt.emptyPath():Wy(t)}function Um(e){return new nt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Wy(e){return L(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function D0(e,t,i){return{name:ta(e,t),fields:i.value.mapValue.fields}}function Hy(e,t,i){let n=li(e,t.name),r=Mt(t.updateTime),o=t.createTime?Mt(t.createTime):U.min(),s=new re({mapValue:{fields:t.fields}}),a=Lt.newFoundDocument(n,r,o,s);return i&&a.setHasCommittedMutations(),i?a.setHasCommittedMutations():a}function hT(e,t){return"found"in t?function(n,r){L(!!r.found),r.found.name,r.found.updateTime;let o=li(n,r.found.name),s=Mt(r.found.updateTime),a=r.found.createTime?Mt(r.found.createTime):U.min(),c=new re({mapValue:{fields:r.found.fields}});return Lt.newFoundDocument(o,s,a,c)}(e,t):"missing"in t?function(n,r){L(!!r.missing),L(!!r.readTime);let o=li(n,r.missing),s=Mt(r.readTime);return Lt.newNoDocument(o,s)}(e,t):P()}function mT(e,t){let i;if("targetChange"in t){t.targetChange;let n=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:P()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],o=function(l,d){return l.useProto3Json?(L(d===void 0||typeof d=="string"),Gt.fromBase64String(d||"")):(L(d===void 0||d instanceof Uint8Array),Gt.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(l){let d=l.code===void 0?f.UNKNOWN:zy(l.code);return new v(d,l.message||"")}(s);i=new Rl(n,r,o,a||null)}else if("documentChange"in t){t.documentChange;let n=t.documentChange;n.document,n.document.name,n.document.updateTime;let r=li(e,n.document.name),o=Mt(n.document.updateTime),s=n.document.createTime?Mt(n.document.createTime):U.min(),a=new re({mapValue:{fields:n.document.fields}}),c=Lt.newFoundDocument(r,o,s,a),l=n.targetIds||[],d=n.removedTargetIds||[];i=new eo(l,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;let n=t.documentDelete;n.document;let r=li(e,n.document),o=n.readTime?Mt(n.readTime):U.min(),s=Lt.newNoDocument(r,o),a=n.removedTargetIds||[];i=new eo([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;let n=t.documentRemove;n.document;let r=li(e,n.document),o=n.removedTargetIds||[];i=new eo([],o,r,null)}else{if(!("filter"in t))return P();{t.filter;let n=t.filter;n.targetId;let{count:r=0,unchangedNames:o}=n,s=new Fm(r,o),a=n.targetId;i=new Dl(a,s)}}return i}function ea(e,t){let i;if(t instanceof ln)i={update:D0(e,t.key,t.value)};else if(t instanceof dn)i={delete:ta(e,t.key)};else if(t instanceof Ge)i={update:D0(e,t.key,t.data),updateMask:vT(t.fieldMask)};else{if(!(t instanceof Hs))return P();i={verify:ta(e,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map(n=>function(o,s){let a=s.transform;if(a instanceof an)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ki)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ci)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof cn)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw P()}(0,n))),t.precondition.isNone||(i.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:uT(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:P()}(e,t.precondition)),i}function zm(e,t){let i=t.currentDocument?function(o){return o.updateTime!==void 0?St.updateTime(Mt(o.updateTime)):o.exists!==void 0?St.exists(o.exists):St.none()}(t.currentDocument):St.none(),n=t.updateTransforms?t.updateTransforms.map(r=>function(s,a){let c=null;if("setToServerValue"in a)L(a.setToServerValue==="REQUEST_TIME"),c=new an;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];c=new ki(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];c=new Ci(d)}else"increment"in a?c=new cn(s,a.increment):P();let l=Rt.fromServerFormat(a.fieldPath);return new Zn(l,c)}(e,r)):[];if(t.update){t.update.name;let r=li(e,t.update.name),o=new re({mapValue:{fields:t.update.fields}});if(t.updateMask){let s=function(c){let l=c.fieldPaths||[];return new ke(l.map(d=>Rt.fromServerFormat(d)))}(t.updateMask);return new Ge(r,o,s,i,n)}return new ln(r,o,i,n)}if(t.delete){let r=li(e,t.delete);return new dn(r,i)}if(t.verify){let r=li(e,t.verify);return new Hs(r,i)}return P()}function pT(e,t){return e&&e.length>0?(L(t!==void 0),e.map(i=>function(r,o){let s=r.updateTime?Mt(r.updateTime):Mt(o);return s.isEqual(U.min())&&(s=Mt(o)),new Pm(s,r.transformResults||[])}(i,t))):[]}function Yy(e,t){return{documents:[Ky(e,t.path)]}}function Xy(e,t){let i={structuredQuery:{}},n=t.path,r;t.collectionGroup!==null?(r=n,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=n.popLast(),i.structuredQuery.from=[{collectionId:n.lastSegment()}]),i.parent=Ky(e,r);let o=function(l){if(l.length!==0)return tw(dt.create(l,"and"))}(t.filters);o&&(i.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(d=>function(h){return{field:Hr(h.field),direction:gT(h.dir)}}(d))}(t.orderBy);s&&(i.structuredQuery.orderBy=s);let a=Bm(e,t.limit);return a!==null&&(i.structuredQuery.limit=a),t.startAt&&(i.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(i.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{ut:i,parent:r}}function Zy(e){let t=Qy(e.parent),i=e.structuredQuery,n=i.from?i.from.length:0,r=null;if(n>0){L(n===1);let d=i.from[0];d.allDescendants?r=d.collectionId:t=t.child(d.collectionId)}let o=[];i.where&&(o=function(u){let h=Jy(u);return h instanceof dt&&lf(h)?h.getFilters():[h]}(i.where));let s=[];i.orderBy&&(s=function(u){return u.map(h=>function(E){return new Yn(Yr(E.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(h))}(i.orderBy));let a=null;i.limit&&(a=function(u){let h;return h=typeof u=="object"?u.value:u,ha(h)?null:h}(i.limit));let c=null;i.startAt&&(c=function(u){let h=!!u.before,m=u.values||[];return new hi(m,h)}(i.startAt));let l=null;return i.endAt&&(l=function(u){let h=!u.before,m=u.values||[];return new hi(m,h)}(i.endAt)),Ay(t,r,s,o,a,"F",c,l)}function fT(e,t){let i=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return P()}}(t.purpose);return i==null?null:{"goog-listen-tags":i}}function Jy(e){return e.unaryFilter!==void 0?function(i){switch(i.unaryFilter.op){case"IS_NAN":let n=Yr(i.unaryFilter.field);return tt.create(n,"==",{doubleValue:NaN});case"IS_NULL":let r=Yr(i.unaryFilter.field);return tt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Yr(i.unaryFilter.field);return tt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Yr(i.unaryFilter.field);return tt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return P()}}(e):e.fieldFilter!==void 0?function(i){return tt.create(Yr(i.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return P()}}(i.fieldFilter.op),i.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(i){return dt.create(i.compositeFilter.filters.map(n=>Jy(n)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return P()}}(i.compositeFilter.op))}(e):P()}function gT(e){return cT[e]}function bT(e){return lT[e]}function _T(e){return dT[e]}function Hr(e){return{fieldPath:e.canonicalString()}}function Yr(e){return Rt.fromServerFormat(e.fieldPath)}function tw(e){return e instanceof tt?function(i){if(i.op==="=="){if(m0(i.value))return{unaryFilter:{field:Hr(i.field),op:"IS_NAN"}};if(h0(i.value))return{unaryFilter:{field:Hr(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(m0(i.value))return{unaryFilter:{field:Hr(i.field),op:"IS_NOT_NAN"}};if(h0(i.value))return{unaryFilter:{field:Hr(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hr(i.field),op:bT(i.op),value:i.value}}}(e):e instanceof dt?function(i){let n=i.getFilters().map(r=>tw(r));return n.length===1?n[0]:{compositeFilter:{op:_T(i.op),filters:n}}}(e):P()}function vT(e){let t=[];return e.fields.forEach(i=>t.push(i.canonicalString())),{fieldPaths:t}}function ew(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}var lo=class e{constructor(t,i,n,r,o=U.min(),s=U.min(),a=Gt.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=i,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var Pl=class{constructor(t){this.ct=t}};function yT(e,t){let i;if(t.document)i=Hy(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){let n=T.fromSegments(t.noDocument.path),r=tr(t.noDocument.readTime);i=Lt.newNoDocument(n,r),t.hasCommittedMutations&&i.setHasCommittedMutations()}else{if(!t.unknownDocument)return P();{let n=T.fromSegments(t.unknownDocument.path),r=tr(t.unknownDocument.version);i=Lt.newUnknownDocument(n,r)}}return t.readTime&&i.setReadTime(function(r){let o=new Et(r[0],r[1]);return U.fromTimestamp(o)}(t.readTime)),i}function R0(e,t){let i=t.key,n={prefixPath:i.getCollectionPath().popLast().toArray(),collectionGroup:i.collectionGroup,documentId:i.path.lastSegment(),readTime:Nl(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())n.document=function(o,s){return{name:ta(o,s.key),fields:s.data.value.mapValue.fields,updateTime:co(o,s.version.toTimestamp()),createTime:co(o,s.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())n.noDocument={path:i.path.toArray(),readTime:Jn(t.version)};else{if(!t.isUnknownDocument())return P();n.unknownDocument={path:i.path.toArray(),version:Jn(t.version)}}return n}function Nl(e){let t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Jn(e){let t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function tr(e){let t=new Et(e.seconds,e.nanoseconds);return U.fromTimestamp(t)}function qn(e,t){let i=(t.baseMutations||[]).map(o=>zm(e.ct,o));for(let o=0;o<t.mutations.length-1;++o){let s=t.mutations[o];if(o+1<t.mutations.length&&t.mutations[o+1].transform!==void 0){let a=t.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}let n=t.mutations.map(o=>zm(e.ct,o)),r=Et.fromMillis(t.localWriteTimeMs);return new Ys(t.batchId,r,i,n)}function Vs(e){let t=tr(e.readTime),i=e.lastLimboFreeSnapshotVersion!==void 0?tr(e.lastLimboFreeSnapshotVersion):U.min(),n;return n=function(o){return o.documents!==void 0}(e.query)?function(o){return L(o.documents.length===1),de(yo(Qy(o.documents[0])))}(e.query):function(o){return de(Zy(o))}(e.query),new lo(n,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,i,Gt.fromBase64String(e.resumeToken))}function iw(e,t){let i=Jn(t.snapshotVersion),n=Jn(t.lastLimboFreeSnapshotVersion),r;r=Cl(t.target)?Yy(e.ct,t.target):Xy(e.ct,t.target).ut;let o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Xn(t.target),readTime:i,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:r}}function mf(e){let t=Zy({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Sl(t,t.limit,"L"):t}function nm(e,t){return new Xs(t.largestBatchId,zm(e.ct,t.overlayMutation))}function M0(e,t){let i=t.path.lastSegment();return[e,le(t.path.popLast()),i]}function P0(e,t,i,n){return{indexId:e,uid:t,sequenceNumber:i,readTime:Jn(n.readTime),documentKey:le(n.documentKey.path),largestBatchId:n.largestBatchId}}var qm=class{getBundleMetadata(t,i){return N0(t).get(i).next(n=>{if(n)return function(o){return{id:o.bundleId,createTime:tr(o.createTime),version:o.version}}(n)})}saveBundleMetadata(t,i){return N0(t).put(function(r){return{bundleId:r.id,createTime:Jn(Mt(r.createTime)),version:r.version}}(i))}getNamedQuery(t,i){return F0(t).get(i).next(n=>{if(n)return function(o){return{name:o.name,query:mf(o.bundledQuery),readTime:tr(o.readTime)}}(n)})}saveNamedQuery(t,i){return F0(t).put(function(r){return{name:r.name,readTime:Jn(Mt(r.readTime)),bundledQuery:r.bundledQuery}}(i))}};function N0(e){return $t(e,"bundles")}function F0(e){return $t(e,"namedQueries")}var Fl=class e{constructor(t,i){this.serializer=t,this.userId=i}static lt(t,i){let n=i.uid||"";return new e(t,n)}getOverlay(t,i){return Ms(t).get(M0(this.userId,i)).next(n=>n?nm(this.serializer,n):null)}getOverlays(t,i){let n=ai();return p.forEach(i,r=>this.getOverlay(t,r).next(o=>{o!==null&&n.set(r,o)})).next(()=>n)}saveOverlays(t,i,n){let r=[];return n.forEach((o,s)=>{let a=new Xs(i,s);r.push(this.ht(t,a))}),p.waitFor(r)}removeOverlaysForBatchId(t,i,n){let r=new Set;i.forEach(s=>r.add(le(s.getCollectionPath())));let o=[];return r.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,n+1],!1,!0);o.push(Ms(t).H("collectionPathOverlayIndex",a))}),p.waitFor(o)}getOverlaysForCollection(t,i,n){let r=ai(),o=le(i),s=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Ms(t).W("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let l=nm(this.serializer,c);r.set(l.getKey(),l)}return r})}getOverlaysForCollectionGroup(t,i,n,r){let o=ai(),s,a=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Ms(t).Y({index:"collectionGroupOverlayIndex",range:a},(c,l,d)=>{let u=nm(this.serializer,l);o.size()<r||u.largestBatchId===s?(o.set(u.getKey(),u),s=u.largestBatchId):d.done()}).next(()=>o)}ht(t,i){return Ms(t).put(function(r,o,s){let[a,c,l]=M0(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:ea(r.ct,s.mutation)}}(this.serializer,this.userId,i))}};function Ms(e){return $t(e,"documentOverlays")}var Ii=class{constructor(){}Pt(t,i){this.It(t,i),i.Tt()}It(t,i){if("nullValue"in t)this.Et(i,5);else if("booleanValue"in t)this.Et(i,10),i.dt(t.booleanValue?1:0);else if("integerValue"in t)this.Et(i,15),i.dt(Tt(t.integerValue));else if("doubleValue"in t){let n=Tt(t.doubleValue);isNaN(n)?this.Et(i,13):(this.Et(i,15),Gs(n)?i.dt(0):i.dt(n))}else if("timestampValue"in t){let n=t.timestampValue;this.Et(i,20),typeof n=="string"?i.At(n):(i.At(`${n.seconds||""}`),i.dt(n.nanos||0))}else if("stringValue"in t)this.Rt(t.stringValue,i),this.Vt(i);else if("bytesValue"in t)this.Et(i,30),i.ft(rn(t.bytesValue)),this.Vt(i);else if("referenceValue"in t)this.gt(t.referenceValue,i);else if("geoPointValue"in t){let n=t.geoPointValue;this.Et(i,45),i.dt(n.latitude||0),i.dt(n.longitude||0)}else"mapValue"in t?_y(t)?this.Et(i,Number.MAX_SAFE_INTEGER):(this.yt(t.mapValue,i),this.Vt(i)):"arrayValue"in t?(this.wt(t.arrayValue,i),this.Vt(i)):P()}Rt(t,i){this.Et(i,25),this.St(t,i)}St(t,i){i.At(t)}yt(t,i){let n=t.fields||{};this.Et(i,55);for(let r of Object.keys(n))this.Rt(r,i),this.It(n[r],i)}wt(t,i){let n=t.values||[];this.Et(i,50);for(let r of n)this.It(r,i)}gt(t,i){this.Et(i,37),T.fromName(t).path.forEach(n=>{this.Et(i,60),this.St(n,i)})}Et(t,i){t.dt(i)}Vt(t){t.dt(2)}};Ii.bt=new Ii;function wT(e){if(e===0)return 8;let t=0;return!(e>>4)&&(t+=4,e<<=4),!(e>>6)&&(t+=2,e<<=2),!(e>>7)&&(t+=1),t}function O0(e){let t=64-function(n){let r=0;for(let o=0;o<8;++o){let s=wT(255&n[o]);if(r+=s,s!==8)break}return r}(e);return Math.ceil(t/8)}var Gm=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(t){let i=t[Symbol.iterator](),n=i.next();for(;!n.done;)this.Ct(n.value),n=i.next();this.vt()}Ft(t){let i=t[Symbol.iterator](),n=i.next();for(;!n.done;)this.Mt(n.value),n=i.next();this.xt()}Ot(t){for(let i of t){let n=i.charCodeAt(0);if(n<128)this.Ct(n);else if(n<2048)this.Ct(960|n>>>6),this.Ct(128|63&n);else if(i<"\uD800"||"\uDBFF"<i)this.Ct(480|n>>>12),this.Ct(128|63&n>>>6),this.Ct(128|63&n);else{let r=i.codePointAt(0);this.Ct(240|r>>>18),this.Ct(128|63&r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r)}}this.vt()}Nt(t){for(let i of t){let n=i.charCodeAt(0);if(n<128)this.Mt(n);else if(n<2048)this.Mt(960|n>>>6),this.Mt(128|63&n);else if(i<"\uD800"||"\uDBFF"<i)this.Mt(480|n>>>12),this.Mt(128|63&n>>>6),this.Mt(128|63&n);else{let r=i.codePointAt(0);this.Mt(240|r>>>18),this.Mt(128|63&r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r)}}this.xt()}Bt(t){let i=this.Lt(t),n=O0(i);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=i.length-n;r<i.length;++r)this.buffer[this.position++]=255&i[r]}qt(t){let i=this.Lt(t),n=O0(i);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=i.length-n;r<i.length;++r)this.buffer[this.position++]=~(255&i[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(t){this.kt(t.length),this.buffer.set(t,this.position),this.position+=t.length}Wt(){return this.buffer.slice(0,this.position)}Lt(t){let i=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(t),n=(128&i[0])!=0;i[0]^=n?255:128;for(let r=1;r<i.length;++r)i[r]^=n?255:0;return i}Ct(t){let i=255&t;i===0?(this.Kt(0),this.Kt(255)):i===255?(this.Kt(255),this.Kt(0)):this.Kt(i)}Mt(t){let i=255&t;i===0?(this.Ut(0),this.Ut(255)):i===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(t){this.kt(1),this.buffer[this.position++]=t}Ut(t){this.kt(1),this.buffer[this.position++]=~t}kt(t){let i=t+this.position;if(i<=this.buffer.length)return;let n=2*this.buffer.length;n<i&&(n=i);let r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}},$m=class{constructor(t){this.Gt=t}ft(t){this.Gt.Dt(t)}At(t){this.Gt.Ot(t)}dt(t){this.Gt.Bt(t)}Tt(){this.Gt.Qt()}},Km=class{constructor(t){this.Gt=t}ft(t){this.Gt.Ft(t)}At(t){this.Gt.Nt(t)}dt(t){this.Gt.qt(t)}Tt(){this.Gt.$t()}},Gn=class{constructor(){this.Gt=new Gm,this.zt=new $m(this.Gt),this.jt=new Km(this.Gt)}seed(t){this.Gt.seed(t)}Ht(t){return t===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var $n=class e{constructor(t,i,n,r){this.indexId=t,this.documentKey=i,this.arrayValue=n,this.directionalValue=r}Jt(){let t=this.directionalValue.length,i=t===0||this.directionalValue[t-1]===255?t+1:t,n=new Uint8Array(i);return n.set(this.directionalValue,0),i!==t?n.set([0],this.directionalValue.length):++n[n.length-1],new e(this.indexId,this.documentKey,this.arrayValue,n)}};function Hi(e,t){let i=e.indexId-t.indexId;return i!==0?i:(i=V0(e.arrayValue,t.arrayValue),i!==0?i:(i=V0(e.directionalValue,t.directionalValue),i!==0?i:T.comparator(e.documentKey,t.documentKey)))}function V0(e,t){for(let i=0;i<e.length&&i<t.length;++i){let n=e[i]-t[i];if(n!==0)return n}return e.length-t.length}var Ol=class{constructor(t){this.Yt=new pt((i,n)=>Rt.comparator(i.field,n.field)),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.Zt=t.orderBy,this.Xt=[];for(let i of t.filters){let n=i;n.isInequality()?this.Yt=this.Yt.add(n):this.Xt.push(n)}}get en(){return this.Yt.size>1}tn(t){if(L(t.collectionGroup===this.collectionId),this.en)return!1;let i=pm(t);if(i!==void 0&&!this.nn(i))return!1;let n=Un(t),r=new Set,o=0,s=0;for(;o<n.length&&this.nn(n[o]);++o)r=r.add(n[o].fieldPath.canonicalString());if(o===n.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!r.has(a.field.canonicalString())){let c=n[o];if(!this.rn(a,c)||!this.sn(this.Zt[s++],c))return!1}++o}for(;o<n.length;++o){let a=n[o];if(s>=this.Zt.length||!this.sn(this.Zt[s++],a))return!1}return!0}on(){if(this.en)return null;let t=new pt(Rt.comparator),i=[];for(let n of this.Xt)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")i.push(new Jr(n.field,2));else{if(t.has(n.field))continue;t=t.add(n.field),i.push(new Jr(n.field,0))}for(let n of this.Zt)n.field.isKeyField()||t.has(n.field)||(t=t.add(n.field),i.push(new Jr(n.field,n.dir==="asc"?0:1)));return new no(no.UNKNOWN_ID,this.collectionId,i,qs.empty())}nn(t){for(let i of this.Xt)if(this.rn(i,t))return!0;return!1}rn(t,i){if(t===void 0||!t.field.isEqual(i.fieldPath))return!1;let n=t.op==="array-contains"||t.op==="array-contains-any";return i.kind===2===n}sn(t,i){return!!t.field.isEqual(i.fieldPath)&&(i.kind===0&&t.dir==="asc"||i.kind===1&&t.dir==="desc")}};function nw(e){var t,i;if(L(e instanceof tt||e instanceof dt),e instanceof tt){if(e instanceof kl){let r=((i=(t=e.value.arrayValue)===null||t===void 0?void 0:t.values)===null||i===void 0?void 0:i.map(o=>tt.create(e.field,"==",o)))||[];return dt.create(r,"or")}return e}let n=e.filters.map(r=>nw(r));return dt.create(n,e.op)}function xT(e){if(e.getFilters().length===0)return[];let t=Hm(nw(e));return L(rw(t)),Qm(t)||Wm(t)?[t]:t.getFilters()}function Qm(e){return e instanceof tt}function Wm(e){return e instanceof dt&&lf(e)}function rw(e){return Qm(e)||Wm(e)||function(i){if(i instanceof dt&&xm(i)){for(let n of i.getFilters())if(!Qm(n)&&!Wm(n))return!1;return!0}return!1}(e)}function Hm(e){if(L(e instanceof tt||e instanceof dt),e instanceof tt)return e;if(e.filters.length===1)return Hm(e.filters[0]);let t=e.filters.map(n=>Hm(n)),i=dt.create(t,e.op);return i=Vl(i),rw(i)?i:(L(i instanceof dt),L(oo(i)),L(i.filters.length>1),i.filters.reduce((n,r)=>pf(n,r)))}function pf(e,t){let i;return L(e instanceof tt||e instanceof dt),L(t instanceof tt||t instanceof dt),i=e instanceof tt?t instanceof tt?function(r,o){return dt.create([r,o],"and")}(e,t):L0(e,t):t instanceof tt?L0(t,e):function(r,o){if(L(r.filters.length>0&&o.filters.length>0),oo(r)&&oo(o))return xy(r,o.getFilters());let s=xm(r)?r:o,a=xm(r)?o:r,c=s.filters.map(l=>pf(l,a));return dt.create(c,"or")}(e,t),Vl(i)}function L0(e,t){if(oo(t))return xy(t,e.getFilters());{let i=t.filters.map(n=>pf(e,n));return dt.create(i,"or")}}function Vl(e){if(L(e instanceof tt||e instanceof dt),e instanceof tt)return e;let t=e.getFilters();if(t.length===1)return Vl(t[0]);if(yy(e))return e;let i=t.map(r=>Vl(r)),n=[];return i.forEach(r=>{r instanceof tt?n.push(r):r instanceof dt&&(r.op===e.op?n.push(...r.filters):n.push(r))}),n.length===1?n[0]:dt.create(n,e.op)}var Ym=class{constructor(){this._n=new ia}addToCollectionParentIndex(t,i){return this._n.add(i),p.resolve()}getCollectionParents(t,i){return p.resolve(this._n.getEntries(i))}addFieldIndex(t,i){return p.resolve()}deleteFieldIndex(t,i){return p.resolve()}deleteAllFieldIndexes(t){return p.resolve()}createTargetIndexes(t,i){return p.resolve()}getDocumentsMatchingTarget(t,i){return p.resolve(null)}getIndexType(t,i){return p.resolve(0)}getFieldIndexes(t,i){return p.resolve([])}getNextCollectionGroupToUpdate(t){return p.resolve(null)}getMinOffset(t,i){return p.resolve(Me.min())}getMinOffsetFromCollectionGroup(t,i){return p.resolve(Me.min())}updateCollectionGroup(t,i,n){return p.resolve()}updateIndexEntries(t,i){return p.resolve()}},ia=class{constructor(){this.index={}}add(t){let i=t.lastSegment(),n=t.popLast(),r=this.index[i]||new pt(nt.comparator),o=!r.has(n);return this.index[i]=r.add(n),o}has(t){let i=t.lastSegment(),n=t.popLast(),r=this.index[i];return r&&r.has(n)}getEntries(t){return(this.index[t]||new pt(nt.comparator)).toArray()}};var cl=new Uint8Array(0),Xm=class{constructor(t,i){this.databaseId=i,this.an=new ia,this.un=new mi(n=>Xn(n),(n,r)=>ma(n,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,i){if(!this.an.has(i)){let n=i.lastSegment(),r=i.popLast();t.addOnCommittedListener(()=>{this.an.add(i)});let o={collectionId:n,parent:le(r)};return B0(t).put(o)}return p.resolve()}getCollectionParents(t,i){let n=[],r=IDBKeyRange.bound([i,""],[ay(i),""],!1,!0);return B0(t).W(r).next(o=>{for(let s of o){if(s.collectionId!==i)break;n.push(si(s.parent))}return n})}addFieldIndex(t,i){let n=Ps(t),r=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(i);delete r.indexId;let o=n.add(r);if(i.indexState){let s=$r(t);return o.next(a=>{s.put(P0(a,this.uid,i.indexState.sequenceNumber,i.indexState.offset))})}return o.next()}deleteFieldIndex(t,i){let n=Ps(t),r=$r(t),o=Gr(t);return n.delete(i.indexId).next(()=>r.delete(IDBKeyRange.bound([i.indexId],[i.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([i.indexId],[i.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){let i=Ps(t),n=Gr(t),r=$r(t);return i.H().next(()=>n.H()).next(()=>r.H())}createTargetIndexes(t,i){return p.forEach(this.cn(i),n=>this.getIndexType(t,n).next(r=>{if(r===0||r===1){let o=new Ol(n).on();if(o!=null)return this.addFieldIndex(t,o)}}))}getDocumentsMatchingTarget(t,i){let n=Gr(t),r=!0,o=new Map;return p.forEach(this.cn(i),s=>this.ln(t,s).next(a=>{r&&(r=!!a),o.set(s,a)})).next(()=>{if(r){let s=Y(),a=[];return p.forEach(o,(c,l)=>{x("IndexedDbIndexManager",`Using index ${function(N){return`id=${N.indexId}|cg=${N.collectionGroup}|f=${N.fields.map(z=>`${z.fieldPath}:${z.kind}`).join(",")}`}(c)} to execute ${Xn(i)}`);let d=function(N,z){let H=pm(z);if(H===void 0)return null;for(let et of Tl(N,H.fieldPath))switch(et.op){case"array-contains-any":return et.value.arrayValue.values||[];case"array-contains":return[et.value]}return null}(l,c),u=function(N,z){let H=new Map;for(let et of Un(z))for(let At of Tl(N,et.fieldPath))switch(At.op){case"==":case"in":H.set(et.fieldPath.canonicalString(),At.value);break;case"not-in":case"!=":return H.set(et.fieldPath.canonicalString(),At.value),Array.from(H.values())}return null}(l,c),h=function(N,z){let H=[],et=!0;for(let At of Un(z)){let We=At.kind===0?_0(N,At.fieldPath,N.startAt):v0(N,At.fieldPath,N.startAt);H.push(We.value),et&&(et=We.inclusive)}return new hi(H,et)}(l,c),m=function(N,z){let H=[],et=!0;for(let At of Un(z)){let We=At.kind===0?v0(N,At.fieldPath,N.endAt):_0(N,At.fieldPath,N.endAt);H.push(We.value),et&&(et=We.inclusive)}return new hi(H,et)}(l,c),E=this.hn(c,l,h),w=this.hn(c,l,m),b=this.Pn(c,l,u),A=this.In(c.indexId,d,E,h.inclusive,w,m.inclusive,b);return p.forEach(A,q=>n.j(q,i.limit).next(N=>{N.forEach(z=>{let H=T.fromSegments(z.documentKey);s.has(H)||(s=s.add(H),a.push(H))})}))}).next(()=>a)}return p.resolve(null)})}cn(t){let i=this.un.get(t);return i||(t.filters.length===0?i=[t]:i=xT(dt.create(t.filters,"and")).map(n=>Rm(t.path,t.collectionGroup,t.orderBy,n.getFilters(),t.limit,t.startAt,t.endAt)),this.un.set(t,i),i)}In(t,i,n,r,o,s,a){let c=(i!=null?i.length:1)*Math.max(n.length,o.length),l=c/(i!=null?i.length:1),d=[];for(let u=0;u<c;++u){let h=i?this.Tn(i[u/l]):cl,m=this.En(t,h,n[u%l],r),E=this.dn(t,h,o[u%l],s),w=a.map(b=>this.En(t,h,b,!0));d.push(...this.createRange(m,E,w))}return d}En(t,i,n,r){let o=new $n(t,T.empty(),i,n);return r?o:o.Jt()}dn(t,i,n,r){let o=new $n(t,T.empty(),i,n);return r?o.Jt():o}ln(t,i){let n=new Ol(i),r=i.collectionGroup!=null?i.collectionGroup:i.path.lastSegment();return this.getFieldIndexes(t,r).next(o=>{let s=null;for(let a of o)n.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(t,i){let n=2,r=this.cn(i);return p.forEach(r,o=>this.ln(t,o).next(s=>{s?n!==0&&s.fields.length<function(c){let l=new pt(Rt.comparator),d=!1;for(let u of c.filters)for(let h of u.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?d=!0:l=l.add(h.field));for(let u of c.orderBy)u.field.isKeyField()||(l=l.add(u.field));return l.size+(d?1:0)}(o)&&(n=1):n=0})).next(()=>function(s){return s.limit!==null}(i)&&r.length>1&&n===2?1:n)}An(t,i){let n=new Gn;for(let r of Un(t)){let o=i.data.field(r.fieldPath);if(o==null)return null;let s=n.Ht(r.kind);Ii.bt.Pt(o,s)}return n.Wt()}Tn(t){let i=new Gn;return Ii.bt.Pt(t,i.Ht(0)),i.Wt()}Rn(t,i){let n=new Gn;return Ii.bt.Pt(Hn(this.databaseId,i),n.Ht(function(o){let s=Un(o);return s.length===0?0:s[s.length-1].kind}(t))),n.Wt()}Pn(t,i,n){if(n===null)return[];let r=[];r.push(new Gn);let o=0;for(let s of Un(t)){let a=n[o++];for(let c of r)if(this.Vn(i,s.fieldPath)&&Ws(a))r=this.mn(r,s,a);else{let l=c.Ht(s.kind);Ii.bt.Pt(a,l)}}return this.fn(r)}hn(t,i,n){return this.Pn(t,i,n.position)}fn(t){let i=[];for(let n=0;n<t.length;++n)i[n]=t[n].Wt();return i}mn(t,i,n){let r=[...t],o=[];for(let s of n.arrayValue.values||[])for(let a of r){let c=new Gn;c.seed(a.Wt()),Ii.bt.Pt(s,c.Ht(i.kind)),o.push(c)}return o}Vn(t,i){return!!t.filters.find(n=>n instanceof tt&&n.field.isEqual(i)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(t,i){let n=Ps(t),r=$r(t);return(i?n.W("collectionGroupIndex",IDBKeyRange.bound(i,i)):n.W()).next(o=>{let s=[];return p.forEach(o,a=>r.get([a.indexId,this.uid]).next(c=>{s.push(function(d,u){let h=u?new qs(u.sequenceNumber,new Me(tr(u.readTime),new T(si(u.documentKey)),u.largestBatchId)):qs.empty(),m=d.fields.map(([E,w])=>new Jr(Rt.fromServerFormat(E),w));return new no(d.indexId,d.collectionGroup,m,h)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(i=>i.length===0?null:(i.sort((n,r)=>{let o=n.indexState.sequenceNumber-r.indexState.sequenceNumber;return o!==0?o:W(n.collectionGroup,r.collectionGroup)}),i[0].collectionGroup))}updateCollectionGroup(t,i,n){let r=Ps(t),o=$r(t);return this.gn(t).next(s=>r.W("collectionGroupIndex",IDBKeyRange.bound(i,i)).next(a=>p.forEach(a,c=>o.put(P0(c.indexId,this.uid,s,n)))))}updateIndexEntries(t,i){let n=new Map;return p.forEach(i,(r,o)=>{let s=n.get(r.collectionGroup);return(s?p.resolve(s):this.getFieldIndexes(t,r.collectionGroup)).next(a=>(n.set(r.collectionGroup,a),p.forEach(a,c=>this.pn(t,r,c).next(l=>{let d=this.yn(o,c);return l.isEqual(d)?p.resolve():this.wn(t,o,c,l,d)}))))})}Sn(t,i,n,r){return Gr(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,i.key),documentKey:i.key.path.toArray()})}bn(t,i,n,r){return Gr(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,i.key),i.key.path.toArray()])}pn(t,i,n){let r=Gr(t),o=new pt(Hi);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,i)])},(s,a)=>{o=o.add(new $n(n.indexId,i,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(t,i){let n=new pt(Hi),r=this.An(i,t);if(r==null)return n;let o=pm(i);if(o!=null){let s=t.data.field(o.fieldPath);if(Ws(s))for(let a of s.arrayValue.values||[])n=n.add(new $n(i.indexId,t.key,this.Tn(a),r))}else n=n.add(new $n(i.indexId,t.key,cl,r));return n}wn(t,i,n,r,o){x("IndexedDbIndexManager","Updating index entries for document '%s'",i.key);let s=[];return function(c,l,d,u,h){let m=c.getIterator(),E=l.getIterator(),w=qr(m),b=qr(E);for(;w||b;){let A=!1,q=!1;if(w&&b){let N=d(w,b);N<0?q=!0:N>0&&(A=!0)}else w!=null?q=!0:A=!0;A?(u(b),b=qr(E)):q?(h(w),w=qr(m)):(w=qr(m),b=qr(E))}}(r,o,Hi,a=>{s.push(this.Sn(t,i,n,a))},a=>{s.push(this.bn(t,i,n,a))}),p.waitFor(s)}gn(t){let i=1;return $r(t).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,r,o)=>{o.done(),i=r.sequenceNumber+1}).next(()=>i)}createRange(t,i,n){n=n.sort((s,a)=>Hi(s,a)).filter((s,a,c)=>!a||Hi(s,c[a-1])!==0);let r=[];r.push(t);for(let s of n){let a=Hi(s,t),c=Hi(s,i);if(a===0)r[0]=t.Jt();else if(a>0&&c<0)r.push(s),r.push(s.Jt());else if(c>0)break}r.push(i);let o=[];for(let s=0;s<r.length;s+=2){if(this.Dn(r[s],r[s+1]))return[];let a=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,cl,[]],c=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,cl,[]];o.push(IDBKeyRange.bound(a,c))}return o}Dn(t,i){return Hi(t,i)>0}getMinOffsetFromCollectionGroup(t,i){return this.getFieldIndexes(t,i).next(j0)}getMinOffset(t,i){return p.mapArray(this.cn(i),n=>this.ln(t,n).next(r=>r||P())).next(j0)}};function B0(e){return $t(e,"collectionParents")}function Gr(e){return $t(e,"indexEntries")}function Ps(e){return $t(e,"indexConfiguration")}function $r(e){return $t(e,"indexState")}function j0(e){L(e.length!==0);let t=e[0].indexState.offset,i=t.largestBatchId;for(let n=1;n<e.length;n++){let r=e[n].indexState.offset;sf(r,t)<0&&(t=r),i<r.largestBatchId&&(i=r.largestBatchId)}return new Me(t.readTime,t.documentKey,i)}var U0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},De=class e{constructor(t,i,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function ow(e,t,i){let n=e.store("mutations"),r=e.store("documentMutations"),o=[],s=IDBKeyRange.only(i.batchId),a=0,c=n.Y({range:s},(d,u,h)=>(a++,h.delete()));o.push(c.next(()=>{L(a===1)}));let l=[];for(let d of i.mutations){let u=hy(t,d.key.path,i.batchId);o.push(r.delete(u)),l.push(d.key)}return p.waitFor(o).next(()=>l)}function Ll(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw P();t=e.noDocument}return JSON.stringify(t).length}De.DEFAULT_COLLECTION_PERCENTILE=10,De.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,De.DEFAULT=new De(41943040,De.DEFAULT_COLLECTION_PERCENTILE,De.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),De.DISABLED=new De(-1,0,0);var Bl=class e{constructor(t,i,n,r){this.userId=t,this.serializer=i,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(t,i,n,r){L(t.uid!=="");let o=t.isAuthenticated()?t.uid:"";return new e(o,i,n,r)}checkEmpty(t){let i=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Yi(t).Y({index:"userMutationsIndex",range:n},(r,o,s)=>{i=!1,s.done()}).next(()=>i)}addMutationBatch(t,i,n,r){let o=Xr(t),s=Yi(t);return s.add({}).next(a=>{L(typeof a=="number");let c=new Ys(a,i,n,r),l=function(m,E,w){let b=w.baseMutations.map(q=>ea(m.ct,q)),A=w.mutations.map(q=>ea(m.ct,q));return{userId:E,batchId:w.batchId,localWriteTimeMs:w.localWriteTime.toMillis(),baseMutations:b,mutations:A}}(this.serializer,this.userId,c),d=[],u=new pt((h,m)=>W(h.canonicalString(),m.canonicalString()));for(let h of r){let m=hy(this.userId,h.key.path,a);u=u.add(h.key.path.popLast()),d.push(s.put(l)),d.push(o.put(m,SC))}return u.forEach(h=>{d.push(this.indexManager.addToCollectionParentIndex(t,h))}),t.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),p.waitFor(d).next(()=>c)})}lookupMutationBatch(t,i){return Yi(t).get(i).next(n=>n?(L(n.userId===this.userId),qn(this.serializer,n)):null)}vn(t,i){return this.Cn[i]?p.resolve(this.Cn[i]):this.lookupMutationBatch(t,i).next(n=>{if(n){let r=n.keys();return this.Cn[i]=r,r}return null})}getNextMutationBatchAfterBatchId(t,i){let n=i+1,r=IDBKeyRange.lowerBound([this.userId,n]),o=null;return Yi(t).Y({index:"userMutationsIndex",range:r},(s,a,c)=>{a.userId===this.userId&&(L(a.batchId>=n),o=qn(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(t){let i=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Yi(t).Y({index:"userMutationsIndex",range:i,reverse:!0},(r,o,s)=>{n=o.batchId,s.done()}).next(()=>n)}getAllMutationBatches(t){let i=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Yi(t).W("userMutationsIndex",i).next(n=>n.map(r=>qn(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(t,i){let n=hl(this.userId,i.path),r=IDBKeyRange.lowerBound(n),o=[];return Xr(t).Y({range:r},(s,a,c)=>{let[l,d,u]=s,h=si(d);if(l===this.userId&&i.path.isEqual(h))return Yi(t).get(u).next(m=>{if(!m)throw P();L(m.userId===this.userId),o.push(qn(this.serializer,m))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(t,i){let n=new pt(W),r=[];return i.forEach(o=>{let s=hl(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=Xr(t).Y({range:a},(l,d,u)=>{let[h,m,E]=l,w=si(m);h===this.userId&&o.path.isEqual(w)?n=n.add(E):u.done()});r.push(c)}),p.waitFor(r).next(()=>this.Fn(t,n))}getAllMutationBatchesAffectingQuery(t,i){let n=i.path,r=n.length+1,o=hl(this.userId,n),s=IDBKeyRange.lowerBound(o),a=new pt(W);return Xr(t).Y({range:s},(c,l,d)=>{let[u,h,m]=c,E=si(h);u===this.userId&&n.isPrefixOf(E)?E.length===r&&(a=a.add(m)):d.done()}).next(()=>this.Fn(t,a))}Fn(t,i){let n=[],r=[];return i.forEach(o=>{r.push(Yi(t).get(o).next(s=>{if(s===null)throw P();L(s.userId===this.userId),n.push(qn(this.serializer,s))}))}),p.waitFor(r).next(()=>n)}removeMutationBatch(t,i){return ow(t.ae,this.userId,i).next(n=>(t.addOnCommittedListener(()=>{this.Mn(i.batchId)}),p.forEach(n,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}Mn(t){delete this.Cn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(i=>{if(!i)return p.resolve();let n=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),r=[];return Xr(t).Y({range:n},(o,s,a)=>{if(o[0]===this.userId){let c=si(o[1]);r.push(c)}else a.done()}).next(()=>{L(r.length===0)})})}containsKey(t,i){return sw(t,this.userId,i)}xn(t){return aw(t).get(this.userId).next(i=>i||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function sw(e,t,i){let n=hl(t,i.path),r=n[1],o=IDBKeyRange.lowerBound(n),s=!1;return Xr(e).Y({range:o,J:!0},(a,c,l)=>{let[d,u,h]=a;d===t&&u===r&&(s=!0),l.done()}).next(()=>s)}function Yi(e){return $t(e,"mutations")}function Xr(e){return $t(e,"documentMutations")}function aw(e){return $t(e,"mutationQueues")}var uo=class e{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new e(0)}static Bn(){return new e(-1)}};var Zm=class{constructor(t,i){this.referenceDelegate=t,this.serializer=i}allocateTargetId(t){return this.Ln(t).next(i=>{let n=new uo(i.highestTargetId);return i.highestTargetId=n.next(),this.kn(t,i).next(()=>i.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.Ln(t).next(i=>U.fromTimestamp(new Et(i.lastRemoteSnapshotVersion.seconds,i.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.Ln(t).next(i=>i.highestListenSequenceNumber)}setTargetsMetadata(t,i,n){return this.Ln(t).next(r=>(r.highestListenSequenceNumber=i,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),i>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=i),this.kn(t,r)))}addTargetData(t,i){return this.qn(t,i).next(()=>this.Ln(t).next(n=>(n.targetCount+=1,this.Qn(i,n),this.kn(t,n))))}updateTargetData(t,i){return this.qn(t,i)}removeTargetData(t,i){return this.removeMatchingKeysForTargetId(t,i.targetId).next(()=>Kr(t).delete(i.targetId)).next(()=>this.Ln(t)).next(n=>(L(n.targetCount>0),n.targetCount-=1,this.kn(t,n)))}removeTargets(t,i,n){let r=0,o=[];return Kr(t).Y((s,a)=>{let c=Vs(a);c.sequenceNumber<=i&&n.get(c.targetId)===null&&(r++,o.push(this.removeTargetData(t,c)))}).next(()=>p.waitFor(o)).next(()=>r)}forEachTarget(t,i){return Kr(t).Y((n,r)=>{let o=Vs(r);i(o)})}Ln(t){return z0(t).get("targetGlobalKey").next(i=>(L(i!==null),i))}kn(t,i){return z0(t).put("targetGlobalKey",i)}qn(t,i){return Kr(t).put(iw(this.serializer,i))}Qn(t,i){let n=!1;return t.targetId>i.highestTargetId&&(i.highestTargetId=t.targetId,n=!0),t.sequenceNumber>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t.sequenceNumber,n=!0),n}getTargetCount(t){return this.Ln(t).next(i=>i.targetCount)}getTargetData(t,i){let n=Xn(i),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),o=null;return Kr(t).Y({range:r,index:"queryTargetsIndex"},(s,a,c)=>{let l=Vs(a);ma(i,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(t,i,n){let r=[],o=Xi(t);return i.forEach(s=>{let a=le(s.path);r.push(o.put({targetId:n,path:a})),r.push(this.referenceDelegate.addReference(t,n,s))}),p.waitFor(r)}removeMatchingKeys(t,i,n){let r=Xi(t);return p.forEach(i,o=>{let s=le(o.path);return p.waitFor([r.delete([n,s]),this.referenceDelegate.removeReference(t,n,o)])})}removeMatchingKeysForTargetId(t,i){let n=Xi(t),r=IDBKeyRange.bound([i],[i+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(t,i){let n=IDBKeyRange.bound([i],[i+1],!1,!0),r=Xi(t),o=Y();return r.Y({range:n,J:!0},(s,a,c)=>{let l=si(s[1]),d=new T(l);o=o.add(d)}).next(()=>o)}containsKey(t,i){let n=le(i.path),r=IDBKeyRange.bound([n],[ay(n)],!1,!0),o=0;return Xi(t).Y({index:"documentTargetsIndex",J:!0,range:r},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}_t(t,i){return Kr(t).get(i).next(n=>n?Vs(n):null)}};function Kr(e){return $t(e,"targets")}function z0(e){return $t(e,"targetGlobal")}function Xi(e){return $t(e,"targetDocuments")}function q0([e,t],[i,n]){let r=W(e,i);return r===0?W(t,n):r}var Jm=class{constructor(t){this.Kn=t,this.buffer=new pt(q0),this.$n=0}Un(){return++this.$n}Wn(t){let i=[t,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(i);else{let n=this.buffer.last();q0(i,n)<0&&(this.buffer=this.buffer.delete(n).add(i))}}get maxValue(){return this.buffer.last()[0]}},tp=class{constructor(t,i,n){this.garbageCollector=t,this.asyncQueue=i,this.localStore=n,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(t){x("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,()=>g(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(i){mn(i)?x("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield hn(i)}yield this.zn(3e5)}))}},ep=class{constructor(t,i){this.jn=t,this.params=i}calculateTargetCount(t,i){return this.jn.Hn(t).next(n=>Math.floor(i/100*n))}nthSequenceNumber(t,i){if(i===0)return p.resolve(Ae._e);let n=new Jm(i);return this.jn.forEachTarget(t,r=>n.Wn(r.sequenceNumber)).next(()=>this.jn.Jn(t,r=>n.Wn(r))).next(()=>n.maxValue)}removeTargets(t,i,n){return this.jn.removeTargets(t,i,n)}removeOrphanedDocuments(t,i){return this.jn.removeOrphanedDocuments(t,i)}collect(t,i){return this.params.cacheSizeCollectionThreshold===-1?(x("LruGarbageCollector","Garbage collection skipped; disabled"),p.resolve(U0)):this.getCacheSize(t).next(n=>n<this.params.cacheSizeCollectionThreshold?(x("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),U0):this.Yn(t,i))}getCacheSize(t){return this.jn.getCacheSize(t)}Yn(t,i){let n,r,o,s,a,c,l,d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(u=>(u>this.params.maximumSequenceNumbersToCollect?(x("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${u}`),r=this.params.maximumSequenceNumbersToCollect):r=u,s=Date.now(),this.nthSequenceNumber(t,r))).next(u=>(n=u,a=Date.now(),this.removeTargets(t,n,i))).next(u=>(o=u,c=Date.now(),this.removeOrphanedDocuments(t,n))).next(u=>(l=Date.now(),Qr()<=ii.DEBUG&&x("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${r} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${u} documents in `+(l-c)+`ms
Total Duration: ${l-d}ms`),p.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:u})))}};function IT(e,t){return new ep(e,t)}var ip=class{constructor(t,i){this.db=t,this.garbageCollector=IT(this,i)}Hn(t){let i=this.Zn(t);return this.db.getTargetCache().getTargetCount(t).next(n=>i.next(r=>n+r))}Zn(t){let i=0;return this.Jn(t,n=>{i++}).next(()=>i)}forEachTarget(t,i){return this.db.getTargetCache().forEachTarget(t,i)}Jn(t,i){return this.Xn(t,(n,r)=>i(r))}addReference(t,i,n){return ll(t,n)}removeReference(t,i,n){return ll(t,n)}removeTargets(t,i,n){return this.db.getTargetCache().removeTargets(t,i,n)}markPotentiallyOrphaned(t,i){return ll(t,i)}er(t,i){return function(r,o){let s=!1;return aw(r).Z(a=>sw(r,a,o).next(c=>(c&&(s=!0),p.resolve(!c)))).next(()=>s)}(t,i)}removeOrphanedDocuments(t,i){let n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],o=0;return this.Xn(t,(s,a)=>{if(a<=i){let c=this.er(t,s).next(l=>{if(!l)return o++,n.getEntry(t,s).next(()=>(n.removeEntry(s,U.min()),Xi(t).delete(function(u){return[0,le(u.path)]}(s))))});r.push(c)}}).next(()=>p.waitFor(r)).next(()=>n.apply(t)).next(()=>o)}removeTarget(t,i){let n=i.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)}updateLimboDocument(t,i){return ll(t,i)}Xn(t,i){let n=Xi(t),r,o=Ae._e;return n.Y({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==Ae._e&&i(new T(si(r)),o),o=l,r=c):o=Ae._e}).next(()=>{o!==Ae._e&&i(new T(si(r)),o)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}};function ll(e,t){return Xi(e).put(function(n,r){return{targetId:0,path:le(n.path),sequenceNumber:r}}(t,e.currentSequenceNumber))}var jl=class{constructor(){this.changes=new mi(t=>t.toString(),(t,i)=>t.isEqual(i)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,Lt.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();let n=this.changes.get(i);return n!==void 0?p.resolve(n):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var np=class{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,i,n){return jn(t).put(n)}removeEntry(t,i,n){return jn(t).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Nl(s),a[a.length-1]]}(i,n))}updateMetadata(t,i){return this.getMetadata(t).next(n=>(n.byteSize+=i,this.tr(t,n)))}getEntry(t,i){let n=Lt.newInvalidDocument(i);return jn(t).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Ns(i))},(r,o)=>{n=this.nr(i,o)}).next(()=>n)}rr(t,i){let n={size:0,document:Lt.newInvalidDocument(i)};return jn(t).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Ns(i))},(r,o)=>{n={document:this.nr(i,o),size:Ll(o)}}).next(()=>n)}getEntries(t,i){let n=be();return this.ir(t,i,(r,o)=>{let s=this.nr(r,o);n=n.insert(r,s)}).next(()=>n)}sr(t,i){let n=be(),r=new yt(T.comparator);return this.ir(t,i,(o,s)=>{let a=this.nr(o,s);n=n.insert(o,a),r=r.insert(o,Ll(s))}).next(()=>({documents:n,_r:r}))}ir(t,i,n){if(i.isEmpty())return p.resolve();let r=new pt(K0);i.forEach(c=>r=r.add(c));let o=IDBKeyRange.bound(Ns(r.first()),Ns(r.last())),s=r.getIterator(),a=s.getNext();return jn(t).Y({index:"documentKeyIndex",range:o},(c,l,d)=>{let u=T.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&K0(a,u)<0;)n(a,null),a=s.getNext();a&&a.isEqual(u)&&(n(a,l),a=s.hasNext()?s.getNext():null),a?d.U(Ns(a)):d.done()}).next(()=>{for(;a;)n(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(t,i,n,r,o){let s=i.path,a=[s.popLast().toArray(),s.lastSegment(),Nl(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return jn(t).W(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let d=be();for(let u of l){let h=this.nr(T.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);h.isFoundDocument()&&(fa(i,h)||r.has(h.key))&&(d=d.insert(h.key,h))}return d})}getAllFromCollectionGroup(t,i,n,r){let o=be(),s=$0(i,n),a=$0(i,Me.max());return jn(t).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,d)=>{let u=this.nr(T.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(u.key,u),o.size===r&&d.done()}).next(()=>o)}newChangeBuffer(t){return new rp(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(i=>i.byteSize)}getMetadata(t){return G0(t).get("remoteDocumentGlobalKey").next(i=>(L(!!i),i))}tr(t,i){return G0(t).put("remoteDocumentGlobalKey",i)}nr(t,i){if(i){let n=yT(this.serializer,i);if(!(n.isNoDocument()&&n.version.isEqual(U.min())))return n}return Lt.newInvalidDocument(t)}};function cw(e){return new np(e)}var rp=class extends jl{constructor(t,i){super(),this.ar=t,this.trackRemovals=i,this.ur=new mi(n=>n.toString(),(n,r)=>n.isEqual(r))}applyChanges(t){let i=[],n=0,r=new pt((o,s)=>W(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ur.get(o);if(i.push(this.ar.removeEntry(t,o,a.readTime)),s.isValidDocument()){let c=R0(this.ar.serializer,s);r=r.add(o.path.popLast());let l=Ll(c);n+=l-a.size,i.push(this.ar.addEntry(t,o,c))}else if(n-=a.size,this.trackRemovals){let c=R0(this.ar.serializer,s.convertToNoDocument(U.min()));i.push(this.ar.addEntry(t,o,c))}}),r.forEach(o=>{i.push(this.ar.indexManager.addToCollectionParentIndex(t,o))}),i.push(this.ar.updateMetadata(t,n)),p.waitFor(i)}getFromCache(t,i){return this.ar.rr(t,i).next(n=>(this.ur.set(i,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(t,i){return this.ar.sr(t,i).next(({documents:n,_r:r})=>(r.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:n.get(o).readTime})}),n))}};function G0(e){return $t(e,"remoteDocumentGlobal")}function jn(e){return $t(e,"remoteDocumentsV14")}function Ns(e){let t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function $0(e,t){let i=t.documentKey.path.toArray();return[e,Nl(t.readTime),i.slice(0,i.length-2),i.length>0?i[i.length-1]:""]}function K0(e,t){let i=e.path.toArray(),n=t.path.toArray(),r=0;for(let o=0;o<i.length-2&&o<n.length-2;++o)if(r=W(i[o],n[o]),r)return r;return r=W(i.length,n.length),r||(r=W(i[i.length-2],n[n.length-2]),r||W(i[i.length-1],n[n.length-1]))}var op=class{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}};var Ul=class{constructor(t,i,n,r){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=n,this.indexManager=r}getDocument(t,i){let n=null;return this.documentOverlayCache.getOverlay(t,i).next(r=>(n=r,this.remoteDocumentCache.getEntry(t,i))).next(r=>(n!==null&&js(n.mutation,r,ke.empty(),Et.now()),r))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next(n=>this.getLocalViewOfDocuments(t,n,Y()).next(()=>n))}getLocalViewOfDocuments(t,i,n=Y()){let r=ai();return this.populateOverlays(t,r,i).next(()=>this.computeViews(t,i,r,n).next(o=>{let s=Os();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(t,i){let n=ai();return this.populateOverlays(t,n,i).next(()=>this.computeViews(t,i,n,Y()))}populateOverlays(t,i,n){let r=[];return n.forEach(o=>{i.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(t,r).next(o=>{o.forEach((s,a)=>{i.set(s,a)})})}computeViews(t,i,n,r){let o=be(),s=Bs(),a=function(){return Bs()}();return i.forEach((c,l)=>{let d=n.get(l.key);r.has(l.key)&&(d===void 0||d.mutation instanceof Ge)?o=o.insert(l.key,l):d!==void 0?(s.set(l.key,d.mutation.getFieldMask()),js(d.mutation,l,d.mutation.getFieldMask(),Et.now())):s.set(l.key,ke.empty())}),this.recalculateAndSaveOverlays(t,o).next(c=>(c.forEach((l,d)=>s.set(l,d)),i.forEach((l,d)=>{var u;return a.set(l,new op(d,(u=s.get(l))!==null&&u!==void 0?u:null))}),a))}recalculateAndSaveOverlays(t,i){let n=Bs(),r=new yt((s,a)=>s-a),o=Y();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=i.get(c);if(l===null)return;let d=n.get(c)||ke.empty();d=a.applyToLocalView(l,d),n.set(c,d);let u=(r.get(a.batchId)||Y()).add(c);r=r.insert(a.batchId,u)})}).next(()=>{let s=[],a=r.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,u=Ry();d.forEach(h=>{if(!o.has(h)){let m=By(i.get(h),n.get(h));m!==null&&u.set(h,m),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(t,l,u))}return p.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,i,n,r){return function(s){return T.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(i)?this.getDocumentsMatchingDocumentQuery(t,i.path):df(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,n,r):this.getDocumentsMatchingCollectionQuery(t,i,n,r)}getNextDocuments(t,i,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,n,r).next(o=>{let s=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,n.largestBatchId,r-o.size):p.resolve(ai()),a=-1,c=o;return s.next(l=>p.forEach(l,(d,u)=>(a<u.largestBatchId&&(a=u.largestBatchId),o.get(d)?p.resolve():this.remoteDocumentCache.getEntry(t,d).next(h=>{c=c.insert(d,h)}))).next(()=>this.populateOverlays(t,l,o)).next(()=>this.computeViews(t,c,l,Y())).next(d=>({batchId:a,changes:Dy(d)})))})}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new T(i)).next(n=>{let r=Os();return n.isFoundDocument()&&(r=r.insert(n.key,n)),r})}getDocumentsMatchingCollectionGroupQuery(t,i,n,r){let o=i.collectionGroup,s=Os();return this.indexManager.getCollectionParents(t,o).next(a=>p.forEach(a,c=>{let l=function(u,h){return new qe(h,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(i,c.child(o));return this.getDocumentsMatchingCollectionQuery(t,l,n,r).next(d=>{d.forEach((u,h)=>{s=s.insert(u,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,i,n,r){let o;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,n.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,n,o,r))).next(s=>{o.forEach((c,l)=>{let d=l.getKey();s.get(d)===null&&(s=s.insert(d,Lt.newInvalidDocument(d)))});let a=Os();return s.forEach((c,l)=>{let d=o.get(c);d!==void 0&&js(d.mutation,l,ke.empty(),Et.now()),fa(i,l)&&(a=a.insert(c,l))}),a})}};var sp=class{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,i){return p.resolve(this.cr.get(i))}saveBundleMetadata(t,i){return this.cr.set(i.id,function(r){return{id:r.id,version:r.version,createTime:Mt(r.createTime)}}(i)),p.resolve()}getNamedQuery(t,i){return p.resolve(this.lr.get(i))}saveNamedQuery(t,i){return this.lr.set(i.name,function(r){return{name:r.name,query:mf(r.bundledQuery),readTime:Mt(r.readTime)}}(i)),p.resolve()}};var ap=class{constructor(){this.overlays=new yt(T.comparator),this.hr=new Map}getOverlay(t,i){return p.resolve(this.overlays.get(i))}getOverlays(t,i){let n=ai();return p.forEach(i,r=>this.getOverlay(t,r).next(o=>{o!==null&&n.set(r,o)})).next(()=>n)}saveOverlays(t,i,n){return n.forEach((r,o)=>{this.ht(t,i,o)}),p.resolve()}removeOverlaysForBatchId(t,i,n){let r=this.hr.get(n);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(n)),p.resolve()}getOverlaysForCollection(t,i,n){let r=ai(),o=i.length+1,s=new T(i.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!i.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>n&&r.set(c.getKey(),c)}return p.resolve(r)}getOverlaysForCollectionGroup(t,i,n,r){let o=new yt((l,d)=>l-d),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===i&&l.largestBatchId>n){let d=o.get(l.largestBatchId);d===null&&(d=ai(),o=o.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=ai(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=r)););return p.resolve(a)}ht(t,i,n){let r=this.overlays.get(n.key);if(r!==null){let s=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new Xs(i,n));let o=this.hr.get(i);o===void 0&&(o=Y(),this.hr.set(i,o)),this.hr.set(i,o.add(n.key))}};var na=class{constructor(){this.Pr=new pt(Ft.Ir),this.Tr=new pt(Ft.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,i){let n=new Ft(t,i);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(t,i){t.forEach(n=>this.addReference(n,i))}removeReference(t,i){this.Ar(new Ft(t,i))}Rr(t,i){t.forEach(n=>this.removeReference(n,i))}Vr(t){let i=new T(new nt([])),n=new Ft(i,t),r=new Ft(i,t+1),o=[];return this.Tr.forEachInRange([n,r],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){let i=new T(new nt([])),n=new Ft(i,t),r=new Ft(i,t+1),o=Y();return this.Tr.forEachInRange([n,r],s=>{o=o.add(s.key)}),o}containsKey(t){let i=new Ft(t,0),n=this.Pr.firstAfterOrEqual(i);return n!==null&&t.isEqual(n.key)}},Ft=class{constructor(t,i){this.key=t,this.pr=i}static Ir(t,i){return T.comparator(t.key,i.key)||W(t.pr,i.pr)}static Er(t,i){return W(t.pr,i.pr)||T.comparator(t.key,i.key)}};var cp=class{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.yr=1,this.wr=new pt(Ft.Ir)}checkEmpty(t){return p.resolve(this.mutationQueue.length===0)}addMutationBatch(t,i,n,r){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Ys(o,i,n,r);this.mutationQueue.push(s);for(let a of r)this.wr=this.wr.add(new Ft(a.key,o)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return p.resolve(s)}lookupMutationBatch(t,i){return p.resolve(this.Sr(i))}getNextMutationBatchAfterBatchId(t,i){let n=i+1,r=this.br(n),o=r<0?0:r;return p.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return p.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return p.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){let n=new Ft(i,0),r=new Ft(i,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([n,r],s=>{let a=this.Sr(s.pr);o.push(a)}),p.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,i){let n=new pt(W);return i.forEach(r=>{let o=new Ft(r,0),s=new Ft(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{n=n.add(a.pr)})}),p.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(t,i){let n=i.path,r=n.length+1,o=n;T.isDocumentKey(o)||(o=o.child(""));let s=new Ft(new T(o),0),a=new pt(W);return this.wr.forEachWhile(c=>{let l=c.key.path;return!!n.isPrefixOf(l)&&(l.length===r&&(a=a.add(c.pr)),!0)},s),p.resolve(this.Dr(a))}Dr(t){let i=[];return t.forEach(n=>{let r=this.Sr(n);r!==null&&i.push(r)}),i}removeMutationBatch(t,i){L(this.Cr(i.batchId,"removed")===0),this.mutationQueue.shift();let n=this.wr;return p.forEach(i.mutations,r=>{let o=new Ft(r.key,i.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.wr=n})}Mn(t){}containsKey(t,i){let n=new Ft(i,0),r=this.wr.firstAfterOrEqual(n);return p.resolve(i.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,p.resolve()}Cr(t,i){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){let i=this.br(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}};var lp=class{constructor(t){this.vr=t,this.docs=function(){return new yt(T.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){let n=i.key,r=this.docs.get(n),o=r?r.size:0,s=this.vr(i);return this.docs=this.docs.insert(n,{document:i.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){let i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){let n=this.docs.get(i);return p.resolve(n?n.document.mutableCopy():Lt.newInvalidDocument(i))}getEntries(t,i){let n=be();return i.forEach(r=>{let o=this.docs.get(r);n=n.insert(r,o?o.document.mutableCopy():Lt.newInvalidDocument(r))}),p.resolve(n)}getDocumentsMatchingQuery(t,i,n,r){let o=be(),s=i.path,a=new T(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||sf(ly(d),n)<=0||(r.has(d.key)||fa(i,d))&&(o=o.insert(d.key,d.mutableCopy()))}return p.resolve(o)}getAllFromCollectionGroup(t,i,n,r){P()}Fr(t,i){return p.forEach(this.docs,n=>i(n))}newChangeBuffer(t){return new dp(this)}getSize(t){return p.resolve(this.size)}},dp=class extends jl{constructor(t){super(),this.ar=t}applyChanges(t){let i=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?i.push(this.ar.addEntry(t,r)):this.ar.removeEntry(n)}),p.waitFor(i)}getFromCache(t,i){return this.ar.getEntry(t,i)}getAllFromCache(t,i){return this.ar.getEntries(t,i)}};var up=class{constructor(t){this.persistence=t,this.Mr=new mi(i=>Xn(i),ma),this.lastRemoteSnapshotVersion=U.min(),this.highestTargetId=0,this.Or=0,this.Nr=new na,this.targetCount=0,this.Br=uo.Nn()}forEachTarget(t,i){return this.Mr.forEach((n,r)=>i(r)),p.resolve()}getLastRemoteSnapshotVersion(t){return p.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return p.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Br.next(),p.resolve(this.highestTargetId)}setTargetsMetadata(t,i,n){return n&&(this.lastRemoteSnapshotVersion=n),i>this.Or&&(this.Or=i),p.resolve()}qn(t){this.Mr.set(t.target,t);let i=t.targetId;i>this.highestTargetId&&(this.Br=new uo(i),this.highestTargetId=i),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,i){return this.qn(i),this.targetCount+=1,p.resolve()}updateTargetData(t,i){return this.qn(i),p.resolve()}removeTargetData(t,i){return this.Mr.delete(i.target),this.Nr.Vr(i.targetId),this.targetCount-=1,p.resolve()}removeTargets(t,i,n){let r=0,o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=i&&n.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(t,a.targetId)),r++)}),p.waitFor(o).next(()=>r)}getTargetCount(t){return p.resolve(this.targetCount)}getTargetData(t,i){let n=this.Mr.get(i)||null;return p.resolve(n)}addMatchingKeys(t,i,n){return this.Nr.dr(i,n),p.resolve()}removeMatchingKeys(t,i,n){this.Nr.Rr(i,n);let r=this.persistence.referenceDelegate,o=[];return r&&i.forEach(s=>{o.push(r.markPotentiallyOrphaned(t,s))}),p.waitFor(o)}removeMatchingKeysForTargetId(t,i){return this.Nr.Vr(i),p.resolve()}getMatchingKeysForTargetId(t,i){let n=this.Nr.gr(i);return p.resolve(n)}containsKey(t,i){return p.resolve(this.Nr.containsKey(i))}};var zl=class{constructor(t,i){this.Lr={},this.overlays={},this.kr=new Ae(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new up(this),this.indexManager=new Ym,this.remoteDocumentCache=function(r){return new lp(r)}(n=>this.referenceDelegate.Kr(n)),this.serializer=new Pl(i),this.$r=new sp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new ap,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let n=this.Lr[t.toKey()];return n||(n=new cp(i,this.referenceDelegate),this.Lr[t.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,i,n){x("MemoryPersistence","Starting transaction:",t);let r=new hp(this.kr.next());return this.referenceDelegate.Ur(),n(r).next(o=>this.referenceDelegate.Wr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Gr(t,i){return p.or(Object.values(this.Lr).map(n=>()=>n.containsKey(t,i)))}},hp=class extends wl{constructor(t){super(),this.currentSequenceNumber=t}},ql=class e{constructor(t){this.persistence=t,this.zr=new na,this.jr=null}static Hr(t){return new e(t)}get Jr(){if(this.jr)return this.jr;throw P()}addReference(t,i,n){return this.zr.addReference(n,i),this.Jr.delete(n.toString()),p.resolve()}removeReference(t,i,n){return this.zr.removeReference(n,i),this.Jr.add(n.toString()),p.resolve()}markPotentiallyOrphaned(t,i){return this.Jr.add(i.toString()),p.resolve()}removeTarget(t,i){this.zr.Vr(i.targetId).forEach(r=>this.Jr.add(r.toString()));let n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,i.targetId).next(r=>{r.forEach(o=>this.Jr.add(o.toString()))}).next(()=>n.removeTargetData(t,i))}Ur(){this.jr=new Set}Wr(t){let i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return p.forEach(this.Jr,n=>{let r=T.fromPath(n);return this.Yr(t,r).next(o=>{o||i.removeEntry(r,U.min())})}).next(()=>(this.jr=null,i.apply(t)))}updateLimboDocument(t,i){return this.Yr(t,i).next(n=>{n?this.Jr.delete(i.toString()):this.Jr.add(i.toString())})}Kr(t){return 0}Yr(t,i){return p.or([()=>p.resolve(this.zr.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.Gr(t,i)])}};var mp=class{constructor(t){this.serializer=t}N(t,i,n,r){let o=new xl("createOrUpgrade",i);n<1&&r>=1&&(function(c){c.createObjectStore("owner")}(t),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",l0,{unique:!0}),c.createObjectStore("documentMutations")}(t),Q0(t),function(c){c.createObjectStore("remoteDocuments")}(t));let s=p.resolve();return n<3&&r>=3&&(n!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(t),Q0(t)),s=s.next(()=>function(c){let l=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:U.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",d)}(o))),n<4&&r>=4&&(n!==0&&(s=s.next(()=>function(c,l){return l.store("mutations").W().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",l0,{unique:!0});let u=l.store("mutations"),h=d.map(m=>u.put(m));return p.waitFor(h)})}(t,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(t)})),n<5&&r>=5&&(s=s.next(()=>this.Xr(o))),n<6&&r>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(t),this.ei(o)))),n<7&&r>=7&&(s=s.next(()=>this.ti(o))),n<8&&r>=8&&(s=s.next(()=>this.ni(t,o))),n<9&&r>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(t)})),n<10&&r>=10&&(s=s.next(()=>this.ri(o))),n<11&&r>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),n<12&&r>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:UC});l.createIndex("collectionPathOverlayIndex",zC,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",qC,{unique:!1})})(t)})),n<13&&r>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:DC});l.createIndex("documentKeyIndex",RC),l.createIndex("collectionGroupIndex",MC)}(t)).next(()=>this.ii(t,o)).next(()=>t.deleteObjectStore("remoteDocuments"))),n<14&&r>=14&&(s=s.next(()=>this.si(t,o))),n<15&&r>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:VC}).createIndex("sequenceNumberIndex",LC,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:BC}).createIndex("documentKeyIndex",jC,{unique:!1})}(t))),s}ei(t){let i=0;return t.store("remoteDocuments").Y((n,r)=>{i+=Ll(r)}).next(()=>{let n={byteSize:i};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}Xr(t){let i=t.store("mutationQueues"),n=t.store("mutations");return i.W().next(r=>p.forEach(r,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",s).next(a=>p.forEach(a,c=>{L(c.userId===o.userId);let l=qn(this.serializer,c);return ow(t,o.userId,l).next(()=>{})}))}))}ti(t){let i=t.store("targetDocuments"),n=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{let o=[];return n.Y((s,a)=>{let c=new nt(s),l=function(u){return[0,le(u)]}(c);o.push(i.get(l).next(d=>d?p.resolve():(u=>i.put({targetId:0,path:le(u),sequenceNumber:r.highestListenSequenceNumber}))(c)))}).next(()=>p.waitFor(o))})}ni(t,i){t.createObjectStore("collectionParents",{keyPath:OC});let n=i.store("collectionParents"),r=new ia,o=s=>{if(r.add(s)){let a=s.lastSegment(),c=s.popLast();return n.put({collectionId:a,parent:le(c)})}};return i.store("remoteDocuments").Y({J:!0},(s,a)=>{let c=new nt(s);return o(c.popLast())}).next(()=>i.store("documentMutations").Y({J:!0},([s,a,c],l)=>{let d=si(a);return o(d.popLast())}))}ri(t){let i=t.store("targets");return i.Y((n,r)=>{let o=Vs(r),s=iw(this.serializer,o);return i.put(s)})}ii(t,i){let n=i.store("remoteDocuments"),r=[];return n.Y((o,s)=>{let a=i.store("remoteDocumentsV14"),c=function(u){return u.document?new T(nt.fromString(u.document.name).popFirst(5)):u.noDocument?T.fromSegments(u.noDocument.path):u.unknownDocument?T.fromSegments(u.unknownDocument.path):P()}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};r.push(a.put(l))}).next(()=>p.waitFor(r))}si(t,i){let n=i.store("mutations"),r=cw(this.serializer),o=new zl(ql.Hr,this.serializer.ct);return n.W().next(s=>{let a=new Map;return s.forEach(c=>{var l;let d=(l=a.get(c.userId))!==null&&l!==void 0?l:Y();qn(this.serializer,c).keys().forEach(u=>d=d.add(u)),a.set(c.userId,d)}),p.forEach(a,(c,l)=>{let d=new Ot(l),u=Fl.lt(this.serializer,d),h=o.getIndexManager(d),m=Bl.lt(d,this.serializer,h,o.referenceDelegate);return new Ul(r,m,u,h).recalculateAndSaveOverlaysForDocumentKeys(new $s(i,Ae._e),c).next()})})}};function Q0(e){e.createObjectStore("targetDocuments",{keyPath:NC}).createIndex("documentTargetsIndex",FC,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",PC,{unique:!0}),e.createObjectStore("targetGlobal")}var rm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",pp=class e{constructor(t,i,n,r,o,s,a,c,l,d,u=15){if(this.allowTabSynchronization=t,this.persistenceKey=i,this.clientId=n,this.oi=o,this.window=s,this.document=a,this._i=l,this.ai=d,this.ui=u,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=h=>Promise.resolve(),!e.D())throw new v(f.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ip(this,r),this.Ti=i+"main",this.serializer=new Pl(c),this.Ei=new Ai(this.Ti,this.ui,new mp(this.serializer)),this.Qr=new Zm(this.referenceDelegate,this.serializer),this.remoteDocumentCache=cw(this.serializer),this.$r=new qm,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,d===!1&&Dt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new v(f.FAILED_PRECONDITION,rm);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Qr.getHighestSequenceNumber(t))}).then(t=>{this.kr=new Ae(t,this._i)}).then(()=>{this.qr=!0}).catch(t=>(this.Ei&&this.Ei.close(),Promise.reject(t)))}fi(t){return this.Ii=i=>g(this,null,function*(){if(this.started)return t(i)}),t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ei.L(i=>g(this,null,function*(){i.newVersion===null&&(yield t())}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.oi.enqueueAndForget(()=>g(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>dl(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(t).next(i=>{i||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(t)).next(i=>this.isPrimary&&!i?this.yi(t).next(()=>!1):!!i&&this.wi(t).next(()=>!0))).catch(t=>{if(mn(t))return x("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return x("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.oi.enqueueRetryable(()=>this.Ii(t)),this.isPrimary=t})}gi(t){return Fs(t).get("owner").next(i=>p.resolve(this.Si(i)))}bi(t){return dl(t).delete(this.clientId)}Di(){return g(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let t=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{let n=$t(i,"clientMetadata");return n.W().next(r=>{let o=this.vi(r,18e5),s=r.filter(a=>o.indexOf(a)===-1);return p.forEach(s,a=>n.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.di)for(let i of t)this.di.removeItem(this.Fi(i.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(t){return!!t&&t.ownerId===this.clientId}pi(t){return this.ai?p.resolve(!0):Fs(t).get("owner").next(i=>{if(i!==null&&this.Ci(i.leaseTimestampMs,5e3)&&!this.Mi(i.ownerId)){if(this.Si(i)&&this.networkEnabled)return!0;if(!this.Si(i)){if(!i.allowTabSynchronization)throw new v(f.FAILED_PRECONDITION,rm);return!1}}return!(!this.networkEnabled||!this.inForeground)||dl(t).W().next(n=>this.vi(n,5e3).find(r=>{if(this.clientId!==r.clientId){let o=!this.networkEnabled&&r.networkEnabled,s=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(i=>(this.isPrimary!==i&&x("IndexedDbPersistence",`Client ${i?"is":"is not"} eligible for a primary lease.`),i))}shutdown(){return g(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{let i=new $s(t,Ae._e);return this.yi(i).next(()=>this.bi(i))}),this.Ei.close(),this.Bi()})}vi(t,i){return t.filter(n=>this.Ci(n.updateTimeMs,i)&&!this.Mi(n.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",t=>dl(t).W().next(i=>this.vi(i,18e5).map(n=>n.clientId)))}get started(){return this.qr}getMutationQueue(t,i){return Bl.lt(t,this.serializer,i,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new Xm(t,this.serializer.ct.databaseId)}getDocumentOverlayCache(t){return Fl.lt(this.serializer,t)}getBundleCache(){return this.$r}runTransaction(t,i,n){x("IndexedDbPersistence","Starting transaction:",t);let r=i==="readonly"?"readonly":"readwrite",o=function(c){return c===15?$C:c===14?fy:c===13?py:c===12?GC:c===11?my:void P()}(this.ui),s;return this.Ei.runTransaction(t,r,o,a=>(s=new $s(a,this.kr?this.kr.next():Ae._e),i==="readwrite-primary"?this.gi(s).next(c=>!!c||this.pi(s)).next(c=>{if(!c)throw Dt(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new v(f.FAILED_PRECONDITION,dy);return n(s)}).next(c=>this.wi(s).next(()=>c)):this.ki(s).next(()=>n(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(t){return Fs(t).get("owner").next(i=>{if(i!==null&&this.Ci(i.leaseTimestampMs,5e3)&&!this.Mi(i.ownerId)&&!this.Si(i)&&!(this.ai||this.allowTabSynchronization&&i.allowTabSynchronization))throw new v(f.FAILED_PRECONDITION,rm)})}wi(t){let i={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Fs(t).put("owner",i)}static D(){return Ai.D()}yi(t){let i=Fs(t);return i.get("owner").next(n=>this.Si(n)?(x("IndexedDbPersistence","Releasing primary lease."),i.delete("owner")):p.resolve())}Ci(t,i){let n=Date.now();return!(t<n-i)&&(!(t>n)||(Dt(`Detected an update time that is in the future: ${t} > ${n}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var t;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.ci=()=>{this.xi();let i=/(?:Version|Mobile)\/1[456]/;Nu()&&(navigator.appVersion.match(i)||navigator.userAgent.match(i))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(t){var i;try{let n=((i=this.di)===null||i===void 0?void 0:i.getItem(this.Fi(t)))!==null;return x("IndexedDbPersistence",`Client '${t}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Dt("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(t){Dt("Failed to set zombie client id.",t)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}};function Fs(e){return $t(e,"owner")}function dl(e){return $t(e,"clientMetadata")}function ff(e,t){let i=e.projectId;return e.isDefaultDatabase||(i+="."+e.database),"firestore/"+t+"/"+i+"/"}var fp=class e{constructor(t,i,n,r){this.targetId=t,this.fromCache=i,this.qi=n,this.Qi=r}static Ki(t,i){let n=Y(),r=Y();for(let o of i.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new e(t,i.fromCache,n,r)}};var gp=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var Gl=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Nu()?8:Ai.v(Jo())>0?6:4}()}initialize(t,i){this.zi=t,this.indexManager=i,this.$i=!0}getDocumentsMatchingQuery(t,i,n,r){let o={result:null};return this.ji(t,i).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(t,i,r,n).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new gp;return this.Ji(t,i,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(t,i,s,a.size)})}).next(()=>o.result)}Yi(t,i,n,r){return n.documentReadCount<this.Wi?(Qr()<=ii.DEBUG&&x("QueryEngine","SDK will not create cache indexes for query:",Wr(i),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),p.resolve()):(Qr()<=ii.DEBUG&&x("QueryEngine","Query:",Wr(i),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(Qr()<=ii.DEBUG&&x("QueryEngine","The SDK decides to create cache indexes for query:",Wr(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,de(i))):p.resolve())}ji(t,i){if(y0(i))return p.resolve(null);let n=de(i);return this.indexManager.getIndexType(t,n).next(r=>r===0?null:(i.limit!==null&&r===1&&(i=Sl(i,null,"F"),n=de(i)),this.indexManager.getDocumentsMatchingTarget(t,n).next(o=>{let s=Y(...o);return this.zi.getDocuments(t,s).next(a=>this.indexManager.getMinOffset(t,n).next(c=>{let l=this.Zi(i,a);return this.Xi(i,l,s,c.readTime)?this.ji(t,Sl(i,null,"F")):this.es(t,l,i,c)}))})))}Hi(t,i,n,r){return y0(i)||r.isEqual(U.min())?p.resolve(null):this.zi.getDocuments(t,n).next(o=>{let s=this.Zi(i,o);return this.Xi(i,s,n,r)?p.resolve(null):(Qr()<=ii.DEBUG&&x("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Wr(i)),this.es(t,s,i,cy(r,-1)).next(a=>a))})}Zi(t,i){let n=new pt(Ty(t));return i.forEach((r,o)=>{fa(t,o)&&(n=n.add(o))}),n}Xi(t,i,n,r){if(t.limit===null)return!1;if(n.size!==i.size)return!0;let o=t.limitType==="F"?i.last():i.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ji(t,i,n){return Qr()<=ii.DEBUG&&x("QueryEngine","Using full collection scan to execute query:",Wr(i)),this.zi.getDocumentsMatchingQuery(t,i,Me.min(),n)}es(t,i,n,r){return this.zi.getDocumentsMatchingQuery(t,n,r).next(o=>(i.forEach(s=>{o=o.insert(s.key,s)}),o))}};var bp=class{constructor(t,i,n,r){this.persistence=t,this.ts=i,this.serializer=r,this.ns=new yt(W),this.rs=new mi(o=>Xn(o),ma),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(n)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Ul(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>t.collect(i,this.ns))}};function lw(e,t,i,n){return new bp(e,t,i,n)}function dw(e,t){return g(this,null,function*(){let i=D(e);return yield i.persistence.runTransaction("Handle user change","readonly",n=>{let r;return i.mutationQueue.getAllMutationBatches(n).next(o=>(r=o,i._s(t),i.mutationQueue.getAllMutationBatches(n))).next(o=>{let s=[],a=[],c=Y();for(let l of r){s.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of o){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return i.localDocuments.getDocuments(n,c).next(l=>({us:l,removedBatchIds:s,addedBatchIds:a}))})})})}function ET(e,t){let i=D(e);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{let r=t.batch.keys(),o=i.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let u=l.batch,h=u.keys(),m=p.resolve();return h.forEach(E=>{m=m.next(()=>d.getEntry(c,E)).next(w=>{let b=l.docVersions.get(E);L(b!==null),w.version.compareTo(b)<0&&(u.applyToRemoteDocument(w,l),w.isValidDocument()&&(w.setReadTime(l.commitVersion),d.addEntry(w)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(c,u))}(i,n,t,o).next(()=>o.apply(n)).next(()=>i.mutationQueue.performConsistencyCheck(n)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(n,r,t.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(a){let c=Y();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(t))).next(()=>i.localDocuments.getDocuments(n,r))})}function uw(e){let t=D(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",i=>t.Qr.getLastRemoteSnapshotVersion(i))}function AT(e,t){let i=D(e),n=t.snapshotVersion,r=i.ns;return i.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=i.os.newChangeBuffer({trackRemovals:!0});r=i.ns;let a=[];t.targetChanges.forEach((d,u)=>{let h=r.get(u);if(!h)return;a.push(i.Qr.removeMatchingKeys(o,d.removedDocuments,u).next(()=>i.Qr.addMatchingKeys(o,d.addedDocuments,u)));let m=h.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(u)!==null?m=m.withResumeToken(Gt.EMPTY_BYTE_STRING,U.min()).withLastLimboFreeSnapshotVersion(U.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,n)),r=r.insert(u,m),function(w,b,A){return w.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(h,m,d)&&a.push(i.Qr.updateTargetData(o,m))});let c=be(),l=Y();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&a.push(i.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(hw(o,s,t.documentUpdates).next(d=>{c=d.cs,l=d.ls})),!n.isEqual(U.min())){let d=i.Qr.getLastRemoteSnapshotVersion(o).next(u=>i.Qr.setTargetsMetadata(o,o.currentSequenceNumber,n));a.push(d)}return p.waitFor(a).next(()=>s.apply(o)).next(()=>i.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(i.ns=r,o))}function hw(e,t,i){let n=Y(),r=Y();return i.forEach(o=>n=n.add(o)),t.getEntries(e,n).next(o=>{let s=be();return i.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(U.min())?(t.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(c),s=s.insert(a,c)):x("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:s,ls:r}})}function kT(e,t){let i=D(e);return i.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=-1),i.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function ho(e,t){let i=D(e);return i.persistence.runTransaction("Allocate target","readwrite",n=>{let r;return i.Qr.getTargetData(n,t).next(o=>o?(r=o,p.resolve(r)):i.Qr.allocateTargetId(n).next(s=>(r=new lo(t,s,"TargetPurposeListen",n.currentSequenceNumber),i.Qr.addTargetData(n,r).next(()=>r))))}).then(n=>{let r=i.ns.get(n.targetId);return(r===null||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(i.ns=i.ns.insert(n.targetId,n),i.rs.set(t,n.targetId)),n})}function mo(e,t,i){return g(this,null,function*(){let n=D(e),r=n.ns.get(t),o=i?"readwrite":"readwrite-primary";try{i||(yield n.persistence.runTransaction("Release target",o,s=>n.persistence.referenceDelegate.removeTarget(s,r)))}catch(s){if(!mn(s))throw s;x("LocalStore",`Failed to update sequence numbers for target ${t}: ${s}`)}n.ns=n.ns.remove(t),n.rs.delete(r.target)})}function $l(e,t,i){let n=D(e),r=U.min(),o=Y();return n.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,d){let u=D(c),h=u.rs.get(d);return h!==void 0?p.resolve(u.ns.get(h)):u.Qr.getTargetData(l,d)}(n,s,de(t)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,n.Qr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>n.ts.getDocumentsMatchingQuery(s,t,i?r:U.min(),i?o:Y())).next(a=>(fw(n,Cy(t),a),{documents:a,hs:o})))}function mw(e,t){let i=D(e),n=D(i.Qr),r=i.ns.get(t);return r?Promise.resolve(r.target):i.persistence.runTransaction("Get target data","readonly",o=>n._t(o,t).next(s=>s?s.target:null))}function pw(e,t){let i=D(e),n=i.ss.get(t)||U.min();return i.persistence.runTransaction("Get new document changes","readonly",r=>i.os.getAllFromCollectionGroup(r,t,cy(n,-1),Number.MAX_SAFE_INTEGER)).then(r=>(fw(i,t,r),r))}function fw(e,t,i){let n=e.ss.get(t)||U.min();i.forEach((r,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)}),e.ss.set(t,n)}function CT(e,t,i,n){return g(this,null,function*(){let r=D(e),o=Y(),s=be();for(let l of i){let d=t.Ps(l.metadata.name);l.document&&(o=o.add(d));let u=t.Is(l);u.setReadTime(t.Ts(l.metadata.readTime)),s=s.insert(d,u)}let a=r.os.newChangeBuffer({trackRemovals:!0}),c=yield ho(r,function(d){return de(yo(nt.fromString(`__bundle__/docs/${d}`)))}(n));return r.persistence.runTransaction("Apply bundle documents","readwrite",l=>hw(l,a,s).next(d=>(a.apply(l),d)).next(d=>r.Qr.removeMatchingKeysForTargetId(l,c.targetId).next(()=>r.Qr.addMatchingKeys(l,o,c.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(l,d.cs,d.ls)).next(()=>d.cs)))})}function TT(n,r){return g(this,arguments,function*(e,t,i=Y()){let o=yield ho(e,de(mf(t.bundledQuery))),s=D(e);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=Mt(t.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.$r.saveNamedQuery(a,t);let l=o.withResumeToken(Gt.EMPTY_BYTE_STRING,c);return s.ns=s.ns.insert(l.targetId,l),s.Qr.updateTargetData(a,l).next(()=>s.Qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Qr.addMatchingKeys(a,i,o.targetId)).next(()=>s.$r.saveNamedQuery(a,t))})})}function W0(e,t){return`firestore_clients_${e}_${t}`}function H0(e,t,i){let n=`firestore_mutations_${e}_${i}`;return t.isAuthenticated()&&(n+=`_${t.uid}`),n}function om(e,t){return`firestore_targets_${e}_${t}`}var Kl=class e{constructor(t,i,n,r){this.user=t,this.batchId=i,this.state=n,this.error=r}static Es(t,i,n){let r=JSON.parse(n),o,s=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(o=new v(r.error.code,r.error.message))),s?new e(t,i,r.state,o):(Dt("SharedClientState",`Failed to parse mutation state for ID '${i}': ${n}`),null)}ds(){let t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}},Us=class e{constructor(t,i,n){this.targetId=t,this.state=i,this.error=n}static Es(t,i){let n=JSON.parse(i),r,o=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return o&&n.error&&(o=typeof n.error.message=="string"&&typeof n.error.code=="string",o&&(r=new v(n.error.code,n.error.message))),o?new e(t,n.state,r):(Dt("SharedClientState",`Failed to parse target state for ID '${t}': ${i}`),null)}ds(){let t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}},Ql=class e{constructor(t,i){this.clientId=t,this.activeTargetIds=i}static Es(t,i){let n=JSON.parse(i),r=typeof n=="object"&&n.activeTargetIds instanceof Array,o=uf();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=uy(n.activeTargetIds[s]),o=o.add(n.activeTargetIds[s]);return r?new e(t,o):(Dt("SharedClientState",`Failed to parse client data for instance '${t}': ${i}`),null)}},_p=class e{constructor(t,i){this.clientId=t,this.onlineState=i}static Es(t){let i=JSON.parse(t);return typeof i=="object"&&["Unknown","Online","Offline"].indexOf(i.onlineState)!==-1&&typeof i.clientId=="string"?new e(i.clientId,i.onlineState):(Dt("SharedClientState",`Failed to parse online state: ${t}`),null)}},ra=class{constructor(){this.activeTargetIds=uf()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}},zs=class{constructor(t,i,n,r,o){this.window=t,this.oi=i,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new yt(W),this.started=!1,this.ys=[];let s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=W0(this.persistenceKey,this.Vs),this.Ss=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new ra),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(t){return!(!t||!t.localStorage)}start(){return g(this,null,function*(){let t=yield this.syncEngine.Li();for(let n of t){if(n===this.Vs)continue;let r=this.getItem(W0(this.persistenceKey,n));if(r){let o=Ql.Es(n,r);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let i=this.storage.getItem(this.vs);if(i){let n=this.xs(i);n&&this.Os(n)}for(let n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(t){this.setItem(this.Ss,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(t){let i=!1;return this.ps.forEach((n,r)=>{r.activeTargetIds.has(t)&&(i=!0)}),i}addPendingMutation(t){this.Bs(t,"pending")}updateMutationState(t,i,n){this.Bs(t,i,n),this.Ls(t)}addLocalQueryTarget(t){let i="not-current";if(this.isActiveQueryTarget(t)){let n=this.storage.getItem(om(this.persistenceKey,t));if(n){let r=Us.Es(t,n);r&&(i=r.state)}}return this.ks.As(t),this.Ms(),i}removeLocalQueryTarget(t){this.ks.Rs(t),this.Ms()}isLocalQueryTarget(t){return this.ks.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(om(this.persistenceKey,t))}updateQueryState(t,i,n){this.qs(t,i,n)}handleUserChange(t,i,n){i.forEach(r=>{this.Ls(r)}),this.currentUser=t,n.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.Qs(t)}notifyBundleLoaded(t){this.Ks(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(t){let i=this.storage.getItem(t);return x("SharedClientState","READ",t,i),i}setItem(t,i){x("SharedClientState","SET",t,i),this.storage.setItem(t,i)}removeItem(t){x("SharedClientState","REMOVE",t),this.storage.removeItem(t)}gs(t){let i=t;if(i.storageArea===this.storage){if(x("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ws)return void Dt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>g(this,null,function*(){if(this.started){if(i.key!==null){if(this.bs.test(i.key)){if(i.newValue==null){let n=this.$s(i.key);return this.Us(n,null)}{let n=this.Ws(i.key,i.newValue);if(n)return this.Us(n.clientId,n)}}else if(this.Ds.test(i.key)){if(i.newValue!==null){let n=this.Gs(i.key,i.newValue);if(n)return this.zs(n)}}else if(this.Cs.test(i.key)){if(i.newValue!==null){let n=this.js(i.key,i.newValue);if(n)return this.Hs(n)}}else if(i.key===this.vs){if(i.newValue!==null){let n=this.xs(i.newValue);if(n)return this.Os(n)}}else if(i.key===this.Ss){let n=function(o){let s=Ae._e;if(o!=null)try{let a=JSON.parse(o);L(typeof a=="number"),s=a}catch(a){Dt("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(i.newValue);n!==Ae._e&&this.sequenceNumberHandler(n)}else if(i.key===this.Fs){let n=this.Js(i.newValue);yield Promise.all(n.map(r=>this.syncEngine.Ys(r)))}}}else this.ys.push(i)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(t,i,n){let r=new Kl(this.currentUser,t,i,n),o=H0(this.persistenceKey,this.currentUser,t);this.setItem(o,r.ds())}Ls(t){let i=H0(this.persistenceKey,this.currentUser,t);this.removeItem(i)}Qs(t){let i={clientId:this.Vs,onlineState:t};this.storage.setItem(this.vs,JSON.stringify(i))}qs(t,i,n){let r=om(this.persistenceKey,t),o=new Us(t,i,n);this.setItem(r,o.ds())}Ks(t){let i=JSON.stringify(Array.from(t));this.setItem(this.Fs,i)}$s(t){let i=this.bs.exec(t);return i?i[1]:null}Ws(t,i){let n=this.$s(t);return Ql.Es(n,i)}Gs(t,i){let n=this.Ds.exec(t),r=Number(n[1]),o=n[2]!==void 0?n[2]:null;return Kl.Es(new Ot(o),r,i)}js(t,i){let n=this.Cs.exec(t),r=Number(n[1]);return Us.Es(r,i)}xs(t){return _p.Es(t)}Js(t){return JSON.parse(t)}zs(t){return g(this,null,function*(){if(t.user.uid===this.currentUser.uid)return this.syncEngine.Zs(t.batchId,t.state,t.error);x("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})}Hs(t){return this.syncEngine.Xs(t.targetId,t.state,t.error)}Us(t,i){let n=i?this.ps.insert(t,i):this.ps.remove(t),r=this.Ns(this.ps),o=this.Ns(n),s=[],a=[];return o.forEach(c=>{r.has(c)||s.push(c)}),r.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.eo(s,a).then(()=>{this.ps=n})}Os(t){this.ps.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Ns(t){let i=uf();return t.forEach((n,r)=>{i=i.unionWith(r.activeTargetIds)}),i}},Wl=class{constructor(){this.no=new ra,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,n){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,i,n){this.ro[t]=i}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new ra,Promise.resolve()}handleUserChange(t,i,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var vp=class{io(t){}shutdown(){}};var Hl=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){x("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let t of this.uo)t(0)}ao(){x("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ul=null;function sm(){return ul===null?ul=function(){return 268435456+Math.round(2147483648*Math.random())}():ul++,"0x"+ul.toString(16)}var ST={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var yp=class{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}onMessage(t){this.Ao=t}close(){this.ho()}send(t){this.lo(t)}Ro(){this.Io()}Vo(t){this.Eo(t)}mo(t){this.Ao(t)}};var ne="WebChannelConnection",wp=class extends class{constructor(i){this.databaseInfo=i,this.databaseId=i.databaseId;let n=i.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=n+"://"+i.host,this.po=`projects/${r}/databases/${o}`,this.yo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get wo(){return!1}So(i,n,r,o,s){let a=sm(),c=this.bo(i,n.toUriEncodedString());x("RestConnection",`Sending RPC '${i}' ${a}:`,c,r);let l={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(l,o,s),this.Co(i,c,l,r).then(d=>(x("RestConnection",`Received RPC '${i}' ${a}: `,d),d),d=>{throw Re("RestConnection",`RPC '${i}' ${a} failed with error: `,d,"url: ",c,"request:",r),d})}vo(i,n,r,o,s,a){return this.So(i,n,r,o,s)}Do(i,n,r){i["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+vo}(),i["Content-Type"]="text/plain",this.databaseInfo.appId&&(i["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,s)=>i[s]=o),r&&r.headers.forEach((o,s)=>i[s]=o)}bo(i,n){let r=ST[i];return`${this.fo}/v1/${n}:${r}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Co(t,i,n,r){let o=sm();return new Promise((s,a)=>{let c=new r0;c.setWithCredentials(!0),c.listenOnce(i0.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case al.NO_ERROR:let d=c.getResponseJson();x(ne,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(d)),s(d);break;case al.TIMEOUT:x(ne,`RPC '${t}' ${o} timed out`),a(new v(f.DEADLINE_EXCEEDED,"Request time out"));break;case al.HTTP_ERROR:let u=c.getStatus();if(x(ne,`RPC '${t}' ${o} failed with status:`,u,"response text:",c.getResponseText()),u>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let m=h?.error;if(m&&m.status&&m.message){let E=function(b){let A=b.toLowerCase().replace(/_/g,"-");return Object.values(f).indexOf(A)>=0?A:f.UNKNOWN}(m.status);a(new v(E,m.message))}else a(new v(f.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new v(f.UNAVAILABLE,"Connection failed."));break;default:P()}}finally{x(ne,`RPC '${t}' ${o} completed.`)}});let l=JSON.stringify(r);x(ne,`RPC '${t}' ${o} sending request:`,r),c.send(i,"POST",l,n,15)})}Fo(t,i,n){let r=sm(),o=[this.fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=t0(),a=e0(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,i,n),c.encodeInitMessageHeaders=!0;let d=o.join("");x(ne,`Creating RPC '${t}' stream ${r}: ${d}`,c);let u=s.createWebChannel(d,c),h=!1,m=!1,E=new yp({lo:b=>{m?x(ne,`Not sending because RPC '${t}' stream ${r} is closed:`,b):(h||(x(ne,`Opening RPC '${t}' stream ${r} transport.`),u.open(),h=!0),x(ne,`RPC '${t}' stream ${r} sending:`,b),u.send(b))},ho:()=>u.close()}),w=(b,A,q)=>{b.listen(A,N=>{try{q(N)}catch(z){setTimeout(()=>{throw z},0)}})};return w(u,Rs.EventType.OPEN,()=>{m||x(ne,`RPC '${t}' stream ${r} transport opened.`)}),w(u,Rs.EventType.CLOSE,()=>{m||(m=!0,x(ne,`RPC '${t}' stream ${r} transport closed`),E.Vo())}),w(u,Rs.EventType.ERROR,b=>{m||(m=!0,Re(ne,`RPC '${t}' stream ${r} transport errored:`,b),E.Vo(new v(f.UNAVAILABLE,"The operation could not be completed")))}),w(u,Rs.EventType.MESSAGE,b=>{var A;if(!m){let q=b.data[0];L(!!q);let N=q,z=N.error||((A=N[0])===null||A===void 0?void 0:A.error);if(z){x(ne,`RPC '${t}' stream ${r} received error:`,z);let H=z.status,et=function(WE){let db=Nt[WE];if(db!==void 0)return zy(db)}(H),At=z.message;et===void 0&&(et=f.INTERNAL,At="Unknown error status: "+H+" with message "+z.message),m=!0,E.Vo(new v(et,At)),u.close()}else x(ne,`RPC '${t}' stream ${r} received:`,q),E.mo(q)}}),w(a,n0.STAT_EVENT,b=>{b.stat===im.PROXY?x(ne,`RPC '${t}' stream ${r} detected buffering proxy`):b.stat===im.NOPROXY&&x(ne,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{E.Ro()},0),E}};function gw(){return typeof window<"u"?window:null}function gl(){return typeof document<"u"?document:null}function ga(e){return new Lm(e,!0)}var oa=class{constructor(t,i,n=1e3,r=1.5,o=6e4){this.oi=t,this.timerId=i,this.Mo=n,this.xo=r,this.Oo=o,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(t){this.cancel();let i=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),r=Math.max(0,i-n);r>0&&x("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.No} ms, delay with jitter: ${i} ms, last attempt: ${n} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Lo=Date.now(),t())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}};var Yl=class{constructor(t,i,n,r,o,s,a,c){this.oi=t,this.$o=n,this.Uo=r,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new oa(t,i)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return g(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(t){this.n_(),this.stream.send(t)}e_(){return g(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(t,i){return g(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,t!==4?this.jo.reset():i&&i.code===f.RESOURCE_EXHAUSTED?(Dt(i.toString()),Dt("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):i&&i.code===f.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,yield this.listener.To(i)})}i_(){}auth(){this.state=1;let t=this.s_(this.Wo),i=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,r])=>{this.Wo===i&&this.o_(n,r)},n=>{t(()=>{let r=new v(f.UNKNOWN,"Fetching auth token failed: "+n.message);return this.__(r)})})}o_(t,i){let n=this.s_(this.Wo);this.stream=this.a_(t,i),this.stream.Po(()=>{n(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(r=>{n(()=>this.__(r))}),this.stream.onMessage(r=>{n(()=>this.onMessage(r))})}Yo(){this.state=5,this.jo.qo(()=>g(this,null,function*(){this.state=0,this.start()}))}__(t){return x("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}s_(t){return i=>{this.oi.enqueueAndForget(()=>this.Wo===t?i():(x("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},xp=class extends Yl{constructor(t,i,n,r,o,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,n,r,s),this.serializer=o}a_(t,i){return this.connection.Fo("Listen",t,i)}onMessage(t){this.jo.reset();let i=mT(this.serializer,t),n=function(o){if(!("targetChange"in o))return U.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?U.min():s.readTime?Mt(s.readTime):U.min()}(t);return this.listener.u_(i,n)}c_(t){let i={};i.database=Um(this.serializer),i.addTarget=function(o,s){let a,c=s.target;if(a=Cl(c)?{documents:Yy(o,c)}:{query:Xy(o,c).ut},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Gy(o,s.resumeToken);let l=Bm(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(U.min())>0){a.readTime=co(o,s.snapshotVersion.toTimestamp());let l=Bm(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);let n=fT(this.serializer,t);n&&(i.labels=n),this.t_(i)}l_(t){let i={};i.database=Um(this.serializer),i.removeTarget=t,this.t_(i)}},Ip=class extends Yl{constructor(t,i,n,r,o,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,n,r,s),this.serializer=o,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(t,i){return this.connection.Fo("Write",t,i)}onMessage(t){if(L(!!t.streamToken),this.lastStreamToken=t.streamToken,this.h_){this.jo.reset();let i=pT(t.writeResults,t.commitTime),n=Mt(t.commitTime);return this.listener.T_(n,i)}return L(!t.writeResults||t.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let t={};t.database=Um(this.serializer),this.t_(t)}I_(t){let i={streamToken:this.lastStreamToken,writes:t.map(n=>ea(this.serializer,n))};this.t_(i)}};var Ep=class extends class{}{constructor(t,i,n,r){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new v(f.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,i,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(t,jm(i,n),r,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===f.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new v(f.UNKNOWN,o.toString())})}vo(t,i,n,r,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(t,jm(i,n),r,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===f.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new v(f.UNKNOWN,s.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var Ap=class{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(t){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.y_("Offline")))}set(t){this.b_(),this.m_=0,t==="Online"&&(this.g_=!1),this.y_(t)}y_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}w_(t){let i=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Dt(i),this.g_=!1):x("OnlineStateTracker",i)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var kp=class{constructor(t,i,n,r,o){this.localStore=t,this.datastore=i,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(s=>{n.enqueueAndForget(()=>g(this,null,function*(){pn(this)&&(x("RemoteStore","Restarting streams for network reachability change."),yield function(c){return g(this,null,function*(){let l=D(c);l.v_.add(4),yield wo(l),l.x_.set("Unknown"),l.v_.delete(4),yield ba(l)})}(this))}))}),this.x_=new Ap(n,r)}};function ba(e){return g(this,null,function*(){if(pn(e))for(let t of e.F_)yield t(!0)})}function wo(e){return g(this,null,function*(){for(let t of e.F_)yield t(!1)})}function fd(e,t){let i=D(e);i.C_.has(t.targetId)||(i.C_.set(t.targetId,t),_f(i)?bf(i):Io(i).Jo()&&gf(i,t))}function sa(e,t){let i=D(e),n=Io(i);i.C_.delete(t),n.Jo()&&bw(i,t),i.C_.size===0&&(n.Jo()?n.Xo():pn(i)&&i.x_.set("Unknown"))}function gf(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(U.min())>0){let i=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}Io(e).c_(t)}function bw(e,t){e.O_.Oe(t),Io(e).l_(t)}function bf(e){e.O_=new Vm({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Io(e).start(),e.x_.p_()}function _f(e){return pn(e)&&!Io(e).Ho()&&e.C_.size>0}function pn(e){return D(e).v_.size===0}function _w(e){e.O_=void 0}function DT(e){return g(this,null,function*(){e.C_.forEach((t,i)=>{gf(e,t)})})}function RT(e,t){return g(this,null,function*(){_w(e),_f(e)?(e.x_.S_(t),bf(e)):e.x_.set("Unknown")})}function MT(e,t,i){return g(this,null,function*(){if(e.x_.set("Online"),t instanceof Rl&&t.state===2&&t.cause)try{yield function(r,o){return g(this,null,function*(){let s=o.cause;for(let a of o.targetIds)r.C_.has(a)&&(yield r.remoteSyncer.rejectListen(a,s),r.C_.delete(a),r.O_.removeTarget(a))})}(e,t)}catch(n){x("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),yield Xl(e,n)}else if(t instanceof eo?e.O_.$e(t):t instanceof Dl?e.O_.Je(t):e.O_.Ge(t),!i.isEqual(U.min()))try{let n=yield uw(e.localStore);i.compareTo(n)>=0&&(yield function(o,s){let a=o.O_.it(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=o.C_.get(l);d&&o.C_.set(l,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let d=o.C_.get(c);if(!d)return;o.C_.set(c,d.withResumeToken(Gt.EMPTY_BYTE_STRING,d.snapshotVersion)),bw(o,c);let u=new lo(d.target,c,l,d.sequenceNumber);gf(o,u)}),o.remoteSyncer.applyRemoteEvent(a)}(e,i))}catch(n){x("RemoteStore","Failed to raise snapshot:",n),yield Xl(e,n)}})}function Xl(e,t,i){return g(this,null,function*(){if(!mn(t))throw t;e.v_.add(1),yield wo(e),e.x_.set("Offline"),i||(i=()=>uw(e.localStore)),e.asyncQueue.enqueueRetryable(()=>g(this,null,function*(){x("RemoteStore","Retrying IndexedDB access"),yield i(),e.v_.delete(1),yield ba(e)}))})}function vw(e,t){return t().catch(i=>Xl(e,i,t))}function xo(e){return g(this,null,function*(){let t=D(e),i=un(t),n=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;PT(t);)try{let r=yield kT(t.localStore,n);if(r===null){t.D_.length===0&&i.Xo();break}n=r.batchId,NT(t,r)}catch(r){yield Xl(t,r)}yw(t)&&ww(t)})}function PT(e){return pn(e)&&e.D_.length<10}function NT(e,t){e.D_.push(t);let i=un(e);i.Jo()&&i.P_&&i.I_(t.mutations)}function yw(e){return pn(e)&&!un(e).Ho()&&e.D_.length>0}function ww(e){un(e).start()}function FT(e){return g(this,null,function*(){un(e).d_()})}function OT(e){return g(this,null,function*(){let t=un(e);for(let i of e.D_)t.I_(i.mutations)})}function VT(e,t,i){return g(this,null,function*(){let n=e.D_.shift(),r=Nm.from(n,t,i);yield vw(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),yield xo(e)})}function LT(e,t){return g(this,null,function*(){t&&un(e).P_&&(yield function(n,r){return g(this,null,function*(){if(function(s){return Uy(s)&&s!==f.ABORTED}(r.code)){let o=n.D_.shift();un(n).Zo(),yield vw(n,()=>n.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield xo(n)}})}(e,t)),yw(e)&&ww(e)})}function Y0(e,t){return g(this,null,function*(){let i=D(e);i.asyncQueue.verifyOperationInProgress(),x("RemoteStore","RemoteStore received new credentials");let n=pn(i);i.v_.add(3),yield wo(i),n&&i.x_.set("Unknown"),yield i.remoteSyncer.handleCredentialChange(t),i.v_.delete(3),yield ba(i)})}function Cp(e,t){return g(this,null,function*(){let i=D(e);t?(i.v_.delete(2),yield ba(i)):t||(i.v_.add(2),yield wo(i),i.x_.set("Unknown"))})}function Io(e){return e.N_||(e.N_=function(i,n,r){let o=D(i);return o.R_(),new xp(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(e.datastore,e.asyncQueue,{Po:DT.bind(null,e),To:RT.bind(null,e),u_:MT.bind(null,e)}),e.F_.push(t=>g(this,null,function*(){t?(e.N_.Zo(),_f(e)?bf(e):e.x_.set("Unknown")):(yield e.N_.stop(),_w(e))}))),e.N_}function un(e){return e.B_||(e.B_=function(i,n,r){let o=D(i);return o.R_(),new Ip(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(e.datastore,e.asyncQueue,{Po:FT.bind(null,e),To:LT.bind(null,e),E_:OT.bind(null,e),T_:VT.bind(null,e)}),e.F_.push(t=>g(this,null,function*(){t?(e.B_.Zo(),yield xo(e)):(yield e.B_.stop(),e.D_.length>0&&(x("RemoteStore",`Stopping write stream with ${e.D_.length} pending writes`),e.D_=[]))}))),e.B_}var Tp=class e{constructor(t,i,n,r,o){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=n,this.op=r,this.removalCallback=o,this.deferred=new Vt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,i,n,r,o){let s=Date.now()+n,a=new e(t,i,s,r,o);return a.start(n),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new v(f.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Eo(e,t){if(Dt("AsyncQueue",`${t}: ${e}`),mn(e))return new v(f.UNAVAILABLE,`${t}: ${e}`);throw e}var Zl=class e{constructor(t){this.comparator=t?(i,n)=>t(i,n)||T.comparator(i.key,n.key):(i,n)=>T.comparator(i.key,n.key),this.keyedMap=Os(),this.sortedSet=new yt(this.comparator)}static emptySet(t){return new e(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((i,n)=>(t(i),!1))}add(t){let i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){let i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let i=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;i.hasNext();){let r=i.getNext().key,o=n.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let t=[];return this.forEach(i=>{t.push(i.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,i){let n=new e;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=i,n}};var Jl=class{constructor(){this.L_=new yt(T.comparator)}track(t){let i=t.doc.key,n=this.L_.get(i);n?t.type!==0&&n.type===3?this.L_=this.L_.insert(i,t):t.type===3&&n.type!==1?this.L_=this.L_.insert(i,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.L_=this.L_.insert(i,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.L_=this.L_.insert(i,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.L_=this.L_.remove(i):t.type===1&&n.type===2?this.L_=this.L_.insert(i,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.L_=this.L_.insert(i,{type:2,doc:t.doc}):P():this.L_=this.L_.insert(i,t)}k_(){let t=[];return this.L_.inorderTraversal((i,n)=>{t.push(n)}),t}},po=class e{constructor(t,i,n,r,o,s,a,c,l){this.query=t,this.docs=i,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(t,i,n,r,o){let s=[];return i.forEach(a=>{s.push({type:0,doc:a})}),new e(t,i,Zl.emptySet(i),s,n,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&pa(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;let i=this.docChanges,n=t.docChanges;if(i.length!==n.length)return!1;for(let r=0;r<i.length;r++)if(i[r].type!==n[r].type||!i[r].doc.isEqual(n[r].doc))return!1;return!0}};var Sp=class{constructor(){this.q_=void 0,this.Q_=[]}},Dp=class{constructor(){this.queries=new mi(t=>ky(t),pa),this.onlineState="Unknown",this.K_=new Set}};function vf(e,t){return g(this,null,function*(){let i=D(e),n=t.query,r=!1,o=i.queries.get(n);if(o||(r=!0,o=new Sp),r)try{o.q_=yield i.onListen(n)}catch(s){let a=Eo(s,`Initialization of query '${Wr(t.query)}' failed`);return void t.onError(a)}i.queries.set(n,o),o.Q_.push(t),t.U_(i.onlineState),o.q_&&t.W_(o.q_)&&wf(i)})}function yf(e,t){return g(this,null,function*(){let i=D(e),n=t.query,r=!1,o=i.queries.get(n);if(o){let s=o.Q_.indexOf(t);s>=0&&(o.Q_.splice(s,1),r=o.Q_.length===0)}if(r)return i.queries.delete(n),i.onUnlisten(n)})}function BT(e,t){let i=D(e),n=!1;for(let r of t){let o=r.query,s=i.queries.get(o);if(s){for(let a of s.Q_)a.W_(r)&&(n=!0);s.q_=r}}n&&wf(i)}function jT(e,t,i){let n=D(e),r=n.queries.get(t);if(r)for(let o of r.Q_)o.onError(i);n.queries.delete(t)}function wf(e){e.K_.forEach(t=>{t.next()})}var aa=class{constructor(t,i,n){this.query=t,this.G_=i,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(t){if(!this.options.includeMetadataChanges){let n=[];for(let r of t.docChanges)r.type!==3&&n.push(r);t=new po(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.z_?this.H_(t)&&(this.G_.next(t),i=!0):this.J_(t,this.onlineState)&&(this.Y_(t),i=!0),this.j_=t,i}onError(t){this.G_.error(t)}U_(t){this.onlineState=t;let i=!1;return this.j_&&!this.z_&&this.J_(this.j_,t)&&(this.Y_(this.j_),i=!0),i}J_(t,i){if(!t.fromCache)return!0;let n=i!=="Offline";return(!this.options.Z_||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||i==="Offline")}H_(t){if(t.docChanges.length>0)return!0;let i=this.j_&&this.j_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}Y_(t){t=po.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.z_=!0,this.G_.next(t)}};var Rp=class{constructor(t,i){this.X_=t,this.byteLength=i}ea(){return"metadata"in this.X_}};var td=class{constructor(t){this.serializer=t}Ps(t){return li(this.serializer,t)}Is(t){return t.metadata.exists?Hy(this.serializer,t.document,!1):Lt.newNoDocument(this.Ps(t.metadata.name),this.Ts(t.metadata.readTime))}Ts(t){return Mt(t)}},Mp=class{constructor(t,i,n){this.ta=t,this.localStore=i,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=xw(t)}na(t){this.progress.bytesLoaded+=t.byteLength;let i=this.progress.documentsLoaded;if(t.X_.namedQuery)this.queries.push(t.X_.namedQuery);else if(t.X_.documentMetadata){this.documents.push({metadata:t.X_.documentMetadata}),t.X_.documentMetadata.exists||++i;let n=nt.fromString(t.X_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else t.X_.document&&(this.documents[this.documents.length-1].document=t.X_.document,++i);return i!==this.progress.documentsLoaded?(this.progress.documentsLoaded=i,Object.assign({},this.progress)):null}ra(t){let i=new Map,n=new td(this.serializer);for(let r of t)if(r.metadata.queries){let o=n.Ps(r.metadata.name);for(let s of r.metadata.queries){let a=(i.get(s)||Y()).add(o);i.set(s,a)}}return i}complete(){return g(this,null,function*(){let t=yield CT(this.localStore,new td(this.serializer),this.documents,this.ta.id),i=this.ra(this.documents);for(let n of this.queries)yield TT(this.localStore,n,i.get(n.name));return this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:t}})}};function xw(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var ed=class{constructor(t){this.key=t}},id=class{constructor(t){this.key=t}},nd=class{constructor(t,i){this.query=t,this.oa=i,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=Y(),this.mutatedKeys=Y(),this.ua=Ty(t),this.ca=new Zl(this.ua)}get la(){return this.oa}ha(t,i){let n=i?i.Pa:new Jl,r=i?i.ca:this.ca,o=i?i.mutatedKeys:this.mutatedKeys,s=r,a=!1,c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,l=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((d,u)=>{let h=r.get(d),m=fa(this.query,u)?u:null,E=!!h&&this.mutatedKeys.has(h.key),w=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),b=!1;h&&m?h.data.isEqual(m.data)?E!==w&&(n.track({type:3,doc:m}),b=!0):this.Ia(h,m)||(n.track({type:2,doc:m}),b=!0,(c&&this.ua(m,c)>0||l&&this.ua(m,l)<0)&&(a=!0)):!h&&m?(n.track({type:0,doc:m}),b=!0):h&&!m&&(n.track({type:1,doc:h}),b=!0,(c||l)&&(a=!0)),b&&(m?(s=s.add(m),o=w?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),n.track({type:1,doc:d})}return{ca:s,Pa:n,Xi:a,mutatedKeys:o}}Ia(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,n,r){let o=this.ca;this.ca=t.ca,this.mutatedKeys=t.mutatedKeys;let s=t.Pa.k_();s.sort((d,u)=>function(m,E){let w=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return P()}};return w(m)-w(E)}(d.type,u.type)||this.ua(d.doc,u.doc)),this.Ta(n),r=r!=null&&r;let a=i&&!r?this.Ea():[],c=this.aa.size===0&&this.current&&!r?1:0,l=c!==this._a;return this._a=c,s.length!==0||l?{snapshot:new po(this.query,t.ca,o,s,t.mutatedKeys,c===0,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Jl,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(t){return!this.oa.has(t)&&!!this.ca.has(t)&&!this.ca.get(t).hasLocalMutations}Ta(t){t&&(t.addedDocuments.forEach(i=>this.oa=this.oa.add(i)),t.modifiedDocuments.forEach(i=>{}),t.removedDocuments.forEach(i=>this.oa=this.oa.delete(i)),this.current=t.current)}Ea(){if(!this.current)return[];let t=this.aa;this.aa=Y(),this.ca.forEach(n=>{this.Aa(n.key)&&(this.aa=this.aa.add(n.key))});let i=[];return t.forEach(n=>{this.aa.has(n)||i.push(new id(n))}),this.aa.forEach(n=>{t.has(n)||i.push(new ed(n))}),i}Ra(t){this.oa=t.hs,this.aa=Y();let i=this.ha(t.documents);return this.applyChanges(i,!0)}Va(){return po.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}},Pp=class{constructor(t,i,n){this.query=t,this.targetId=i,this.view=n}},Np=class{constructor(t){this.key=t,this.ma=!1}},Fp=class{constructor(t,i,n,r,o,s){this.localStore=t,this.remoteStore=i,this.eventManager=n,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new mi(a=>ky(a),pa),this.pa=new Map,this.ya=new Set,this.wa=new yt(T.comparator),this.Sa=new Map,this.ba=new na,this.Da={},this.Ca=new Map,this.va=uo.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}};function UT(e,t){return g(this,null,function*(){let i=kf(e),n,r,o=i.ga.get(t);if(o)n=o.targetId,i.sharedClientState.addLocalQueryTarget(n),r=o.view.Va();else{let s=yield ho(i.localStore,de(t)),a=i.sharedClientState.addLocalQueryTarget(s.targetId);n=s.targetId,r=yield xf(i,t,n,a==="current",s.resumeToken),i.isPrimaryClient&&fd(i.remoteStore,s)}return r})}function xf(e,t,i,n,r){return g(this,null,function*(){e.Ma=(u,h,m)=>function(w,b,A,q){return g(this,null,function*(){let N=b.view.ha(A);N.Xi&&(N=yield $l(w.localStore,b.query,!1).then(({documents:At})=>b.view.ha(At,N)));let z=q&&q.targetChanges.get(b.targetId),H=q&&q.targetMismatches.get(b.targetId)!=null,et=b.view.applyChanges(N,w.isPrimaryClient,z,H);return Op(w,b.targetId,et.da),et.snapshot})}(e,u,h,m);let o=yield $l(e.localStore,t,!0),s=new nd(t,o.hs),a=s.ha(o.documents),c=Js.createSynthesizedTargetChangeForCurrentChange(i,n&&e.onlineState!=="Offline",r),l=s.applyChanges(a,e.isPrimaryClient,c);Op(e,i,l.da);let d=new Pp(t,i,s);return e.ga.set(t,d),e.pa.has(i)?e.pa.get(i).push(t):e.pa.set(i,[t]),l.snapshot})}function zT(e,t){return g(this,null,function*(){let i=D(e),n=i.ga.get(t),r=i.pa.get(n.targetId);if(r.length>1)return i.pa.set(n.targetId,r.filter(o=>!pa(o,t))),void i.ga.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(n.targetId),i.sharedClientState.isActiveQueryTarget(n.targetId)||(yield mo(i.localStore,n.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(n.targetId),sa(i.remoteStore,n.targetId),fo(i,n.targetId)}).catch(hn))):(fo(i,n.targetId),yield mo(i.localStore,n.targetId,!0))})}function qT(e,t,i){return g(this,null,function*(){let n=Cf(e);try{let r=yield function(s,a){let c=D(s),l=Et.now(),d=a.reduce((m,E)=>m.add(E.key),Y()),u,h;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let E=be(),w=Y();return c.os.getEntries(m,d).next(b=>{E=b,E.forEach((A,q)=>{q.isValidDocument()||(w=w.add(A))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,E)).next(b=>{u=b;let A=[];for(let q of a){let N=sT(q,u.get(q.key).overlayedDocument);N!=null&&A.push(new Ge(q.key,N,vy(N.value.mapValue),St.exists(!0)))}return c.mutationQueue.addMutationBatch(m,l,A,a)}).next(b=>{h=b;let A=b.applyToLocalDocumentSet(u,w);return c.documentOverlayCache.saveOverlays(m,b.batchId,A)})}).then(()=>({batchId:h.batchId,changes:Dy(u)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(r.batchId),function(s,a,c){let l=s.Da[s.currentUser.toKey()];l||(l=new yt(W)),l=l.insert(a,c),s.Da[s.currentUser.toKey()]=l}(n,r.batchId,i),yield Di(n,r.changes),yield xo(n.remoteStore)}catch(r){let o=Eo(r,"Failed to persist write");i.reject(o)}})}function Iw(e,t){return g(this,null,function*(){let i=D(e);try{let n=yield AT(i.localStore,t);t.targetChanges.forEach((r,o)=>{let s=i.Sa.get(o);s&&(L(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?s.ma=!0:r.modifiedDocuments.size>0?L(s.ma):r.removedDocuments.size>0&&(L(s.ma),s.ma=!1))}),yield Di(i,n,t)}catch(n){yield hn(n)}})}function X0(e,t,i){let n=D(e);if(n.isPrimaryClient&&i===0||!n.isPrimaryClient&&i===1){let r=[];n.ga.forEach((o,s)=>{let a=s.view.U_(t);a.snapshot&&r.push(a.snapshot)}),function(s,a){let c=D(s);c.onlineState=a;let l=!1;c.queries.forEach((d,u)=>{for(let h of u.Q_)h.U_(a)&&(l=!0)}),l&&wf(c)}(n.eventManager,t),r.length&&n.fa.u_(r),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}function GT(e,t,i){return g(this,null,function*(){let n=D(e);n.sharedClientState.updateQueryState(t,"rejected",i);let r=n.Sa.get(t),o=r&&r.key;if(o){let s=new yt(T.comparator);s=s.insert(o,Lt.newNoDocument(o,U.min()));let a=Y().add(o),c=new Zs(U.min(),new Map,new yt(W),s,a);yield Iw(n,c),n.wa=n.wa.remove(o),n.Sa.delete(t),Af(n)}else yield mo(n.localStore,t,!1).then(()=>fo(n,t,i)).catch(hn)})}function $T(e,t){return g(this,null,function*(){let i=D(e),n=t.batch.batchId;try{let r=yield ET(i.localStore,t);Ef(i,n,null),If(i,n),i.sharedClientState.updateMutationState(n,"acknowledged"),yield Di(i,r)}catch(r){yield hn(r)}})}function KT(e,t,i){return g(this,null,function*(){let n=D(e);try{let r=yield function(s,a){let c=D(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(u=>(L(u!==null),d=u.keys(),c.mutationQueue.removeMutationBatch(l,u))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(n.localStore,t);Ef(n,t,i),If(n,t),n.sharedClientState.updateMutationState(t,"rejected",i),yield Di(n,r)}catch(r){yield hn(r)}})}function QT(e,t){return g(this,null,function*(){let i=D(e);pn(i.remoteStore)||x("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let n=yield function(s){let a=D(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(i.localStore);if(n===-1)return void t.resolve();let r=i.Ca.get(n)||[];r.push(t),i.Ca.set(n,r)}catch(n){let r=Eo(n,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}})}function If(e,t){(e.Ca.get(t)||[]).forEach(i=>{i.resolve()}),e.Ca.delete(t)}function Ef(e,t,i){let n=D(e),r=n.Da[n.currentUser.toKey()];if(r){let o=r.get(t);o&&(i?o.reject(i):o.resolve(),r=r.remove(t)),n.Da[n.currentUser.toKey()]=r}}function fo(e,t,i=null){e.sharedClientState.removeLocalQueryTarget(t);for(let n of e.pa.get(t))e.ga.delete(n),i&&e.fa.xa(n,i);e.pa.delete(t),e.isPrimaryClient&&e.ba.Vr(t).forEach(n=>{e.ba.containsKey(n)||Ew(e,n)})}function Ew(e,t){e.ya.delete(t.path.canonicalString());let i=e.wa.get(t);i!==null&&(sa(e.remoteStore,i),e.wa=e.wa.remove(t),e.Sa.delete(i),Af(e))}function Op(e,t,i){for(let n of i)n instanceof ed?(e.ba.addReference(n.key,t),WT(e,n)):n instanceof id?(x("SyncEngine","Document no longer in limbo: "+n.key),e.ba.removeReference(n.key,t),e.ba.containsKey(n.key)||Ew(e,n.key)):P()}function WT(e,t){let i=t.key,n=i.path.canonicalString();e.wa.get(i)||e.ya.has(n)||(x("SyncEngine","New document in limbo: "+i),e.ya.add(n),Af(e))}function Af(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){let t=e.ya.values().next().value;e.ya.delete(t);let i=new T(nt.fromString(t)),n=e.va.next();e.Sa.set(n,new Np(i)),e.wa=e.wa.insert(i,n),fd(e.remoteStore,new lo(de(yo(i.path)),n,"TargetPurposeLimboResolution",Ae._e))}}function Di(e,t,i){return g(this,null,function*(){let n=D(e),r=[],o=[],s=[];n.ga.isEmpty()||(n.ga.forEach((a,c)=>{s.push(n.Ma(c,t,i).then(l=>{if((l||i)&&n.isPrimaryClient&&n.sharedClientState.updateQueryState(c.targetId,l?.fromCache?"not-current":"current"),l){r.push(l);let d=fp.Ki(c.targetId,l);o.push(d)}}))}),yield Promise.all(s),n.fa.u_(r),yield function(c,l){return g(this,null,function*(){let d=D(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>p.forEach(l,h=>p.forEach(h.qi,m=>d.persistence.referenceDelegate.addReference(u,h.targetId,m)).next(()=>p.forEach(h.Qi,m=>d.persistence.referenceDelegate.removeReference(u,h.targetId,m)))))}catch(u){if(!mn(u))throw u;x("LocalStore","Failed to update sequence numbers: "+u)}for(let u of l){let h=u.targetId;if(!u.fromCache){let m=d.ns.get(h),E=m.snapshotVersion,w=m.withLastLimboFreeSnapshotVersion(E);d.ns=d.ns.insert(h,w)}}})}(n.localStore,o))})}function HT(e,t){return g(this,null,function*(){let i=D(e);if(!i.currentUser.isEqual(t)){x("SyncEngine","User change. New user:",t.toKey());let n=yield dw(i.localStore,t);i.currentUser=t,function(o,s){o.Ca.forEach(a=>{a.forEach(c=>{c.reject(new v(f.CANCELLED,s))})}),o.Ca.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),yield Di(i,n.us)}})}function YT(e,t){let i=D(e),n=i.Sa.get(t);if(n&&n.ma)return Y().add(n.key);{let r=Y(),o=i.pa.get(t);if(!o)return r;for(let s of o){let a=i.ga.get(s);r=r.unionWith(a.view.la)}return r}}function XT(e,t){return g(this,null,function*(){let i=D(e),n=yield $l(i.localStore,t.query,!0),r=t.view.Ra(n);return i.isPrimaryClient&&Op(i,t.targetId,r.da),r})}function ZT(e,t){return g(this,null,function*(){let i=D(e);return pw(i.localStore,t).then(n=>Di(i,n))})}function JT(e,t,i,n){return g(this,null,function*(){let r=D(e),o=yield function(a,c){let l=D(a),d=D(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",u=>d.vn(u,c).next(h=>h?l.localDocuments.getDocuments(u,h):p.resolve(null)))}(r.localStore,t);o!==null?(i==="pending"?yield xo(r.remoteStore):i==="acknowledged"||i==="rejected"?(Ef(r,t,n||null),If(r,t),function(a,c){D(D(a).mutationQueue).Mn(c)}(r.localStore,t)):P(),yield Di(r,o)):x("SyncEngine","Cannot apply mutation batch with id: "+t)})}function t1(e,t){return g(this,null,function*(){let i=D(e);if(kf(i),Cf(i),t===!0&&i.Fa!==!0){let n=i.sharedClientState.getAllActiveQueryTargets(),r=yield Z0(i,n.toArray());i.Fa=!0,yield Cp(i.remoteStore,!0);for(let o of r)fd(i.remoteStore,o)}else if(t===!1&&i.Fa!==!1){let n=[],r=Promise.resolve();i.pa.forEach((o,s)=>{i.sharedClientState.isLocalQueryTarget(s)?n.push(s):r=r.then(()=>(fo(i,s),mo(i.localStore,s,!0))),sa(i.remoteStore,s)}),yield r,yield Z0(i,n),function(s){let a=D(s);a.Sa.forEach((c,l)=>{sa(a.remoteStore,l)}),a.ba.mr(),a.Sa=new Map,a.wa=new yt(T.comparator)}(i),i.Fa=!1,yield Cp(i.remoteStore,!1)}})}function Z0(e,t,i){return g(this,null,function*(){let n=D(e),r=[],o=[];for(let s of t){let a,c=n.pa.get(s);if(c&&c.length!==0){a=yield ho(n.localStore,de(c[0]));for(let l of c){let d=n.ga.get(l),u=yield XT(n,d);u.snapshot&&o.push(u.snapshot)}}else{let l=yield mw(n.localStore,s);a=yield ho(n.localStore,l),yield xf(n,Aw(l),s,!1,a.resumeToken)}r.push(a)}return n.fa.u_(o),r})}function Aw(e){return Ay(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function e1(e){return function(i){return D(D(i).persistence).Li()}(D(e).localStore)}function i1(e,t,i,n){return g(this,null,function*(){let r=D(e);if(r.Fa)return void x("SyncEngine","Ignoring unexpected query state notification.");let o=r.pa.get(t);if(o&&o.length>0)switch(i){case"current":case"not-current":{let s=yield pw(r.localStore,Cy(o[0])),a=Zs.createSynthesizedRemoteEventForCurrentChange(t,i==="current",Gt.EMPTY_BYTE_STRING);yield Di(r,s,a);break}case"rejected":yield mo(r.localStore,t,!0),fo(r,t,n);break;default:P()}})}function n1(e,t,i){return g(this,null,function*(){let n=kf(e);if(n.Fa){for(let r of t){if(n.pa.has(r)){x("SyncEngine","Adding an already active target "+r);continue}let o=yield mw(n.localStore,r),s=yield ho(n.localStore,o);yield xf(n,Aw(o),s.targetId,!1,s.resumeToken),fd(n.remoteStore,s)}for(let r of i)n.pa.has(r)&&(yield mo(n.localStore,r,!1).then(()=>{sa(n.remoteStore,r),fo(n,r)}).catch(hn))}})}function kf(e){let t=D(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Iw.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=YT.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=GT.bind(null,t),t.fa.u_=BT.bind(null,t.eventManager),t.fa.xa=jT.bind(null,t.eventManager),t}function Cf(e){let t=D(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=$T.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=KT.bind(null,t),t}function r1(e,t,i){let n=D(e);(function(o,s,a){return g(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(m,E){let w=D(m),b=Mt(E.createTime);return w.persistence.runTransaction("hasNewerBundle","readonly",A=>w.$r.getBundleMetadata(A,E.id)).then(A=>!!A&&A.createTime.compareTo(b)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(xw(c));let l=new Mp(c,o.localStore,s.serializer),d=yield s.Oa();for(;d;){let h=yield l.na(d);h&&a._updateProgress(h),d=yield s.Oa()}let u=yield l.complete();return yield Di(o,u.sa,void 0),yield function(m,E){let w=D(m);return w.persistence.runTransaction("Save bundle","readwrite",b=>w.$r.saveBundleMetadata(b,E))}(o.localStore,c),a._completeWith(u.progress),Promise.resolve(u.ia)}catch(c){return Re("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(n,t,i).then(r=>{n.sharedClientState.notifyBundleLoaded(r)})}var ca=class{constructor(){this.synchronizeTabs=!1}initialize(t){return g(this,null,function*(){this.serializer=ga(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),yield this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)})}createGarbageCollectionScheduler(t,i){return null}createIndexBackfillerScheduler(t,i){return null}createLocalStore(t){return lw(this.persistence,new Gl,t.initialUser,this.serializer)}createPersistence(t){return new zl(ql.Hr,this.serializer)}createSharedClientState(t){return new Wl}terminate(){return g(this,null,function*(){var t,i;(t=this.gcScheduler)===null||t===void 0||t.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var rd=class e extends ca{constructor(t,i,n){super(),this.Na=t,this.cacheSizeBytes=i,this.forceOwnership=n,this.synchronizeTabs=!1}initialize(t){return g(this,null,function*(){yield gu(e.prototype,this,"initialize").call(this,t),yield this.Na.initialize(this,t),yield Cf(this.Na.syncEngine),yield xo(this.Na.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(t){return lw(this.persistence,new Gl,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,i){let n=this.persistence.referenceDelegate.garbageCollector;return new tp(n,t.asyncQueue,i)}createIndexBackfillerScheduler(t,i){let n=new _m(i,this.persistence);return new bm(t.asyncQueue,n)}createPersistence(t){let i=ff(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?De.withCacheSize(this.cacheSizeBytes):De.DEFAULT;return new pp(this.synchronizeTabs,i,t.clientId,n,t.asyncQueue,gw(),gl(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new Wl}},Vp=class e extends rd{constructor(t,i){super(t,i,!1),this.Na=t,this.cacheSizeBytes=i,this.synchronizeTabs=!0}initialize(t){return g(this,null,function*(){yield gu(e.prototype,this,"initialize").call(this,t);let i=this.Na.syncEngine;this.sharedClientState instanceof zs&&(this.sharedClientState.syncEngine={Zs:JT.bind(null,i),Xs:i1.bind(null,i),eo:n1.bind(null,i),Li:e1.bind(null,i),Ys:ZT.bind(null,i)},yield this.sharedClientState.start()),yield this.persistence.fi(n=>g(this,null,function*(){yield t1(this.Na.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(t){let i=gw();if(!zs.D(i))throw new v(f.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let n=ff(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new zs(i,t.asyncQueue,n,t.clientId,t.initialUser)}},la=class{initialize(t,i){return g(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>X0(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=HT.bind(null,this.syncEngine),yield Cp(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Dp}()}createDatastore(t){let i=ga(t.databaseInfo.databaseId),n=function(o){return new wp(o)}(t.databaseInfo);return function(o,s,a,c){return new Ep(o,s,a,c)}(t.authCredentials,t.appCheckCredentials,n,i)}createRemoteStore(t){return function(n,r,o,s,a){return new kp(n,r,o,s,a)}(this.localStore,this.datastore,t.asyncQueue,i=>X0(this.syncEngine,i,0),function(){return Hl.D()?new Hl:new vp}())}createSyncEngine(t,i){return function(r,o,s,a,c,l,d){let u=new Fp(r,o,s,a,c,l);return d&&(u.Fa=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}terminate(){return g(this,null,function*(){var t;yield function(n){return g(this,null,function*(){let r=D(n);x("RemoteStore","RemoteStore shutting down."),r.v_.add(5),yield wo(r),r.M_.shutdown(),r.x_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()})}};function J0(e,t=10240){let i=0;return{read(){return g(this,null,function*(){if(i<e.byteLength){let r={value:e.slice(i,i+t),done:!1};return i+=t,r}return{done:!0}})},cancel(){return g(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var go=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ba(this.observer.next,t)}error(t){this.observer.error?this.Ba(this.observer.error,t):Dt("Uncaught Error in snapshot listener:",t.toString())}La(){this.muted=!0}Ba(t,i){this.muted||setTimeout(()=>{this.muted||t(i)},0)}};var Lp=class{constructor(t,i){this.ka=t,this.serializer=i,this.metadata=new Vt,this.buffer=new Uint8Array,this.qa=function(){return new TextDecoder("utf-8")}(),this.Qa().then(n=>{n&&n.ea()?this.metadata.resolve(n.X_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(n?.X_)}`))},n=>this.metadata.reject(n))}close(){return this.ka.cancel()}getMetadata(){return g(this,null,function*(){return this.metadata.promise})}Oa(){return g(this,null,function*(){return yield this.getMetadata(),this.Qa()})}Qa(){return g(this,null,function*(){let t=yield this.Ka();if(t===null)return null;let i=this.qa.decode(t),n=Number(i);isNaN(n)&&this.$a(`length string (${i}) is not valid number`);let r=yield this.Ua(n);return new Rp(JSON.parse(r),t.length+n)})}Wa(){return this.buffer.findIndex(t=>t===123)}Ka(){return g(this,null,function*(){for(;this.Wa()<0&&!(yield this.Ga()););if(this.buffer.length===0)return null;let t=this.Wa();t<0&&this.$a("Reached the end of bundle when a length string is expected.");let i=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),i})}Ua(t){return g(this,null,function*(){for(;this.buffer.length<t;)(yield this.Ga())&&this.$a("Reached the end of bundle when more is expected.");let i=this.qa.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),i})}$a(t){throw this.ka.cancel(),new Error(`Invalid bundle format: ${t}`)}Ga(){return g(this,null,function*(){let t=yield this.ka.read();if(!t.done){let i=new Uint8Array(this.buffer.length+t.value.length);i.set(this.buffer),i.set(t.value,this.buffer.length),this.buffer=i}return t.done})}};var Bp=class{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(t){return g(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new v(f.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let i=yield function(r,o){return g(this,null,function*(){let s=D(r),a={documents:o.map(u=>ta(s.serializer,u))},c=yield s.vo("BatchGetDocuments",s.serializer.databaseId,nt.emptyPath(),a,o.length),l=new Map;c.forEach(u=>{let h=hT(s.serializer,u);l.set(h.key.toString(),h)});let d=[];return o.forEach(u=>{let h=l.get(u.toString());L(!!h),d.push(h)}),d})}(this.datastore,t);return i.forEach(n=>this.recordVersion(n)),i})}set(t,i){this.write(i.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,i){try{this.write(i.toMutation(t,this.preconditionForUpdate(t)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(t.toString())}delete(t){this.write(new dn(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){return g(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let t=this.readVersions;this.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,n)=>{let r=T.fromPath(n);this.mutations.push(new Hs(r,this.precondition(r)))}),yield function(n,r){return g(this,null,function*(){let o=D(n),s={writes:r.map(a=>ea(o.serializer,a))};yield o.So("Commit",o.serializer.databaseId,nt.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(t){let i;if(t.isFoundDocument())i=t.version;else{if(!t.isNoDocument())throw P();i=U.min()}let n=this.readVersions.get(t.key.toString());if(n){if(!i.isEqual(n))throw new v(f.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),i)}precondition(t){let i=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&i?i.isEqual(U.min())?St.exists(!1):St.updateTime(i):St.none()}preconditionForUpdate(t){let i=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&i){if(i.isEqual(U.min()))throw new v(f.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return St.updateTime(i)}return St.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}};var jp=class{constructor(t,i,n,r,o){this.asyncQueue=t,this.datastore=i,this.options=n,this.updateFunction=r,this.deferred=o,this.za=n.maxAttempts,this.jo=new oa(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){this.jo.qo(()=>g(this,null,function*(){let t=new Bp(this.datastore),i=this.Ja(t);i&&i.then(n=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(n)}).catch(r=>{this.Ya(r)}))}).catch(n=>{this.Ya(n)})}))}Ja(t){try{let i=this.updateFunction(t);return!ha(i)&&i.catch&&i.then?i:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(i){return this.deferred.reject(i),null}}Ya(t){this.za>0&&this.Za(t)?(this.za-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ha(),Promise.resolve()))):this.deferred.reject(t)}Za(t){if(t.name==="FirebaseError"){let i=t.code;return i==="aborted"||i==="failed-precondition"||i==="already-exists"||!Uy(i)}return!1}};var Up=class{constructor(t,i,n,r){this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=n,this.databaseInfo=r,this.user=Ot.UNAUTHENTICATED,this.clientId=vl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,o=>g(this,null,function*(){x("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(n,o=>(x("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new v(f.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let t=new Vt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>g(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(i){let n=Eo(i,"Failed to shutdown persistence");t.reject(n)}})),t.promise}};function bl(e,t){return g(this,null,function*(){e.asyncQueue.verifyOperationInProgress(),x("FirestoreClient","Initializing OfflineComponentProvider");let i=e.configuration;yield t.initialize(i);let n=i.initialUser;e.setCredentialChangeListener(r=>g(this,null,function*(){n.isEqual(r)||(yield dw(t.localStore,r),n=r)})),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t})}function zp(e,t){return g(this,null,function*(){e.asyncQueue.verifyOperationInProgress();let i=yield Tf(e);x("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(i,e.configuration),e.setCredentialChangeListener(n=>Y0(t.remoteStore,n)),e.setAppCheckTokenChangeListener((n,r)=>Y0(t.remoteStore,r)),e._onlineComponents=t})}function kw(e){return e.name==="FirebaseError"?e.code===f.FAILED_PRECONDITION||e.code===f.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}function Tf(e){return g(this,null,function*(){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){x("FirestoreClient","Using user provided OfflineComponentProvider");try{yield bl(e,e._uninitializedComponentsProvider._offline)}catch(t){let i=t;if(!kw(i))throw i;Re("Error using user provided cache. Falling back to memory cache: "+i),yield bl(e,new ca)}}else x("FirestoreClient","Using default OfflineComponentProvider"),yield bl(e,new ca);return e._offlineComponents})}function gd(e){return g(this,null,function*(){return e._onlineComponents||(e._uninitializedComponentsProvider?(x("FirestoreClient","Using user provided OnlineComponentProvider"),yield zp(e,e._uninitializedComponentsProvider._online)):(x("FirestoreClient","Using default OnlineComponentProvider"),yield zp(e,new la))),e._onlineComponents})}function Cw(e){return Tf(e).then(t=>t.persistence)}function Sf(e){return Tf(e).then(t=>t.localStore)}function Tw(e){return gd(e).then(t=>t.remoteStore)}function Df(e){return gd(e).then(t=>t.syncEngine)}function o1(e){return gd(e).then(t=>t.datastore)}function bo(e){return g(this,null,function*(){let t=yield gd(e),i=t.eventManager;return i.onListen=UT.bind(null,t.syncEngine),i.onUnlisten=zT.bind(null,t.syncEngine),i})}function s1(e){return e.asyncQueue.enqueue(()=>g(this,null,function*(){let t=yield Cw(e),i=yield Tw(e);return t.setNetworkEnabled(!0),function(r){let o=D(r);return o.v_.delete(0),ba(o)}(i)}))}function a1(e){return e.asyncQueue.enqueue(()=>g(this,null,function*(){let t=yield Cw(e),i=yield Tw(e);return t.setNetworkEnabled(!1),function(r){return g(this,null,function*(){let o=D(r);o.v_.add(0),yield wo(o),o.x_.set("Offline")})}(i)}))}function c1(e,t){let i=new Vt;return e.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return function(r,o,s){return g(this,null,function*(){try{let a=yield function(l,d){let u=D(l);return u.persistence.runTransaction("read document","readonly",h=>u.localDocuments.getDocument(h,d))}(r,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new v(f.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Eo(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield Sf(e),t,i)})),i.promise}function Sw(e,t,i={}){let n=new Vt;return e.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return function(o,s,a,c,l){let d=new go({next:h=>{s.enqueueAndForget(()=>yf(o,u));let m=h.docs.has(a);!m&&h.fromCache?l.reject(new v(f.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&h.fromCache&&c&&c.source==="server"?l.reject(new v(f.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),u=new aa(yo(a.path),d,{includeMetadataChanges:!0,Z_:!0});return vf(o,u)}(yield bo(e),e.asyncQueue,t,i,n)})),n.promise}function l1(e,t){let i=new Vt;return e.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return function(r,o,s){return g(this,null,function*(){try{let a=yield $l(r,o,!0),c=new nd(o,a.hs),l=c.ha(a.documents),d=c.applyChanges(l,!1);s.resolve(d.snapshot)}catch(a){let c=Eo(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield Sf(e),t,i)})),i.promise}function Dw(e,t,i={}){let n=new Vt;return e.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return function(o,s,a,c,l){let d=new go({next:h=>{s.enqueueAndForget(()=>yf(o,u)),h.fromCache&&c.source==="server"?l.reject(new v(f.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),u=new aa(a,d,{includeMetadataChanges:!0,Z_:!0});return vf(o,u)}(yield bo(e),e.asyncQueue,t,i,n)})),n.promise}function d1(e,t){let i=new go(t);return e.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return function(r,o){D(r).K_.add(o),o.next()}(yield bo(e),i)})),()=>{i.La(),e.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return function(r,o){D(r).K_.delete(o)}(yield bo(e),i)}))}}function u1(e,t,i,n){let r=function(s,a){let c;return c=typeof s=="string"?qy().encode(s):s,function(d,u){return new Lp(d,u)}(function(d,u){if(d instanceof Uint8Array)return J0(d,u);if(d instanceof ArrayBuffer)return J0(new Uint8Array(d),u);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(i,ga(t));e.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){r1(yield Df(e),r,n)}))}function h1(e,t){return e.asyncQueue.enqueue(()=>g(this,null,function*(){return function(n,r){let o=D(n);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,r))}(yield Sf(e),t)}))}function Rw(e){let t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}var ty=new Map;function Rf(e,t,i){if(!i)throw new v(f.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Mf(e,t,i,n){if(t===!0&&n===!0)throw new v(f.INVALID_ARGUMENT,`${e} and ${i} cannot be used together.`)}function ey(e){if(!T.isDocumentKey(e))throw new v(f.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function iy(e){if(T.isDocumentKey(e))throw new v(f.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function bd(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{let t=function(n){return n.constructor?n.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":P()}function rt(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new v(f.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let i=bd(e);throw new v(f.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return e}function Mw(e,t){if(t<=0)throw new v(f.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}var od=class{constructor(t){var i,n;if(t.host===void 0){if(t.ssl!==void 0)throw new v(f.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(i=t.ssl)===null||i===void 0||i;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new v(f.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Mf("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Rw((n=t.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new v(f.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new v(f.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new v(f.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,r){return n.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},er=class{constructor(t,i,n,r){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new od({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new v(f.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new v(f.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new od(t),t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new am;switch(n.type){case"firstParty":return new um(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new v(f.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){let n=ty.get(i);n&&(x("ComponentProvider","Removing Datastore"),ty.delete(i),n.terminate())}(this),Promise.resolve()}};function Pw(e,t,i,n={}){var r;let o=(e=rt(e,er))._getSettings(),s=`${t}:${i}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Re("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),n.mockUserToken){let a,c;if(typeof n.mockUserToken=="string")a=n.mockUserToken,c=Ot.MOCK_USER;else{a=Xb(n.mockUserToken,(r=e._app)===null||r===void 0?void 0:r.options.projectId);let l=n.mockUserToken.sub||n.mockUserToken.user_id;if(!l)throw new v(f.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Ot(l)}e._authCredentials=new cm(new _l(a,c))}}var Xt=class e{constructor(t,i,n){this.converter=i,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new e(this.firestore,t,this._query)}},gt=class e{constructor(t,i,n){this.converter=i,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new di(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new e(this.firestore,t,this._key)}},di=class e extends Xt{constructor(t,i,n){super(t,i,yo(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new gt(this.firestore,null,new T(t))}withConverter(t){return new e(this.firestore,t,this._path)}};function Pf(e,t,...i){if(e=It(e),Rf("collection","path",t),e instanceof er){let n=nt.fromString(t,...i);return iy(n),new di(e,null,n)}{if(!(e instanceof gt||e instanceof di))throw new v(f.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=e._path.child(nt.fromString(t,...i));return iy(n),new di(e.firestore,null,n)}}function Nw(e,t){if(e=rt(e,er),Rf("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new v(f.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Xt(e,null,function(n){return new qe(nt.emptyPath(),n)}(t))}function _a(e,t,...i){if(e=It(e),arguments.length===1&&(t=vl.newId()),Rf("doc","path",t),e instanceof er){let n=nt.fromString(t,...i);return ey(n),new gt(e,null,new T(n))}{if(!(e instanceof gt||e instanceof di))throw new v(f.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=e._path.child(nt.fromString(t,...i));return ey(n),new gt(e.firestore,e instanceof di?e.converter:null,new T(n))}}function Nf(e,t){return e=It(e),t=It(t),(e instanceof gt||e instanceof di)&&(t instanceof gt||t instanceof di)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Ff(e,t){return e=It(e),t=It(t),e instanceof Xt&&t instanceof Xt&&e.firestore===t.firestore&&pa(e._query,t._query)&&e.converter===t.converter}var qp=class{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new oa(this,"async_queue_retry"),this._u=()=>{let i=gl();i&&x("AsyncQueue","Visibility state changed to "+i.visibilityState),this.jo.Ko()};let t=gl();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.au(),this.uu(t)}enterRestrictedMode(t){if(!this.tu){this.tu=!0,this.su=t||!1;let i=gl();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._u)}}enqueue(t){if(this.au(),this.tu)return new Promise(()=>{});let i=new Vt;return this.uu(()=>this.tu&&this.su?Promise.resolve():(t().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.eu.push(t),this.cu()))}cu(){return g(this,null,function*(){if(this.eu.length!==0){try{yield this.eu[0](),this.eu.shift(),this.jo.reset()}catch(t){if(!mn(t))throw t;x("AsyncQueue","Operation failed with retryable error: "+t)}this.eu.length>0&&this.jo.qo(()=>this.cu())}})}uu(t){let i=this.Xa.then(()=>(this.iu=!0,t().catch(n=>{this.ru=n,this.iu=!1;let r=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(n);throw Dt("INTERNAL UNHANDLED ERROR: ",r),n}).then(n=>(this.iu=!1,n))));return this.Xa=i,i}enqueueAfterDelay(t,i,n){this.au(),this.ou.indexOf(t)>-1&&(i=0);let r=Tp.createAndSchedule(this,t,i,n,o=>this.lu(o));return this.nu.push(r),r}au(){this.ru&&P()}verifyOperationInProgress(){}hu(){return g(this,null,function*(){let t;do t=this.Xa,yield t;while(t!==this.Xa)})}Pu(t){for(let i of this.nu)if(i.timerId===t)return!0;return!1}Iu(t){return this.hu().then(()=>{this.nu.sort((i,n)=>i.targetTimeMs-n.targetTimeMs);for(let i of this.nu)if(i.skipDelay(),t!=="all"&&i.timerId===t)break;return this.hu()})}Tu(t){this.ou.push(t)}lu(t){let i=this.nu.indexOf(t);this.nu.splice(i,1)}};function Gp(e){return function(i,n){if(typeof i!="object"||i===null)return!1;let r=i;for(let o of n)if(o in r&&typeof r[o]=="function")return!0;return!1}(e,["next","error","complete"])}var $p=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Vt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,i,n){this._progressObserver={next:t,error:i,complete:n}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,i){return this._taskCompletionResolver.promise.then(t,i)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}};var Fw=-1,wt=class extends er{constructor(t,i,n,r){super(t,i,n,r),this.type="firestore",this._queue=function(){return new qp}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ow(this),this._firestoreClient.terminate()}};function Ut(e){return e._firestoreClient||Ow(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Ow(e){var t,i,n;let r=e._freezeSettings(),o=function(a,c,l,d){return new vm(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Rw(d.experimentalLongPollingOptions),d.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,r);e._firestoreClient=new Up(e._authCredentials,e._appCheckCredentials,e._queue,o),!((i=r.localCache)===null||i===void 0)&&i._offlineComponentProvider&&(!((n=r.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function Vw(e,t){Kw(e=rt(e,wt));let i=Ut(e);if(i._uninitializedComponentsProvider)throw new v(f.FAILED_PRECONDITION,"SDK cache is already specified.");Re("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=e._freezeSettings(),r=new la;return Bw(i,r,new rd(r,n.cacheSizeBytes,t?.forceOwnership))}function Lw(e){Kw(e=rt(e,wt));let t=Ut(e);if(t._uninitializedComponentsProvider)throw new v(f.FAILED_PRECONDITION,"SDK cache is already specified.");Re("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let i=e._freezeSettings(),n=new la;return Bw(t,n,new Vp(n,i.cacheSizeBytes))}function Bw(e,t,i){let n=new Vt;return e.asyncQueue.enqueue(()=>g(this,null,function*(){try{yield bl(e,i),yield zp(e,t),n.resolve()}catch(r){let o=r;if(!kw(o))throw o;Re("Error enabling indexeddb cache. Falling back to memory cache: "+o),n.reject(o)}})).then(()=>n.promise)}function jw(e){if(e._initialized&&!e._terminated)throw new v(f.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let t=new Vt;return e._queue.enqueueAndForgetEvenWhileRestricted(()=>g(this,null,function*(){try{yield function(n){return g(this,null,function*(){if(!Ai.D())return Promise.resolve();let r=n+"main";yield Ai.delete(r)})}(ff(e._databaseId,e._persistenceKey)),t.resolve()}catch(i){t.reject(i)}})),t.promise}function Uw(e){return function(i){let n=new Vt;return i.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return QT(yield Df(i),n)})),n.promise}(Ut(e=rt(e,wt)))}function zw(e){return s1(Ut(e=rt(e,wt)))}function qw(e){return a1(Ut(e=rt(e,wt)))}function Gw(e,t){let i=Ut(e=rt(e,wt)),n=new $p;return u1(i,e._databaseId,t,n),n}function $w(e,t){return h1(Ut(e=rt(e,wt)),t).then(i=>i?new Xt(e,null,i.query):null)}function Kw(e){if(e._initialized||e._terminated)throw new v(f.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var pi=class e{constructor(t){this._byteString=t}static fromBase64String(t){try{return new e(Gt.fromBase64String(t))}catch(i){throw new v(f.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new e(Gt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};var $e=class{constructor(...t){for(let i=0;i<t.length;++i)if(t[i].length===0)throw new v(f.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var Ti=class{constructor(t){this._methodName=t}};var ir=class{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new v(f.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new v(f.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return W(this._lat,t._lat)||W(this._long,t._long)}};var m1=/^__.*__$/,Kp=class{constructor(t,i,n){this.data=t,this.fieldMask=i,this.fieldTransforms=n}toMutation(t,i){return this.fieldMask!==null?new Ge(t,this.data,this.fieldMask,i,this.fieldTransforms):new ln(t,this.data,i,this.fieldTransforms)}},sd=class{constructor(t,i,n){this.data=t,this.fieldMask=i,this.fieldTransforms=n}toMutation(t,i){return new Ge(t,this.data,this.fieldMask,i,this.fieldTransforms)}};function Qw(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw P()}}var ad=class e{constructor(t,i,n,r,o,s){this.settings=t,this.databaseId=i,this.serializer=n,this.ignoreUndefinedProperties=r,o===void 0&&this.Eu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(t){var i;let n=(i=this.path)===null||i===void 0?void 0:i.child(t),r=this.Au({path:n,Vu:!1});return r.mu(t),r}fu(t){var i;let n=(i=this.path)===null||i===void 0?void 0:i.child(t),r=this.Au({path:n,Vu:!1});return r.Eu(),r}gu(t){return this.Au({path:void 0,Vu:!0})}pu(t){return cd(t,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(t){return this.fieldMask.find(i=>t.isPrefixOf(i))!==void 0||this.fieldTransforms.find(i=>t.isPrefixOf(i.field))!==void 0}Eu(){if(this.path)for(let t=0;t<this.path.length;t++)this.mu(this.path.get(t))}mu(t){if(t.length===0)throw this.pu("Document fields must not be empty");if(Qw(this.du)&&m1.test(t))throw this.pu('Document fields cannot begin and end with "__"')}},Qp=class{constructor(t,i,n){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=n||ga(t)}Su(t,i,n,r=!1){return new ad({du:t,methodName:i,wu:n,path:Rt.emptyPath(),Vu:!1,yu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function sr(e){let t=e._freezeSettings(),i=ga(e._databaseId);return new Qp(e._databaseId,!!t.ignoreUndefinedProperties,i)}function _d(e,t,i,n,r,o={}){let s=e.Su(o.merge||o.mergeFields?2:0,t,i,r);Lf("Data must be an object, but it was:",s,n);let a=Yw(n,s),c,l;if(o.merge)c=new ke(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let u of o.mergeFields){let h=Zp(t,u,i);if(!s.contains(h))throw new v(f.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);Zw(d,h)||d.push(h)}c=new ke(d),l=s.fieldTransforms.filter(u=>c.covers(u.field))}else c=null,l=s.fieldTransforms;return new Kp(new re(a),c,l)}var da=class e extends Ti{_toFieldTransform(t){if(t.du!==2)throw t.du===1?t.pu(`${this._methodName}() can only appear at the top level of your update data`):t.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof e}};function Ww(e,t,i){return new ad({du:3,wu:t.settings.wu,methodName:e._methodName,Vu:i},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var Wp=class e extends Ti{_toFieldTransform(t){return new Zn(t.path,new an)}isEqual(t){return t instanceof e}},Hp=class e extends Ti{constructor(t,i){super(t),this.bu=i}_toFieldTransform(t){let i=Ww(this,t,!0),n=this.bu.map(o=>ar(o,i)),r=new ki(n);return new Zn(t.path,r)}isEqual(t){return t instanceof e&&Fu(this.bu,t.bu)}},Yp=class e extends Ti{constructor(t,i){super(t),this.bu=i}_toFieldTransform(t){let i=Ww(this,t,!0),n=this.bu.map(o=>ar(o,i)),r=new Ci(n);return new Zn(t.path,r)}isEqual(t){return t instanceof e&&Fu(this.bu,t.bu)}},Xp=class e extends Ti{constructor(t,i){super(t),this.Du=i}_toFieldTransform(t){let i=new cn(t.serializer,Ny(t.serializer,this.Du));return new Zn(t.path,i)}isEqual(t){return t instanceof e&&this.Du===t.Du}};function Of(e,t,i,n){let r=e.Su(1,t,i);Lf("Data must be an object, but it was:",r,n);let o=[],s=re.empty();or(n,(c,l)=>{let d=Bf(t,c,i);l=It(l);let u=r.fu(d);if(l instanceof da)o.push(d);else{let h=ar(l,u);h!=null&&(o.push(d),s.set(d,h))}});let a=new ke(o);return new sd(s,a,r.fieldTransforms)}function Vf(e,t,i,n,r,o){let s=e.Su(1,t,i),a=[Zp(t,n,i)],c=[r];if(o.length%2!=0)throw new v(f.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<o.length;h+=2)a.push(Zp(t,o[h])),c.push(o[h+1]);let l=[],d=re.empty();for(let h=a.length-1;h>=0;--h)if(!Zw(l,a[h])){let m=a[h],E=c[h];E=It(E);let w=s.fu(m);if(E instanceof da)l.push(m);else{let b=ar(E,w);b!=null&&(l.push(m),d.set(m,b))}}let u=new ke(l);return new sd(d,u,s.fieldTransforms)}function Hw(e,t,i,n=!1){return ar(i,e.Su(n?4:3,t))}function ar(e,t){if(Xw(e=It(e)))return Lf("Unsupported field value:",t,e),Yw(e,t);if(e instanceof Ti)return function(n,r){if(!Qw(r.du))throw r.pu(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.pu(`${n._methodName}() is not currently supported inside arrays`);let o=n._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Vu&&t.du!==4)throw t.pu("Nested arrays are not supported");return function(n,r){let o=[],s=0;for(let a of n){let c=ar(a,r.gu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(e,t)}return function(n,r){if((n=It(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Ny(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){let o=Et.fromDate(n);return{timestampValue:co(r.serializer,o)}}if(n instanceof Et){let o=new Et(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:co(r.serializer,o)}}if(n instanceof ir)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof pi)return{bytesValue:Gy(r.serializer,n._byteString)};if(n instanceof gt){let o=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(o))throw r.pu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:hf(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.pu(`Unsupported field value: ${bd(n)}`)}(e,t)}function Yw(e,t){let i={};return gy(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):or(e,(n,r)=>{let o=ar(r,t.Ru(n));o!=null&&(i[n]=o)}),{mapValue:{fields:i}}}function Xw(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Et||e instanceof ir||e instanceof pi||e instanceof gt||e instanceof Ti)}function Lf(e,t,i){if(!Xw(i)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(i)){let n=bd(i);throw n==="an object"?t.pu(e+" a custom object"):t.pu(e+" "+n)}}function Zp(e,t,i){if((t=It(t))instanceof $e)return t._internalPath;if(typeof t=="string")return Bf(e,t);throw cd("Field path arguments must be of type string or ",e,!1,void 0,i)}var p1=new RegExp("[~\\*/\\[\\]]");function Bf(e,t,i){if(t.search(p1)>=0)throw cd(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,i);try{return new $e(...t.split("."))._internalPath}catch{throw cd(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,i)}}function cd(e,t,i,n,r){let o=n&&!n.isEmpty(),s=r!==void 0,a=`Function ${t}() called with invalid data`;i&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${n}`),s&&(c+=` in document ${r}`),c+=")"),new v(f.INVALID_ARGUMENT,a+e+c)}function Zw(e,t){return e.some(i=>i.isEqual(t))}var nr=class{constructor(t,i,n,r,o){this._firestore=t,this._userDataWriter=i,this._key=n,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new Jp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){let i=this._document.data.field(vd("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i)}}},Jp=class extends nr{data(){return super.data()}};function vd(e,t){return typeof t=="string"?Bf(e,t):t instanceof $e?t._internalPath:t._delegate._internalPath}function Jw(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new v(f.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ua=class{},rr=class extends ua{};function Ri(e,t,...i){let n=[];t instanceof ua&&n.push(t),n=n.concat(i),function(o){let s=o.filter(c=>c instanceof tf).length,a=o.filter(c=>c instanceof ld).length;if(s>1||s>0&&a>0)throw new v(f.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(let r of n)e=r._apply(e);return e}var ld=class e extends rr{constructor(t,i,n){super(),this._field=t,this._op=i,this._value=n,this.type="where"}static _create(t,i,n){return new e(t,i,n)}_apply(t){let i=this._parse(t);return lx(t._query,i),new Xt(t.firestore,t.converter,Mm(t._query,i))}_parse(t){let i=sr(t.firestore);return function(o,s,a,c,l,d,u){let h;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new v(f.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){ry(u,d);let m=[];for(let E of u)m.push(ny(c,o,E));h={arrayValue:{values:m}}}else h=ny(c,o,u)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||ry(u,d),h=Hw(a,s,u,d==="in"||d==="not-in");return tt.create(l,d,h)}(t._query,"where",i,t.firestore._databaseId,this._field,this._op,this._value)}};function tx(e,t,i){let n=t,r=vd("where",e);return ld._create(r,n,i)}var tf=class e extends ua{constructor(t,i){super(),this.type=t,this._queryConstraints=i}static _create(t,i){return new e(t,i)}_parse(t){let i=this._queryConstraints.map(n=>n._parse(t)).filter(n=>n.getFilters().length>0);return i.length===1?i[0]:dt.create(i,this._getOperator())}_apply(t){let i=this._parse(t);return i.getFilters().length===0?t:(function(r,o){let s=r,a=o.getFlattenedFilters();for(let c of a)lx(s,c),s=Mm(s,c)}(t._query,i),new Xt(t.firestore,t.converter,Mm(t._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var ef=class e extends rr{constructor(t,i){super(),this._field=t,this._direction=i,this.type="orderBy"}static _create(t,i){return new e(t,i)}_apply(t){let i=function(r,o,s){if(r.startAt!==null)throw new v(f.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new v(f.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yn(o,s)}(t._query,this._field,this._direction);return new Xt(t.firestore,t.converter,function(r,o){let s=r.explicitOrderBy.concat([o]);return new qe(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,i))}};function ex(e,t="asc"){let i=t,n=vd("orderBy",e);return ef._create(n,i)}var dd=class e extends rr{constructor(t,i,n){super(),this.type=t,this._limit=i,this._limitType=n}static _create(t,i,n){return new e(t,i,n)}_apply(t){return new Xt(t.firestore,t.converter,Sl(t._query,this._limit,this._limitType))}};function ix(e){return Mw("limit",e),dd._create("limit",e,"F")}function nx(e){return Mw("limitToLast",e),dd._create("limitToLast",e,"L")}var ud=class e extends rr{constructor(t,i,n){super(),this.type=t,this._docOrFields=i,this._inclusive=n}static _create(t,i,n){return new e(t,i,n)}_apply(t){let i=cx(t,this.type,this._docOrFields,this._inclusive);return new Xt(t.firestore,t.converter,function(r,o){return new qe(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)}(t._query,i))}};function rx(...e){return ud._create("startAt",e,!0)}function ox(...e){return ud._create("startAfter",e,!1)}var hd=class e extends rr{constructor(t,i,n){super(),this.type=t,this._docOrFields=i,this._inclusive=n}static _create(t,i,n){return new e(t,i,n)}_apply(t){let i=cx(t,this.type,this._docOrFields,this._inclusive);return new Xt(t.firestore,t.converter,function(r,o){return new qe(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)}(t._query,i))}};function sx(...e){return hd._create("endBefore",e,!1)}function ax(...e){return hd._create("endAt",e,!0)}function cx(e,t,i,n){if(i[0]=It(i[0]),i[0]instanceof nr)return function(o,s,a,c,l){if(!c)throw new v(f.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let u of to(o))if(u.field.isKeyField())d.push(Hn(s,c.key));else{let h=c.data.field(u.field);if(pd(h))throw new v(f.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){let m=u.field.canonicalString();throw new v(f.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(h)}return new hi(d,l)}(e._query,e.firestore._databaseId,t,i[0]._document,n);{let r=sr(e.firestore);return function(s,a,c,l,d,u){let h=s.explicitOrderBy;if(d.length>h.length)throw new v(f.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let m=[];for(let E=0;E<d.length;E++){let w=d[E];if(h[E].field.isKeyField()){if(typeof w!="string")throw new v(f.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof w}`);if(!df(s)&&w.indexOf("/")!==-1)throw new v(f.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${w}' contains a slash.`);let b=s.path.child(nt.fromString(w));if(!T.isDocumentKey(b))throw new v(f.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);let A=new T(b);m.push(Hn(a,A))}else{let b=Hw(c,l,w);m.push(b)}}return new hi(m,u)}(e._query,e.firestore._databaseId,r,t,i,n)}}function ny(e,t,i){if(typeof(i=It(i))=="string"){if(i==="")throw new v(f.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!df(t)&&i.indexOf("/")!==-1)throw new v(f.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);let n=t.path.child(nt.fromString(i));if(!T.isDocumentKey(n))throw new v(f.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Hn(e,new T(n))}if(i instanceof gt)return Hn(e,i._key);throw new v(f.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bd(i)}.`)}function ry(e,t){if(!Array.isArray(e)||e.length===0)throw new v(f.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function lx(e,t){let i=function(r,o){for(let s of r)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(i!==null)throw i===t.op?new v(f.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new v(f.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${i.toString()}' filters.`)}var _o=class{convertValue(t,i="none"){switch(Wn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Tt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(rn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 10:return this.convertObject(t.mapValue,i);default:throw P()}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){let n={};return or(t,(r,o)=>{n[r]=this.convertValue(o,i)}),n}convertGeoPoint(t){return new ir(Tt(t.latitude),Tt(t.longitude))}convertArray(t,i){return(t.values||[]).map(n=>this.convertValue(n,i))}convertServerTimestamp(t,i){switch(i){case"previous":let n=cf(t);return n==null?null:this.convertValue(n,i);case"estimate":return this.convertTimestamp(Ks(t));default:return null}}convertTimestamp(t){let i=nn(t);return new Et(i.seconds,i.nanos)}convertDocumentKey(t,i){let n=nt.fromString(t);L(ew(n));let r=new on(n.get(1),n.get(3)),o=new T(n.popFirst(5));return r.isEqual(i)||Dt(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),o}};function yd(e,t,i){let n;return n=e?i&&(i.merge||i.mergeFields)?e.toFirestore(t,i):e.toFirestore(t):t,n}var nf=class extends _o{constructor(t){super(),this.firestore=t}convertBytes(t){return new pi(t)}convertReference(t){let i=this.convertDocumentKey(t,this.firestore._databaseId);return new gt(this.firestore,null,i)}};var Ei=class{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},Pe=class extends nr{constructor(t,i,n,r,o,s){super(t,i,n,r,s),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){let i=new tn(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){let n=this._document.data.field(vd("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,i.serverTimestamps)}}},tn=class extends Pe{data(t={}){return super.data(t)}},Ke=class{constructor(t,i,n,r){this._firestore=t,this._userDataWriter=i,this._snapshot=r,this.metadata=new Ei(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){let t=[];return this.forEach(i=>t.push(i)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,i){this._snapshot.docs.forEach(n=>{t.call(i,new tn(this._firestore,this._userDataWriter,n.key,n,new Ei(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){let i=!!t.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new v(f.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(a=>{let c=new tn(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Ei(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new tn(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Ei(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),l=-1,d=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:f1(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}};function f1(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return P()}}function jf(e,t){return e instanceof Pe&&t instanceof Pe?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(e._document===null?t._document===null:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Ke&&t instanceof Ke&&e._firestore===t._firestore&&Ff(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function dx(e){e=rt(e,gt);let t=rt(e.firestore,wt);return Sw(Ut(t),e._key).then(i=>Gf(t,e,i))}var Si=class extends _o{constructor(t){super(),this.firestore=t}convertBytes(t){return new pi(t)}convertReference(t){let i=this.convertDocumentKey(t,this.firestore._databaseId);return new gt(this.firestore,null,i)}};function ux(e){e=rt(e,gt);let t=rt(e.firestore,wt),i=Ut(t),n=new Si(t);return c1(i,e._key).then(r=>new Pe(t,n,e._key,r,new Ei(r!==null&&r.hasLocalMutations,!0),e.converter))}function hx(e){e=rt(e,gt);let t=rt(e.firestore,wt);return Sw(Ut(t),e._key,{source:"server"}).then(i=>Gf(t,e,i))}function mx(e){e=rt(e,Xt);let t=rt(e.firestore,wt),i=Ut(t),n=new Si(t);return Jw(e._query),Dw(i,e._query).then(r=>new Ke(t,n,e,r))}function px(e){e=rt(e,Xt);let t=rt(e.firestore,wt),i=Ut(t),n=new Si(t);return l1(i,e._query).then(r=>new Ke(t,n,e,r))}function fx(e){e=rt(e,Xt);let t=rt(e.firestore,wt),i=Ut(t),n=new Si(t);return Dw(i,e._query,{source:"server"}).then(r=>new Ke(t,n,e,r))}function Uf(e,t,i){e=rt(e,gt);let n=rt(e.firestore,wt),r=yd(e.converter,t,i);return Ao(n,[_d(sr(n),"setDoc",e._key,r,e.converter!==null,i).toMutation(e._key,St.none())])}function zf(e,t,i,...n){e=rt(e,gt);let r=rt(e.firestore,wt),o=sr(r),s;return s=typeof(t=It(t))=="string"||t instanceof $e?Vf(o,"updateDoc",e._key,t,i,n):Of(o,"updateDoc",e._key,t),Ao(r,[s.toMutation(e._key,St.exists(!0))])}function gx(e){return Ao(rt(e.firestore,wt),[new dn(e._key,St.none())])}function bx(e,t){let i=rt(e.firestore,wt),n=_a(e),r=yd(e.converter,t);return Ao(i,[_d(sr(e.firestore),"addDoc",n._key,r,e.converter!==null,{}).toMutation(n._key,St.exists(!1))]).then(()=>n)}function qf(e,...t){var i,n,r;e=It(e);let o={includeMetadataChanges:!1},s=0;typeof t[s]!="object"||Gp(t[s])||(o=t[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges};if(Gp(t[s])){let u=t[s];t[s]=(i=u.next)===null||i===void 0?void 0:i.bind(u),t[s+1]=(n=u.error)===null||n===void 0?void 0:n.bind(u),t[s+2]=(r=u.complete)===null||r===void 0?void 0:r.bind(u)}let c,l,d;if(e instanceof gt)l=rt(e.firestore,wt),d=yo(e._key.path),c={next:u=>{t[s]&&t[s](Gf(l,e,u))},error:t[s+1],complete:t[s+2]};else{let u=rt(e,Xt);l=rt(u.firestore,wt),d=u._query;let h=new Si(l);c={next:m=>{t[s]&&t[s](new Ke(l,h,u,m))},error:t[s+1],complete:t[s+2]},Jw(e._query)}return function(h,m,E,w){let b=new go(w),A=new aa(m,b,E);return h.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return vf(yield bo(h),A)})),()=>{b.La(),h.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return yf(yield bo(h),A)}))}}(Ut(l),d,a,c)}function _x(e,t){return d1(Ut(e=rt(e,wt)),Gp(t)?t:{next:t})}function Ao(e,t){return function(n,r){let o=new Vt;return n.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return qT(yield Df(n),r,o)})),o.promise}(Ut(e),t)}function Gf(e,t,i){let n=i.docs.get(t._key),r=new Si(e);return new Pe(e,r,t._key,n,new Ei(i.hasPendingWrites,i.fromCache),t.converter)}var g1={maxAttempts:5};var md=class{constructor(t,i){this._firestore=t,this._commitHandler=i,this._mutations=[],this._committed=!1,this._dataReader=sr(t)}set(t,i,n){this._verifyNotCommitted();let r=Zi(t,this._firestore),o=yd(r.converter,i,n),s=_d(this._dataReader,"WriteBatch.set",r._key,o,r.converter!==null,n);return this._mutations.push(s.toMutation(r._key,St.none())),this}update(t,i,n,...r){this._verifyNotCommitted();let o=Zi(t,this._firestore),s;return s=typeof(i=It(i))=="string"||i instanceof $e?Vf(this._dataReader,"WriteBatch.update",o._key,i,n,r):Of(this._dataReader,"WriteBatch.update",o._key,i),this._mutations.push(s.toMutation(o._key,St.exists(!0))),this}delete(t){this._verifyNotCommitted();let i=Zi(t,this._firestore);return this._mutations=this._mutations.concat(new dn(i._key,St.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new v(f.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Zi(e,t){if((e=It(e)).firestore!==t)throw new v(f.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var rf=class extends class{constructor(i,n){this._firestore=i,this._transaction=n,this._dataReader=sr(i)}get(i){let n=Zi(i,this._firestore),r=new nf(this._firestore);return this._transaction.lookup([n._key]).then(o=>{if(!o||o.length!==1)return P();let s=o[0];if(s.isFoundDocument())return new nr(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new nr(this._firestore,r,n._key,null,n.converter);throw P()})}set(i,n,r){let o=Zi(i,this._firestore),s=yd(o.converter,n,r),a=_d(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,r);return this._transaction.set(o._key,a),this}update(i,n,r,...o){let s=Zi(i,this._firestore),a;return a=typeof(n=It(n))=="string"||n instanceof $e?Vf(this._dataReader,"Transaction.update",s._key,n,r,o):Of(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,a),this}delete(i){let n=Zi(i,this._firestore);return this._transaction.delete(n._key),this}}{constructor(t,i){super(t,i),this._firestore=t}get(t){let i=Zi(t,this._firestore),n=new Si(this._firestore);return super.get(t).then(r=>new Pe(this._firestore,n,i._key,r._document,new Ei(!1,!1),i.converter))}};function vx(e,t,i){e=rt(e,wt);let n=Object.assign(Object.assign({},g1),i);return function(o){if(o.maxAttempts<1)throw new v(f.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(o,s,a){let c=new Vt;return o.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){let l=yield o1(o);new jp(o.asyncQueue,l,a,s,c).ja()})),c.promise}(Ut(e),r=>t(new rf(e,r)),n)}function yx(){return new da("deleteField")}function wx(){return new Wp("serverTimestamp")}function xx(...e){return new Hp("arrayUnion",e)}function Ix(...e){return new Yp("arrayRemove",e)}function Ex(e){return new Xp("increment",e)}(function(t,i=!0){(function(r){vo=r})(t_),ts(new Rn("firestore",(n,{instanceIdentifier:r,options:o})=>{let s=n.getProvider("app").getImmediate(),a=new wt(new lm(n.getProvider("auth-internal")),new mm(n.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new v(f.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new on(l.options.projectId,d)}(s,r),s);return o=Object.assign({useFetchStreams:i},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Gi(s0,"4.4.2",t),Gi(s0,"4.4.2","esm2017")})();var b1="@firebase/firestore-compat",_1="0.3.25";function Yf(e,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new v("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}function Ax(){if(typeof Uint8Array>"u")throw new v("unimplemented","Uint8Arrays are not available in this environment.")}function kx(){if(!by())throw new v("unimplemented","Blobs are unavailable in Firestore in this environment.")}var wd=class e{constructor(t){this._delegate=t}static fromBase64String(t){return kx(),new e(pi.fromBase64String(t))}static fromUint8Array(t){return Ax(),new e(pi.fromUint8Array(t))}toBase64(){return kx(),this._delegate.toBase64()}toUint8Array(){return Ax(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function $f(e){return v1(e,["next","error","complete"])}function v1(e,t){if(typeof e!="object"||e===null)return!1;let i=e;for(let n of t)if(n in i&&typeof i[n]=="function")return!0;return!1}var Kf=class{enableIndexedDbPersistence(t,i){return Vw(t._delegate,{forceOwnership:i})}enableMultiTabIndexedDbPersistence(t){return Lw(t._delegate)}clearIndexedDbPersistence(t){return jw(t._delegate)}},xd=class{constructor(t,i,n){this._delegate=i,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},t instanceof on||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){let i=this._delegate._getSettings();!t.merge&&i.host!==t.host&&Re("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&(t=Object.assign(Object.assign({},i),t),delete t.merge),this._delegate._setSettings(t)}useEmulator(t,i,n={}){Pw(this._delegate,t,i,n)}enableNetwork(){return zw(this._delegate)}disableNetwork(){return qw(this._delegate)}enablePersistence(t){let i=!1,n=!1;return t&&(i=!!t.synchronizeTabs,n=!!t.experimentalForceOwningTab,Mf("synchronizeTabs",i,"experimentalForceOwningTab",n)),i?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Uw(this._delegate)}onSnapshotsInSync(t){return _x(this._delegate,t)}get app(){if(!this._appCompat)throw new v("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new To(this,Pf(this._delegate,t))}catch(i){throw ue(i,"collection()","Firestore.collection()")}}doc(t){try{return new fi(this,_a(this._delegate,t))}catch(i){throw ue(i,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new ur(this,Nw(this._delegate,t))}catch(i){throw ue(i,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return vx(this._delegate,i=>t(new Id(this,i)))}batch(){return Ut(this._delegate),new Ed(new md(this._delegate,t=>Ao(this._delegate,t)))}loadBundle(t){return Gw(this._delegate,t)}namedQuery(t){return $w(this._delegate,t).then(i=>i?new ur(this,i):null)}},ko=class extends _o{constructor(t){super(),this.firestore=t}convertBytes(t){return new wd(new pi(t))}convertReference(t){let i=this.convertDocumentKey(t,this.firestore._databaseId);return fi.forKey(i,this.firestore,null)}};function y1(e){oy(e)}var Id=class{constructor(t,i){this._firestore=t,this._delegate=i,this._userDataWriter=new ko(t)}get(t){let i=cr(t);return this._delegate.get(i).then(n=>new lr(this._firestore,new Pe(this._firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,i.converter)))}set(t,i,n){let r=cr(t);return n?(Yf("Transaction.set",n),this._delegate.set(r,i,n)):this._delegate.set(r,i),this}update(t,i,n,...r){let o=cr(t);return arguments.length===2?this._delegate.update(o,i):this._delegate.update(o,i,n,...r),this}delete(t){let i=cr(t);return this._delegate.delete(i),this}},Ed=class{constructor(t){this._delegate=t}set(t,i,n){let r=cr(t);return n?(Yf("WriteBatch.set",n),this._delegate.set(r,i,n)):this._delegate.set(r,i),this}update(t,i,n,...r){let o=cr(t);return arguments.length===2?this._delegate.update(o,i):this._delegate.update(o,i,n,...r),this}delete(t){let i=cr(t);return this._delegate.delete(i),this}commit(){return this._delegate.commit()}},Co=class e{constructor(t,i,n){this._firestore=t,this._userDataWriter=i,this._delegate=n}fromFirestore(t,i){let n=new tn(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new dr(this._firestore,n),i??{})}toFirestore(t,i){return i?this._delegate.toFirestore(t,i):this._delegate.toFirestore(t)}static getInstance(t,i){let n=e.INSTANCES,r=n.get(t);r||(r=new WeakMap,n.set(t,r));let o=r.get(i);return o||(o=new e(t,new ko(t),i),r.set(i,o)),o}};Co.INSTANCES=new WeakMap;var fi=class e{constructor(t,i){this.firestore=t,this._delegate=i,this._userDataWriter=new ko(t)}static forPath(t,i,n){if(t.length%2!==0)throw new v("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new e(i,new gt(i._delegate,n,new T(t)))}static forKey(t,i,n){return new e(i,new gt(i._delegate,n,t))}get id(){return this._delegate.id}get parent(){return new To(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new To(this.firestore,Pf(this._delegate,t))}catch(i){throw ue(i,"collection()","DocumentReference.collection()")}}isEqual(t){return t=It(t),t instanceof gt?Nf(this._delegate,t):!1}set(t,i){i=Yf("DocumentReference.set",i);try{return i?Uf(this._delegate,t,i):Uf(this._delegate,t)}catch(n){throw ue(n,"setDoc()","DocumentReference.set()")}}update(t,i,...n){try{return arguments.length===1?zf(this._delegate,t):zf(this._delegate,t,i,...n)}catch(r){throw ue(r,"updateDoc()","DocumentReference.update()")}}delete(){return gx(this._delegate)}onSnapshot(...t){let i=Cx(t),n=Tx(t,r=>new lr(this.firestore,new Pe(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return qf(this._delegate,i,n)}get(t){let i;return t?.source==="cache"?i=ux(this._delegate):t?.source==="server"?i=hx(this._delegate):i=dx(this._delegate),i.then(n=>new lr(this.firestore,new Pe(this.firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,this._delegate.converter)))}withConverter(t){return new e(this.firestore,t?this._delegate.withConverter(Co.getInstance(this.firestore,t)):this._delegate.withConverter(null))}};function ue(e,t,i){return e.message=e.message.replace(t,i),e}function Cx(e){for(let t of e)if(typeof t=="object"&&!$f(t))return t;return{}}function Tx(e,t){var i,n;let r;return $f(e[0])?r=e[0]:$f(e[1])?r=e[1]:typeof e[0]=="function"?r={next:e[0],error:e[1],complete:e[2]}:r={next:e[1],error:e[2],complete:e[3]},{next:o=>{r.next&&r.next(t(o))},error:(i=r.error)===null||i===void 0?void 0:i.bind(r),complete:(n=r.complete)===null||n===void 0?void 0:n.bind(r)}}var lr=class{constructor(t,i){this._firestore=t,this._delegate=i}get ref(){return new fi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,i){return this._delegate.get(t,i)}isEqual(t){return jf(this._delegate,t._delegate)}},dr=class extends lr{data(t){let i=this._delegate.data(t);return this._delegate._converter||sy(i!==void 0,"Document in a QueryDocumentSnapshot should exist"),i}},ur=class e{constructor(t,i){this.firestore=t,this._delegate=i,this._userDataWriter=new ko(t)}where(t,i,n){try{return new e(this.firestore,Ri(this._delegate,tx(t,i,n)))}catch(r){throw ue(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,i){try{return new e(this.firestore,Ri(this._delegate,ex(t,i)))}catch(n){throw ue(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new e(this.firestore,Ri(this._delegate,ix(t)))}catch(i){throw ue(i,"limit()","Query.limit()")}}limitToLast(t){try{return new e(this.firestore,Ri(this._delegate,nx(t)))}catch(i){throw ue(i,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new e(this.firestore,Ri(this._delegate,rx(...t)))}catch(i){throw ue(i,"startAt()","Query.startAt()")}}startAfter(...t){try{return new e(this.firestore,Ri(this._delegate,ox(...t)))}catch(i){throw ue(i,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new e(this.firestore,Ri(this._delegate,sx(...t)))}catch(i){throw ue(i,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new e(this.firestore,Ri(this._delegate,ax(...t)))}catch(i){throw ue(i,"endAt()","Query.endAt()")}}isEqual(t){return Ff(this._delegate,t._delegate)}get(t){let i;return t?.source==="cache"?i=px(this._delegate):t?.source==="server"?i=fx(this._delegate):i=mx(this._delegate),i.then(n=>new va(this.firestore,new Ke(this.firestore._delegate,this._userDataWriter,this._delegate,n._snapshot)))}onSnapshot(...t){let i=Cx(t),n=Tx(t,r=>new va(this.firestore,new Ke(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return qf(this._delegate,i,n)}withConverter(t){return new e(this.firestore,t?this._delegate.withConverter(Co.getInstance(this.firestore,t)):this._delegate.withConverter(null))}},Qf=class{constructor(t,i){this._firestore=t,this._delegate=i}get type(){return this._delegate.type}get doc(){return new dr(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},va=class{constructor(t,i){this._firestore=t,this._delegate=i}get query(){return new ur(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new dr(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(i=>new Qf(this._firestore,i))}forEach(t,i){this._delegate.forEach(n=>{t.call(i,new dr(this._firestore,n))})}isEqual(t){return jf(this._delegate,t._delegate)}},To=class e extends ur{constructor(t,i){super(t,i),this.firestore=t,this._delegate=i}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let t=this._delegate.parent;return t?new fi(this.firestore,t):null}doc(t){try{return t===void 0?new fi(this.firestore,_a(this._delegate)):new fi(this.firestore,_a(this._delegate,t))}catch(i){throw ue(i,"doc()","CollectionReference.doc()")}}add(t){return bx(this._delegate,t).then(i=>new fi(this.firestore,i))}isEqual(t){return Nf(this._delegate,t._delegate)}withConverter(t){return new e(this.firestore,t?this._delegate.withConverter(Co.getInstance(this.firestore,t)):this._delegate.withConverter(null))}};function cr(e){return rt(e,gt)}var Wf=class e{constructor(...t){this._delegate=new $e(...t)}static documentId(){return new e(Rt.keyField().canonicalString())}isEqual(t){return t=It(t),t instanceof $e?this._delegate._internalPath.isEqual(t._internalPath):!1}};var Hf=class e{constructor(t){this._delegate=t}static serverTimestamp(){let t=wx();return t._methodName="FieldValue.serverTimestamp",new e(t)}static delete(){let t=yx();return t._methodName="FieldValue.delete",new e(t)}static arrayUnion(...t){let i=xx(...t);return i._methodName="FieldValue.arrayUnion",new e(i)}static arrayRemove(...t){let i=Ix(...t);return i._methodName="FieldValue.arrayRemove",new e(i)}static increment(t){let i=Ex(t);return i._methodName="FieldValue.increment",new e(i)}isEqual(t){return this._delegate.isEqual(t._delegate)}};var w1={Firestore:xd,GeoPoint:ir,Timestamp:Et,Blob:wd,Transaction:Id,WriteBatch:Ed,DocumentReference:fi,DocumentSnapshot:lr,Query:ur,QueryDocumentSnapshot:dr,QuerySnapshot:va,CollectionReference:To,FieldPath:Wf,FieldValue:Hf,setLogLevel:y1,CACHE_SIZE_UNLIMITED:Fw};function x1(e,t){e.INTERNAL.registerComponent(new Rn("firestore-compat",i=>{let n=i.getProvider("app-compat").getImmediate(),r=i.getProvider("firestore").getImmediate();return t(n,r)},"PUBLIC").setServiceProps(Object.assign({},w1)))}function I1(e){x1(e,(t,i)=>new xd(t,i,new Kf)),e.registerVersion(b1,_1)}I1(fe);function E1(e,t=Ja){return new He(i=>{let n;return t!=null?t.schedule(()=>{n=e.onSnapshot({includeMetadataChanges:!0},i)}):n=e.onSnapshot({includeMetadataChanges:!0},i),()=>{n?.()}})}function Sx(e,t){return E1(e,t)}function A1(e,t){return Sx(e,t).pipe(Vi(void 0),nc(),V(i=>{let[n,r]=i;return r.exists?n?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}function Jf(e,t){return Sx(e,t).pipe(V(i=>({payload:i,type:"query"})))}var Ad=class{ref;afs;constructor(t,i){this.ref=t,this.afs=i}set(t,i){return this.ref.set(t,i)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,i){let n=this.ref.collection(t),{ref:r,query:o}=Nx(n,i);return new Cd(r,o,this.afs)}snapshotChanges(){return A1(this.ref,this.afs.schedulers.outsideAngular).pipe(ge)}valueChanges(t={}){return this.snapshotChanges().pipe(V(({payload:i})=>t.idField?bt(k({},i.data()),{[t.idField]:i.id}):i.data()))}get(t){return ft(this.ref.get(t)).pipe(ge)}};function kd(e,t){return Jf(e,t).pipe(Vi(void 0),nc(),V(i=>{let[n,r]=i,o=r.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return n&&JSON.stringify(n.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,c)=>{let l=o.find(u=>u.doc.ref.isEqual(a.ref)),d=n?.payload.docs.find(u=>u.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function Dx(e,t,i){return kd(e,i).pipe(yr((n,r)=>k1(n,r.map(o=>o.payload),t),[]),ic(),V(n=>n.map(r=>({type:r.type,payload:r}))))}function k1(e,t,i){return t.forEach(n=>{i.indexOf(n.type)>-1&&(e=C1(e,n))}),e}function Xf(e,t,i,...n){let r=e.slice();return r.splice(t,i,...n),r}function C1(e,t){switch(t.type){case"added":if(!(e[t.newIndex]&&e[t.newIndex].doc.ref.isEqual(t.doc.ref)))return Xf(e,t.newIndex,0,t);break;case"modified":if(e[t.oldIndex]==null||e[t.oldIndex].doc.ref.isEqual(t.doc.ref))if(t.oldIndex!==t.newIndex){let i=e.slice();return i.splice(t.oldIndex,1),i.splice(t.newIndex,0,t),i}else return Xf(e,t.newIndex,1,t);break;case"removed":if(e[t.oldIndex]&&e[t.oldIndex].doc.ref.isEqual(t.doc.ref))return Xf(e,t.oldIndex,1);break}return e}function Rx(e){return(!e||e.length===0)&&(e=["added","removed","modified"]),e}var Cd=class{ref;query;afs;constructor(t,i,n){this.ref=t,this.query=i,this.afs=n}stateChanges(t){let i=kd(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(i=i.pipe(V(n=>n.filter(r=>t.indexOf(r.type)>-1)))),i.pipe(Vi(void 0),nc(),se(([n,r])=>r.length>0||!n),V(([,n])=>n),ge)}auditTrail(t){return this.stateChanges(t).pipe(yr((i,n)=>[...i,...n],[]))}snapshotChanges(t){let i=Rx(t);return Dx(this.query,i,this.afs.schedulers.outsideAngular).pipe(ge)}valueChanges(t={}){return Jf(this.query,this.afs.schedulers.outsideAngular).pipe(V(i=>i.payload.docs.map(n=>t.idField?bt(k({},n.data()),{[t.idField]:n.id}):n.data())),ge)}get(t){return ft(this.query.get(t)).pipe(ge)}add(t){return this.ref.add(t)}doc(t){return new Ad(this.ref.doc(t),this.afs)}},Zf=class{query;afs;constructor(t,i){this.query=t,this.afs=i}stateChanges(t){return!t||t.length===0?kd(this.query,this.afs.schedulers.outsideAngular).pipe(ge):kd(this.query,this.afs.schedulers.outsideAngular).pipe(V(i=>i.filter(n=>t.indexOf(n.type)>-1)),se(i=>i.length>0),ge)}auditTrail(t){return this.stateChanges(t).pipe(yr((i,n)=>[...i,...n],[]))}snapshotChanges(t){let i=Rx(t);return Dx(this.query,i,this.afs.schedulers.outsideAngular).pipe(ge)}valueChanges(t={}){return Jf(this.query,this.afs.schedulers.outsideAngular).pipe(V(n=>n.payload.docs.map(r=>t.idField?k({[t.idField]:r.id},r.data()):r.data())),ge)}get(t){return ft(this.query.get(t)).pipe(ge)}},Mx=new B("angularfire2.enableFirestorePersistence"),Px=new B("angularfire2.firestore.persistenceSettings"),T1=new B("angularfire2.firestore.settings"),S1=new B("angularfire2.firestore.use-emulator");function Nx(e,t=i=>i){return{query:t(e),ref:e}}var D1=(()=>{class e{schedulers;firestore;persistenceEnabled$;constructor(i,n,r,o,s,a,c,l,d,u,h,m,E,w,b,A,q){this.schedulers=c;let N=as(i,a,n),z=d;u&&hh(N,a,h,E,w,b,m,A),[this.firestore,this.persistenceEnabled$]=Rc(`${N.name}.firestore`,"AngularFirestore",N.name,()=>{let H=a.runOutsideAngular(()=>N.firestore());if(o&&H.settings(o),z&&H.useEmulator(...z),r&&!Dn(s)){let et=()=>{try{return ft(H.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(At){return typeof console<"u"&&console.warn(At),F(!1)}};return[H,a.runOutsideAngular(et)]}else return[H,F(!1)]},[o,z,r])}collection(i,n){let r;typeof i=="string"?r=this.firestore.collection(i):r=i;let{ref:o,query:s}=Nx(r,n),a=this.schedulers.ngZone.run(()=>o);return new Cd(a,s,this)}collectionGroup(i,n){let r=n||(s=>s),o=this.firestore.collectionGroup(i);return new Zf(r(o),this)}doc(i){let n;typeof i=="string"?n=this.firestore.doc(i):n=i;let r=this.schedulers.ngZone.run(()=>n);return new Ad(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(n){return new(n||e)(_(Fr),_(Or,8),_(Mx,8),_(T1,8),_(ae),_(J),_(Sc),_(Px,8),_(S1,8),_(L_,8),_(sh,8),_(ah,8),_(ch,8),_(lh,8),_(dh,8),_(uh,8),_(Nn,8))};static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})(),Fx=(()=>{class e{constructor(){fe.registerVersion("angularfire",Nr.full,"fst-compat")}static enablePersistence(i){return{ngModule:e,providers:[{provide:Mx,useValue:!0},{provide:Px,useValue:i}]}}static \u0275fac=function(n){return new(n||e)};static \u0275mod=$({type:e});static \u0275inj=G({providers:[D1]})}return e})();var Z="primary",Na=Symbol("RouteTitle"),rg=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let i=this.params[t];return Array.isArray(i)?i[0]:i}return null}getAll(t){if(this.has(t)){let i=this.params[t];return Array.isArray(i)?i:[i]}return[]}get keys(){return Object.keys(this.params)}};function Po(e){return new rg(e)}function R1(e,t,i){let n=i.path.split("/");if(n.length>e.length||i.pathMatch==="full"&&(t.hasChildren()||n.length<e.length))return null;let r={};for(let o=0;o<n.length;o++){let s=n[o],a=e[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,n.length),posParams:r}}function M1(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(!gi(e[i],t[i]))return!1;return!0}function gi(e,t){let i=e?og(e):void 0,n=t?og(t):void 0;if(!i||!n||i.length!=n.length)return!1;let r;for(let o=0;o<i.length;o++)if(r=i[o],!Gx(e[r],t[r]))return!1;return!0}function og(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function Gx(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let i=[...e].sort(),n=[...t].sort();return i.every((r,o)=>n[o]===r)}else return e===t}function $x(e){return e.length>0?e[e.length-1]:null}function _n(e){return mb(e)?e:cc(e)?ft(Promise.resolve(e)):F(e)}var P1={exact:Qx,subset:Wx},Kx={exact:N1,subset:F1,ignored:()=>!0};function Ox(e,t,i){return P1[i.paths](e.root,t.root,i.matrixParams)&&Kx[i.queryParams](e.queryParams,t.queryParams)&&!(i.fragment==="exact"&&e.fragment!==t.fragment)}function N1(e,t){return gi(e,t)}function Qx(e,t,i){if(!mr(e.segments,t.segments)||!Dd(e.segments,t.segments,i)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let n in t.children)if(!e.children[n]||!Qx(e.children[n],t.children[n],i))return!1;return!0}function F1(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(i=>Gx(e[i],t[i]))}function Wx(e,t,i){return Hx(e,t,t.segments,i)}function Hx(e,t,i,n){if(e.segments.length>i.length){let r=e.segments.slice(0,i.length);return!(!mr(r,i)||t.hasChildren()||!Dd(r,i,n))}else if(e.segments.length===i.length){if(!mr(e.segments,i)||!Dd(e.segments,i,n))return!1;for(let r in t.children)if(!e.children[r]||!Wx(e.children[r],t.children[r],n))return!1;return!0}else{let r=i.slice(0,e.segments.length),o=i.slice(e.segments.length);return!mr(e.segments,r)||!Dd(e.segments,r,n)||!e.children[Z]?!1:Hx(e.children[Z],t,o,n)}}function Dd(e,t,i){return t.every((n,r)=>Kx[i](e[r].parameters,n.parameters))}var fn=class{constructor(t=new st([],{}),i={},n=null){this.root=t,this.queryParams=i,this.fragment=n}get queryParamMap(){return this._queryParamMap??=Po(this.queryParams),this._queryParamMap}toString(){return L1.serialize(this)}},st=class{constructor(t,i){this.segments=t,this.children=i,this.parent=null,Object.values(i).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Rd(this)}},hr=class{constructor(t,i){this.path=t,this.parameters=i}get parameterMap(){return this._parameterMap??=Po(this.parameters),this._parameterMap}toString(){return Xx(this)}};function O1(e,t){return mr(e,t)&&e.every((i,n)=>gi(i.parameters,t[n].parameters))}function mr(e,t){return e.length!==t.length?!1:e.every((i,n)=>i.path===t[n].path)}function V1(e,t){let i=[];return Object.entries(e.children).forEach(([n,r])=>{n===Z&&(i=i.concat(t(r,n)))}),Object.entries(e.children).forEach(([n,r])=>{n!==Z&&(i=i.concat(t(r,n)))}),i}var Fa=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=O({token:t,factory:()=>new ka,providedIn:"root"});let e=t;return e})(),ka=class{parse(t){let i=new ag(t);return new fn(i.parseRootSegment(),i.parseQueryParams(),i.parseFragment())}serialize(t){let i=`/${ya(t.root,!0)}`,n=U1(t.queryParams),r=typeof t.fragment=="string"?`#${B1(t.fragment)}`:"";return`${i}${n}${r}`}},L1=new ka;function Rd(e){return e.segments.map(t=>Xx(t)).join("/")}function ya(e,t){if(!e.hasChildren())return Rd(e);if(t){let i=e.children[Z]?ya(e.children[Z],!1):"",n=[];return Object.entries(e.children).forEach(([r,o])=>{r!==Z&&n.push(`${r}:${ya(o,!1)}`)}),n.length>0?`${i}(${n.join("//")})`:i}else{let i=V1(e,(n,r)=>r===Z?[ya(e.children[Z],!1)]:[`${r}:${ya(n,!1)}`]);return Object.keys(e.children).length===1&&e.children[Z]!=null?`${Rd(e)}/${i[0]}`:`${Rd(e)}/(${i.join("//")})`}}function Yx(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Td(e){return Yx(e).replace(/%3B/gi,";")}function B1(e){return encodeURI(e)}function sg(e){return Yx(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Md(e){return decodeURIComponent(e)}function Vx(e){return Md(e.replace(/\+/g,"%20"))}function Xx(e){return`${sg(e.path)}${j1(e.parameters)}`}function j1(e){return Object.entries(e).map(([t,i])=>`;${sg(t)}=${sg(i)}`).join("")}function U1(e){let t=Object.entries(e).map(([i,n])=>Array.isArray(n)?n.map(r=>`${Td(i)}=${Td(r)}`).join("&"):`${Td(i)}=${Td(n)}`).filter(i=>i);return t.length?`?${t.join("&")}`:""}var z1=/^[^\/()?;#]+/;function tg(e){let t=e.match(z1);return t?t[0]:""}var q1=/^[^\/()?;=#]+/;function G1(e){let t=e.match(q1);return t?t[0]:""}var $1=/^[^=?&#]+/;function K1(e){let t=e.match($1);return t?t[0]:""}var Q1=/^[^&#]+/;function W1(e){let t=e.match(Q1);return t?t[0]:""}var ag=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new st([],{}):new st([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let i={};this.peekStartsWith("/(")&&(this.capture("/"),i=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(i).length>0)&&(n[Z]=new st(t,i)),n}parseSegment(){let t=tg(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new ot(4009,!1);return this.capture(t),new hr(Md(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let i=G1(this.remaining);if(!i)return;this.capture(i);let n="";if(this.consumeOptional("=")){let r=tg(this.remaining);r&&(n=r,this.capture(n))}t[Md(i)]=Md(n)}parseQueryParam(t){let i=K1(this.remaining);if(!i)return;this.capture(i);let n="";if(this.consumeOptional("=")){let s=W1(this.remaining);s&&(n=s,this.capture(n))}let r=Vx(i),o=Vx(n);if(t.hasOwnProperty(r)){let s=t[r];Array.isArray(s)||(s=[s],t[r]=s),s.push(o)}else t[r]=o}parseParens(t){let i={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let n=tg(this.remaining),r=this.remaining[n.length];if(r!=="/"&&r!==")"&&r!==";")throw new ot(4010,!1);let o;n.indexOf(":")>-1?(o=n.slice(0,n.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=Z);let s=this.parseChildren();i[o]=Object.keys(s).length===1?s[Z]:new st([],s),this.consumeOptional("//")}return i}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new ot(4011,!1)}};function Zx(e){return e.segments.length>0?new st([],{[Z]:e}):e}function Jx(e){let t={};for(let[n,r]of Object.entries(e.children)){let o=Jx(r);if(n===Z&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[n]=o)}let i=new st(e.segments,t);return H1(i)}function H1(e){if(e.numberOfChildren===1&&e.children[Z]){let t=e.children[Z];return new st(e.segments.concat(t.segments),t.children)}return e}function No(e){return e instanceof fn}function Y1(e,t,i=null,n=null){let r=tI(e);return eI(r,t,i,n)}function tI(e){let t;function i(o){let s={};for(let c of o.children){let l=i(c);s[c.outlet]=l}let a=new st(o.url,s);return o===e&&(t=a),a}let n=i(e.root),r=Zx(n);return t??r}function eI(e,t,i,n){let r=e;for(;r.parent;)r=r.parent;if(t.length===0)return eg(r,r,r,i,n);let o=X1(t);if(o.toRoot())return eg(r,r,new st([],{}),i,n);let s=Z1(o,r,e),a=s.processChildren?Ia(s.segmentGroup,s.index,o.commands):nI(s.segmentGroup,s.index,o.commands);return eg(r,s.segmentGroup,a,i,n)}function Pd(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function Ca(e){return typeof e=="object"&&e!=null&&e.outlets}function eg(e,t,i,n,r){let o={};n&&Object.entries(n).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let s;e===t?s=i:s=iI(e,t,i);let a=Zx(Jx(s));return new fn(a,o,r)}function iI(e,t,i){let n={};return Object.entries(e.children).forEach(([r,o])=>{o===t?n[r]=i:n[r]=iI(o,t,i)}),new st(e.segments,n)}var Nd=class{constructor(t,i,n){if(this.isAbsolute=t,this.numberOfDoubleDots=i,this.commands=n,t&&n.length>0&&Pd(n[0]))throw new ot(4003,!1);let r=n.find(Ca);if(r&&r!==$x(n))throw new ot(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function X1(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new Nd(!0,0,e);let t=0,i=!1,n=e.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?i=!0:a===".."?t++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new Nd(i,t,n)}var Ro=class{constructor(t,i,n){this.segmentGroup=t,this.processChildren=i,this.index=n}};function Z1(e,t,i){if(e.isAbsolute)return new Ro(t,!0,0);if(!i)return new Ro(t,!1,NaN);if(i.parent===null)return new Ro(i,!0,0);let n=Pd(e.commands[0])?0:1,r=i.segments.length-1+n;return J1(i,r,e.numberOfDoubleDots)}function J1(e,t,i){let n=e,r=t,o=i;for(;o>r;){if(o-=r,n=n.parent,!n)throw new ot(4005,!1);r=n.segments.length}return new Ro(n,!1,r-o)}function tS(e){return Ca(e[0])?e[0].outlets:{[Z]:e}}function nI(e,t,i){if(e??=new st([],{}),e.segments.length===0&&e.hasChildren())return Ia(e,t,i);let n=eS(e,t,i),r=i.slice(n.commandIndex);if(n.match&&n.pathIndex<e.segments.length){let o=new st(e.segments.slice(0,n.pathIndex),{});return o.children[Z]=new st(e.segments.slice(n.pathIndex),e.children),Ia(o,0,r)}else return n.match&&r.length===0?new st(e.segments,{}):n.match&&!e.hasChildren()?cg(e,t,i):n.match?Ia(e,0,r):cg(e,t,i)}function Ia(e,t,i){if(i.length===0)return new st(e.segments,{});{let n=tS(i),r={};if(Object.keys(n).some(o=>o!==Z)&&e.children[Z]&&e.numberOfChildren===1&&e.children[Z].segments.length===0){let o=Ia(e.children[Z],t,i);return new st(e.segments,o.children)}return Object.entries(n).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=nI(e.children[o],t,s))}),Object.entries(e.children).forEach(([o,s])=>{n[o]===void 0&&(r[o]=s)}),new st(e.segments,r)}}function eS(e,t,i){let n=0,r=t,o={match:!1,pathIndex:0,commandIndex:0};for(;r<e.segments.length;){if(n>=i.length)return o;let s=e.segments[r],a=i[n];if(Ca(a))break;let c=`${a}`,l=n<i.length-1?i[n+1]:null;if(r>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!Bx(c,l,s))return o;n+=2}else{if(!Bx(c,{},s))return o;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}function cg(e,t,i){let n=e.segments.slice(0,t),r=0;for(;r<i.length;){let o=i[r];if(Ca(o)){let c=iS(o.outlets);return new st(n,c)}if(r===0&&Pd(i[0])){let c=e.segments[t];n.push(new hr(c.path,Lx(i[0]))),r++;continue}let s=Ca(o)?o.outlets[Z]:`${o}`,a=r<i.length-1?i[r+1]:null;s&&a&&Pd(a)?(n.push(new hr(s,Lx(a))),r+=2):(n.push(new hr(s,{})),r++)}return new st(n,{})}function iS(e){let t={};return Object.entries(e).forEach(([i,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(t[i]=cg(new st([],{}),0,n))}),t}function Lx(e){let t={};return Object.entries(e).forEach(([i,n])=>t[i]=`${n}`),t}function Bx(e,t,i){return e==i.path&&gi(t,i.parameters)}var Ea="imperative",Kt=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(Kt||{}),Fe=class{constructor(t,i){this.id=t,this.url=i}},Fo=class extends Fe{constructor(t,i,n="imperative",r=null){super(t,i),this.type=Kt.NavigationStart,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Qe=class extends Fe{constructor(t,i,n){super(t,i),this.urlAfterRedirects=n,this.type=Kt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ne=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(Ne||{}),Fd=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(Fd||{}),gn=class extends Fe{constructor(t,i,n,r){super(t,i),this.reason=n,this.code=r,this.type=Kt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},bn=class extends Fe{constructor(t,i,n,r){super(t,i),this.reason=n,this.code=r,this.type=Kt.NavigationSkipped}},Ta=class extends Fe{constructor(t,i,n,r){super(t,i),this.error=n,this.target=r,this.type=Kt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Od=class extends Fe{constructor(t,i,n,r){super(t,i),this.urlAfterRedirects=n,this.state=r,this.type=Kt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lg=class extends Fe{constructor(t,i,n,r){super(t,i),this.urlAfterRedirects=n,this.state=r,this.type=Kt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dg=class extends Fe{constructor(t,i,n,r,o){super(t,i),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=o,this.type=Kt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},ug=class extends Fe{constructor(t,i,n,r){super(t,i),this.urlAfterRedirects=n,this.state=r,this.type=Kt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hg=class extends Fe{constructor(t,i,n,r){super(t,i),this.urlAfterRedirects=n,this.state=r,this.type=Kt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},mg=class{constructor(t){this.route=t,this.type=Kt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},pg=class{constructor(t){this.route=t,this.type=Kt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},fg=class{constructor(t){this.snapshot=t,this.type=Kt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gg=class{constructor(t){this.snapshot=t,this.type=Kt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bg=class{constructor(t){this.snapshot=t,this.type=Kt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_g=class{constructor(t){this.snapshot=t,this.type=Kt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vd=class{constructor(t,i,n){this.routerEvent=t,this.position=i,this.anchor=n,this.type=Kt.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Sa=class{},Da=class{constructor(t){this.url=t}};var vg=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Oa,this.attachRef=null}},Oa=(()=>{let t=class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){let o=this.getOrCreateContext(n);o.outlet=r,this.contexts.set(n,o)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new vg,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Ld=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let i=this.pathFromRoot(t);return i.length>1?i[i.length-2]:null}children(t){let i=yg(t,this._root);return i?i.children.map(n=>n.value):[]}firstChild(t){let i=yg(t,this._root);return i&&i.children.length>0?i.children[0].value:null}siblings(t){let i=wg(t,this._root);return i.length<2?[]:i[i.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return wg(t,this._root).map(i=>i.value)}};function yg(e,t){if(e===t.value)return t;for(let i of t.children){let n=yg(e,i);if(n)return n}return null}function wg(e,t){if(e===t.value)return[t];for(let i of t.children){let n=wg(e,i);if(n.length)return n.unshift(t),n}return[]}var Ce=class{constructor(t,i){this.value=t,this.children=i}toString(){return`TreeNode(${this.value})`}};function Do(e){let t={};return e&&e.children.forEach(i=>t[i.value.outlet]=i),t}var Bd=class extends Ld{constructor(t,i){super(t),this.snapshot=i,Rg(this,t)}toString(){return this.snapshot.toString()}};function rI(e){let t=nS(e),i=new me([new hr("",{})]),n=new me({}),r=new me({}),o=new me({}),s=new me(""),a=new Zt(i,n,o,s,r,Z,e,t.root);return a.snapshot=t.root,new Bd(new Ce(a,[]),t)}function nS(e){let t={},i={},n={},r="",o=new Ra([],t,n,r,i,Z,e,null,{});return new jd("",new Ce(o,[]))}var Zt=class{constructor(t,i,n,r,o,s,a,c){this.urlSubject=t,this.paramsSubject=i,this.queryParamsSubject=n,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(V(l=>l[Na]))??F(void 0),this.url=t,this.params=i,this.queryParams=n,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(V(t=>Po(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(V(t=>Po(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Dg(e,t,i="emptyOnly"){let n,{routeConfig:r}=e;return t!==null&&(i==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?n={params:k(k({},t.params),e.params),data:k(k({},t.data),e.data),resolve:k(k(k(k({},e.data),t.data),r?.data),e._resolvedData)}:n={params:k({},e.params),data:k({},e.data),resolve:k(k({},e.data),e._resolvedData??{})},r&&sI(r)&&(n.resolve[Na]=r.title),n}var Ra=class{get title(){return this.data?.[Na]}constructor(t,i,n,r,o,s,a,c,l){this.url=t,this.params=i,this.queryParams=n,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Po(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Po(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(n=>n.toString()).join("/"),i=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${i}')`}},jd=class extends Ld{constructor(t,i){super(i),this.url=t,Rg(this,i)}toString(){return oI(this._root)}};function Rg(e,t){t.value._routerState=e,t.children.forEach(i=>Rg(e,i))}function oI(e){let t=e.children.length>0?` { ${e.children.map(oI).join(", ")} } `:"";return`${e.value}${t}`}function ig(e){if(e.snapshot){let t=e.snapshot,i=e._futureSnapshot;e.snapshot=i,gi(t.queryParams,i.queryParams)||e.queryParamsSubject.next(i.queryParams),t.fragment!==i.fragment&&e.fragmentSubject.next(i.fragment),gi(t.params,i.params)||e.paramsSubject.next(i.params),M1(t.url,i.url)||e.urlSubject.next(i.url),gi(t.data,i.data)||e.dataSubject.next(i.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function xg(e,t){let i=gi(e.params,t.params)&&O1(e.url,t.url),n=!e.parent!=!t.parent;return i&&!n&&(!e.parent||xg(e.parent,t.parent))}function sI(e){return typeof e.title=="string"||e.title===null}var pr=(()=>{let t=class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=Z,this.activateEvents=new we,this.deactivateEvents=new we,this.attachEvents=new we,this.detachEvents=new we,this.parentContexts=M(Oa),this.location=M(ku),this.changeDetector=M(ti),this.environmentInjector=M(An),this.inputBinder=M($d,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:o}=n.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ot(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ot(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ot(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new ot(4013,!1);this._activatedRoute=n;let o=this.location,a=n.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new Ig(n,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=at({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Xe]});let e=t;return e})(),Ig=class{constructor(t,i,n){this.route=t,this.childContexts=i,this.parent=n}get(t,i){return t===Zt?this.route:t===Oa?this.childContexts:this.parent.get(t,i)}},$d=new B(""),jx=(()=>{let t=class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:r}=n,o=vr([r.queryParams,r.params,r.data]).pipe(Pt(([s,a,c],l)=>(c=k(k(k({},s),a),c),l===0?F(c):Promise.resolve(c)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(n);return}let a=Ub(r.component);if(!a){this.unsubscribeFromRouteData(n);return}for(let{templateName:c}of a.inputs)n.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(n,o)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac});let e=t;return e})();function rS(e,t,i){let n=Ma(e,t._root,i?i._root:void 0);return new Bd(n,t)}function Ma(e,t,i){if(i&&e.shouldReuseRoute(t.value,i.value.snapshot)){let n=i.value;n._futureSnapshot=t.value;let r=oS(e,t,i);return new Ce(n,r)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Ma(e,a)),s}}let n=sS(t.value),r=t.children.map(o=>Ma(e,o));return new Ce(n,r)}}function oS(e,t,i){return t.children.map(n=>{for(let r of i.children)if(e.shouldReuseRoute(n.value,r.value.snapshot))return Ma(e,n,r);return Ma(e,n)})}function sS(e){return new Zt(new me(e.url),new me(e.params),new me(e.queryParams),new me(e.fragment),new me(e.data),e.outlet,e.component,e)}var aI="ngNavigationCancelingError";function cI(e,t){let{redirectTo:i,navigationBehaviorOptions:n}=No(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=lI(!1,Ne.Redirect);return r.url=i,r.navigationBehaviorOptions=n,r}function lI(e,t){let i=new Error(`NavigationCancelingError: ${e||""}`);return i[aI]=!0,i.cancellationCode=t,i}function aS(e){return dI(e)&&No(e.url)}function dI(e){return!!e&&e[aI]}var cS=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Q({type:t,selectors:[["ng-component"]],standalone:!0,features:[Ie],decls:1,vars:0,template:function(r,o){r&1&&ht(0,"router-outlet")},dependencies:[pr],encapsulation:2});let e=t;return e})();function lS(e,t){return e.providers&&!e._injector&&(e._injector=Tu(e.providers,t,`Route: ${e.path}`)),e._injector??t}function Mg(e){let t=e.children&&e.children.map(Mg),i=t?bt(k({},e),{children:t}):k({},e);return!i.component&&!i.loadComponent&&(t||i.loadChildren)&&i.outlet&&i.outlet!==Z&&(i.component=cS),i}function bi(e){return e.outlet||Z}function dS(e,t){let i=e.filter(n=>bi(n)===t);return i.push(...e.filter(n=>bi(n)!==t)),i}function Va(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let i=t.routeConfig;if(i?._loadedInjector)return i._loadedInjector;if(i?._injector)return i._injector}return null}var uS=(e,t,i,n)=>V(r=>(new Eg(t,r.targetRouterState,r.currentRouterState,i,n).activate(e),r)),Eg=class{constructor(t,i,n,r,o){this.routeReuseStrategy=t,this.futureState=i,this.currState=n,this.forwardEvent=r,this.inputBindingEnabled=o}activate(t){let i=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(i,n,t),ig(this.futureState.root),this.activateChildRoutes(i,n,t)}deactivateChildRoutes(t,i,n){let r=Do(i);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],n),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,n)})}deactivateRoutes(t,i,n){let r=t.value,o=i?i.value:null;if(r===o)if(r.component){let s=n.getContext(r.outlet);s&&this.deactivateChildRoutes(t,i,s.children)}else this.deactivateChildRoutes(t,i,n);else o&&this.deactivateRouteAndItsChildren(i,n)}deactivateRouteAndItsChildren(t,i){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,i):this.deactivateRouteAndOutlet(t,i)}detachAndStoreRouteSubtree(t,i){let n=i.getContext(t.value.outlet),r=n&&t.value.component?n.children:i,o=Do(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(n&&n.outlet){let s=n.outlet.detach(),a=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,i){let n=i.getContext(t.value.outlet),r=n&&t.value.component?n.children:i,o=Do(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(t,i,n){let r=Do(i);t.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],n),this.forwardEvent(new _g(o.value.snapshot))}),t.children.length&&this.forwardEvent(new gg(t.value.snapshot))}activateRoutes(t,i,n){let r=t.value,o=i?i.value:null;if(ig(r),r===o)if(r.component){let s=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,i,s.children)}else this.activateChildRoutes(t,i,n);else if(r.component){let s=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),ig(a.route.value),this.activateChildRoutes(t,null,s.children)}else{let a=Va(r.snapshot);s.attachRef=null,s.route=r,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,n)}},Ud=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Mo=class{constructor(t,i){this.component=t,this.route=i}};function hS(e,t,i){let n=e._root,r=t?t._root:null;return wa(n,r,i,[n.value])}function mS(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function Vo(e,t){let i=Symbol(),n=t.get(e,i);return n===i?typeof e=="function"&&!vb(e)?e:t.get(e):n}function wa(e,t,i,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=Do(t);return e.children.forEach(s=>{pS(s,o[s.value.outlet],i,n.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Aa(a,i.getContext(s),r)),r}function pS(e,t,i,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,s=t?t.value:null,a=i?i.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=fS(s,o,o.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new Ud(n)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?wa(e,t,a?a.children:null,n,r):wa(e,t,i,n,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Mo(a.outlet.component,s))}else s&&Aa(t,a,r),r.canActivateChecks.push(new Ud(n)),o.component?wa(e,null,a?a.children:null,n,r):wa(e,null,i,n,r);return r}function fS(e,t,i){if(typeof i=="function")return i(e,t);switch(i){case"pathParamsChange":return!mr(e.url,t.url);case"pathParamsOrQueryParamsChange":return!mr(e.url,t.url)||!gi(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!xg(e,t)||!gi(e.queryParams,t.queryParams);case"paramsChange":default:return!xg(e,t)}}function Aa(e,t,i){let n=Do(e),r=e.value;Object.entries(n).forEach(([o,s])=>{r.component?t?Aa(s,t.children.getContext(o),i):Aa(s,null,i):Aa(s,t,i)}),r.component?t&&t.outlet&&t.outlet.isActivated?i.canDeactivateChecks.push(new Mo(t.outlet.component,r)):i.canDeactivateChecks.push(new Mo(null,r)):i.canDeactivateChecks.push(new Mo(null,r))}function La(e){return typeof e=="function"}function gS(e){return typeof e=="boolean"}function bS(e){return e&&La(e.canLoad)}function _S(e){return e&&La(e.canActivate)}function vS(e){return e&&La(e.canActivateChild)}function yS(e){return e&&La(e.canDeactivate)}function wS(e){return e&&La(e.canMatch)}function uI(e){return e instanceof pb||e?.name==="EmptyError"}var Sd=Symbol("INITIAL_VALUE");function Oo(){return Pt(e=>vr(e.map(t=>t.pipe(Ve(1),Vi(Sd)))).pipe(V(t=>{for(let i of t)if(i!==!0){if(i===Sd)return Sd;if(i===!1||i instanceof fn)return i}return!0}),se(t=>t!==Sd),Ve(1)))}function xS(e,t){return ve(i=>{let{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=i;return s.length===0&&o.length===0?F(bt(k({},i),{guardsResult:!0})):IS(s,n,r,e).pipe(ve(a=>a&&gS(a)?ES(n,o,e,t):F(a)),V(a=>bt(k({},i),{guardsResult:a})))})}function IS(e,t,i,n){return ft(e).pipe(ve(r=>SS(r.component,r.route,i,t,n)),Ye(r=>r!==!0,!0))}function ES(e,t,i,n){return ft(t).pipe(Oi(r=>tc(kS(r.route.parent,n),AS(r.route,n),TS(e,r.path,i),CS(e,r.route,i))),Ye(r=>r!==!0,!0))}function AS(e,t){return e!==null&&t&&t(new bg(e)),F(!0)}function kS(e,t){return e!==null&&t&&t(new fg(e)),F(!0)}function CS(e,t,i){let n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||n.length===0)return F(!0);let r=n.map(o=>vu(()=>{let s=Va(t)??i,a=Vo(o,s),c=_S(a)?a.canActivate(t,e):Je(s,()=>a(t,e));return _n(c).pipe(Ye())}));return F(r).pipe(Oo())}function TS(e,t,i){let n=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>mS(s)).filter(s=>s!==null).map(s=>vu(()=>{let a=s.guards.map(c=>{let l=Va(s.node)??i,d=Vo(c,l),u=vS(d)?d.canActivateChild(n,e):Je(l,()=>d(n,e));return _n(u).pipe(Ye())});return F(a).pipe(Oo())}));return F(o).pipe(Oo())}function SS(e,t,i,n,r){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return F(!0);let s=o.map(a=>{let c=Va(t)??r,l=Vo(a,c),d=yS(l)?l.canDeactivate(e,t,i,n):Je(c,()=>l(e,t,i,n));return _n(d).pipe(Ye())});return F(s).pipe(Oo())}function DS(e,t,i,n){let r=t.canLoad;if(r===void 0||r.length===0)return F(!0);let o=r.map(s=>{let a=Vo(s,e),c=bS(a)?a.canLoad(t,i):Je(e,()=>a(t,i));return _n(c)});return F(o).pipe(Oo(),hI(n))}function hI(e){return ub(_t(t=>{if(No(t))throw cI(e,t)}),V(t=>t===!0))}function RS(e,t,i,n){let r=t.canMatch;if(!r||r.length===0)return F(!0);let o=r.map(s=>{let a=Vo(s,e),c=wS(a)?a.canMatch(t,i):Je(e,()=>a(t,i));return _n(c)});return F(o).pipe(Oo(),hI(n))}var Pa=class{constructor(t){this.segmentGroup=t||null}},zd=class extends Error{constructor(t){super(),this.urlTree=t}};function So(e){return In(new Pa(e))}function MS(e){return In(new ot(4e3,!1))}function PS(e){return In(lI(!1,Ne.GuardRejected))}var Ag=class{constructor(t,i){this.urlSerializer=t,this.urlTree=i}lineralizeSegments(t,i){let n=[],r=i.root;for(;;){if(n=n.concat(r.segments),r.numberOfChildren===0)return F(n);if(r.numberOfChildren>1||!r.children[Z])return MS(t.redirectTo);r=r.children[Z]}}applyRedirectCommands(t,i,n){let r=this.applyRedirectCreateUrlTree(i,this.urlSerializer.parse(i),t,n);if(i.startsWith("/"))throw new zd(r);return r}applyRedirectCreateUrlTree(t,i,n,r){let o=this.createSegmentGroup(t,i.root,n,r);return new fn(o,this.createQueryParams(i.queryParams,this.urlTree.queryParams),i.fragment)}createQueryParams(t,i){let n={};return Object.entries(t).forEach(([r,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);n[r]=i[a]}else n[r]=o}),n}createSegmentGroup(t,i,n,r){let o=this.createSegments(t,i.segments,n,r),s={};return Object.entries(i.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,n,r)}),new st(o,s)}createSegments(t,i,n,r){return i.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,r):this.findOrReturn(o,n))}findPosParam(t,i,n){let r=n[i.path.substring(1)];if(!r)throw new ot(4001,!1);return r}findOrReturn(t,i){let n=0;for(let r of i){if(r.path===t.path)return i.splice(n),r;n++}return t}},kg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function NS(e,t,i,n,r){let o=Pg(e,t,i);return o.matched?(n=lS(t,n),RS(n,t,i,r).pipe(V(s=>s===!0?o:k({},kg)))):F(o)}function Pg(e,t,i){if(t.path==="**")return FS(i);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||i.length>0)?k({},kg):{matched:!0,consumedSegments:[],remainingSegments:i,parameters:{},positionalParamSegments:{}};let r=(t.matcher||R1)(i,e,t);if(!r)return k({},kg);let o={};Object.entries(r.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=r.consumed.length>0?k(k({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:i.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function FS(e){return{matched:!0,parameters:e.length>0?$x(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function Ux(e,t,i,n){return i.length>0&&LS(e,i,n)?{segmentGroup:new st(t,VS(n,new st(i,e.children))),slicedSegments:[]}:i.length===0&&BS(e,i,n)?{segmentGroup:new st(e.segments,OS(e,i,n,e.children)),slicedSegments:i}:{segmentGroup:new st(e.segments,e.children),slicedSegments:i}}function OS(e,t,i,n){let r={};for(let o of i)if(Kd(e,t,o)&&!n[bi(o)]){let s=new st([],{});r[bi(o)]=s}return k(k({},n),r)}function VS(e,t){let i={};i[Z]=t;for(let n of e)if(n.path===""&&bi(n)!==Z){let r=new st([],{});i[bi(n)]=r}return i}function LS(e,t,i){return i.some(n=>Kd(e,t,n)&&bi(n)!==Z)}function BS(e,t,i){return i.some(n=>Kd(e,t,n))}function Kd(e,t,i){return(e.hasChildren()||t.length>0)&&i.pathMatch==="full"?!1:i.path===""}function jS(e,t,i,n){return bi(e)!==n&&(n===Z||!Kd(t,i,e))?!1:Pg(t,e,i).matched}function US(e,t,i){return t.length===0&&!e.children[i]}var Cg=class{};function zS(e,t,i,n,r,o,s="emptyOnly"){return new Tg(e,t,i,n,r,s,o).recognize()}var qS=31,Tg=class{constructor(t,i,n,r,o,s,a){this.injector=t,this.configLoader=i,this.rootComponentType=n,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Ag(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new ot(4002,`'${t.segmentGroup}'`)}recognize(){let t=Ux(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(V(i=>{let n=new Ra([],Object.freeze({}),Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,{},Z,this.rootComponentType,null,{}),r=new Ce(n,i),o=new jd("",r),s=Y1(n,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,Z).pipe(Fi(n=>{if(n instanceof zd)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof Pa?this.noMatchError(n):n}))}inheritParamsAndData(t,i){let n=t.value,r=Dg(n,i,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(o=>this.inheritParamsAndData(o,n))}processSegmentGroup(t,i,n,r){return n.segments.length===0&&n.hasChildren()?this.processChildren(t,i,n):this.processSegment(t,i,n,n.segments,r,!0).pipe(V(o=>o instanceof Ce?[o]:[]))}processChildren(t,i,n){let r=[];for(let o of Object.keys(n.children))o==="primary"?r.unshift(o):r.push(o);return ft(r).pipe(Oi(o=>{let s=n.children[o],a=dS(i,o);return this.processSegmentGroup(t,a,s,o)}),yr((o,s)=>(o.push(...s),o)),wu(null),bb(),ve(o=>{if(o===null)return So(n);let s=mI(o);return GS(s),F(s)}))}processSegment(t,i,n,r,o,s){return ft(i).pipe(Oi(a=>this.processSegmentAgainstRoute(a._injector??t,i,a,n,r,o,s).pipe(Fi(c=>{if(c instanceof Pa)return F(null);throw c}))),Ye(a=>!!a),Fi(a=>{if(uI(a))return US(n,r,o)?F(new Cg):So(n);throw a}))}processSegmentAgainstRoute(t,i,n,r,o,s,a){return jS(n,r,o,s)?n.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,n,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,r,i,n,o,s):So(r):So(r)}expandSegmentAgainstRouteUsingRedirect(t,i,n,r,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:d}=Pg(i,r,o);if(!a)return So(i);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>qS&&(this.allowRedirects=!1));let u=this.applyRedirects.applyRedirectCommands(c,r.redirectTo,l);return this.applyRedirects.lineralizeSegments(r,u).pipe(ve(h=>this.processSegment(t,n,i,h.concat(d),s,!1)))}matchSegmentAgainstRoute(t,i,n,r,o){let s=NS(i,n,r,t,this.urlSerializer);return n.path==="**"&&(i.children={}),s.pipe(Pt(a=>a.matched?(t=n._injector??t,this.getChildConfig(t,n,r).pipe(Pt(({routes:c})=>{let l=n._loadedInjector??t,{consumedSegments:d,remainingSegments:u,parameters:h}=a,m=new Ra(d,h,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,KS(n),bi(n),n.component??n._loadedComponent??null,n,QS(n)),{segmentGroup:E,slicedSegments:w}=Ux(i,d,u,c);if(w.length===0&&E.hasChildren())return this.processChildren(l,c,E).pipe(V(A=>A===null?null:new Ce(m,A)));if(c.length===0&&w.length===0)return F(new Ce(m,[]));let b=bi(n)===o;return this.processSegment(l,c,E,w,b?Z:o,!0).pipe(V(A=>new Ce(m,A instanceof Ce?[A]:[])))}))):So(i)))}getChildConfig(t,i,n){return i.children?F({routes:i.children,injector:t}):i.loadChildren?i._loadedRoutes!==void 0?F({routes:i._loadedRoutes,injector:i._loadedInjector}):DS(t,i,n,this.urlSerializer).pipe(ve(r=>r?this.configLoader.loadChildren(t,i).pipe(_t(o=>{i._loadedRoutes=o.routes,i._loadedInjector=o.injector})):PS(i))):F({routes:[],injector:t})}};function GS(e){e.sort((t,i)=>t.value.outlet===Z?-1:i.value.outlet===Z?1:t.value.outlet.localeCompare(i.value.outlet))}function $S(e){let t=e.value.routeConfig;return t&&t.path===""}function mI(e){let t=[],i=new Set;for(let n of e){if(!$S(n)){t.push(n);continue}let r=t.find(o=>n.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...n.children),i.add(r)):t.push(n)}for(let n of i){let r=mI(n.children);t.push(new Ce(n.value,r))}return t.filter(n=>!i.has(n))}function KS(e){return e.data||{}}function QS(e){return e.resolve||{}}function WS(e,t,i,n,r,o){return ve(s=>zS(e,t,i,n,s.extractedUrl,r,o).pipe(V(({state:a,tree:c})=>bt(k({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function HS(e,t){return ve(i=>{let{targetSnapshot:n,guards:{canActivateChecks:r}}=i;if(!r.length)return F(i);let o=new Set(r.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of pI(c))s.add(l);let a=0;return ft(s).pipe(Oi(c=>o.has(c)?YS(c,n,e,t):(c.data=Dg(c,c.parent,e).resolve,F(void 0))),_t(()=>a++),xu(1),ve(c=>a===s.size?F(i):wn))})}function pI(e){let t=e.children.map(i=>pI(i)).flat();return[e,...t]}function YS(e,t,i,n){let r=e.routeConfig,o=e._resolve;return r?.title!==void 0&&!sI(r)&&(o[Na]=r.title),XS(o,e,t,n).pipe(V(s=>(e._resolvedData=s,e.data=Dg(e,e.parent,i).resolve,null)))}function XS(e,t,i,n){let r=og(e);if(r.length===0)return F({});let o={};return ft(r).pipe(ve(s=>ZS(e[s],t,i,n).pipe(Ye(),_t(a=>{o[s]=a}))),xu(1),gb(o),Fi(s=>uI(s)?wn:In(s)))}function ZS(e,t,i,n){let r=Va(t)??n,o=Vo(e,r),s=o.resolve?o.resolve(t,i):Je(r,()=>o(t,i));return _n(s)}function ng(e){return Pt(t=>{let i=e(t);return i?ft(i).pipe(V(()=>t)):F(t)})}var fI=(()=>{let t=class t{buildTitle(n){let r,o=n.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(s=>s.outlet===Z);return r}getResolvedTitleForRoute(n){return n.data[Na]}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=O({token:t,factory:()=>M(JS),providedIn:"root"});let e=t;return e})(),JS=(()=>{let t=class t extends fI{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}};t.\u0275fac=function(r){return new(r||t)(_(w_))},t.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Ba=new B("",{providedIn:"root",factory:()=>({})}),qd=new B(""),Ng=(()=>{let t=class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=M(uc)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return F(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=_n(n.loadComponent()).pipe(V(gI),_t(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),vi(()=>{this.componentLoaders.delete(n)})),o=new _u(r,()=>new oe).pipe(bu());return this.componentLoaders.set(n,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return F({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=tD(r,this.compiler,n,this.onLoadEndListener).pipe(vi(()=>{this.childrenLoaders.delete(r)})),a=new _u(s,()=>new oe).pipe(bu());return this.childrenLoaders.set(r,a),a}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function tD(e,t,i,n){return _n(e.loadChildren()).pipe(V(gI),ve(r=>r instanceof Nb||Array.isArray(r)?F(r):ft(t.compileModuleAsync(r))),V(r=>{n&&n(e);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(i).injector,s=o.get(qd,[],{optional:!0,self:!0}).flat()),{routes:s.map(Mg),injector:o}}))}function eD(e){return e&&typeof e=="object"&&"default"in e}function gI(e){return eD(e)?e.default:e}var Fg=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=O({token:t,factory:()=>M(iD),providedIn:"root"});let e=t;return e})(),iD=(()=>{let t=class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),bI=new B(""),_I=new B("");function nD(e,t,i){let n=e.get(_I),r=e.get(mt);return e.get(J).runOutsideAngular(()=>{if(!r.startViewTransition||n.skipNextTransition)return n.skipNextTransition=!1,Promise.resolve();let o,s=new Promise(l=>{o=l}),a=r.startViewTransition(()=>(o(),rD(e))),{onViewTransitionCreated:c}=n;return c&&Je(e,()=>c({transition:a,from:t,to:i})),s})}function rD(e){return new Promise(t=>{Mb(t,{injector:e})})}var Og=(()=>{let t=class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new oe,this.transitionAbortSubject=new oe,this.configLoader=M(Ng),this.environmentInjector=M(An),this.urlSerializer=M(Fa),this.rootContexts=M(Oa),this.location=M(Zo),this.inputBindingEnabled=M($d,{optional:!0})!==null,this.titleStrategy=M(fI),this.options=M(Ba,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=M(Fg),this.createViewTransition=M(bI,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>F(void 0),this.rootComponentType=null;let n=o=>this.events.next(new mg(o)),r=o=>this.events.next(new pg(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(bt(k(k({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,o){return this.transitions=new me({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ea,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(se(s=>s.id!==0),V(s=>bt(k({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Pt(s=>{this.currentTransition=s;let a=!1,c=!1;return F(s).pipe(_t(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?bt(k({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Pt(l=>{let d=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=l.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!d&&u!=="reload"){let h="";return this.events.next(new bn(l.id,this.urlSerializer.serialize(l.rawUrl),h,Fd.IgnoredSameUrlNavigation)),l.resolve(null),wn}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return F(l).pipe(Pt(h=>{let m=this.transitions?.getValue();return this.events.next(new Fo(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),m!==this.transitions?.getValue()?wn:Promise.resolve(h)}),WS(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),_t(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=bt(k({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let m=new Od(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:m,source:E,restoredState:w,extras:b}=l,A=new Fo(h,this.urlSerializer.serialize(m),E,w);this.events.next(A);let q=rI(this.rootComponentType).snapshot;return this.currentTransition=s=bt(k({},l),{targetSnapshot:q,urlAfterRedirects:m,extras:bt(k({},b),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,F(s)}else{let h="";return this.events.next(new bn(l.id,this.urlSerializer.serialize(l.extractedUrl),h,Fd.IgnoredByUrlHandlingStrategy)),l.resolve(null),wn}}),_t(l=>{let d=new lg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),V(l=>(this.currentTransition=s=bt(k({},l),{guards:hS(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),xS(this.environmentInjector,l=>this.events.next(l)),_t(l=>{if(s.guardsResult=l.guardsResult,No(l.guardsResult))throw cI(this.urlSerializer,l.guardsResult);let d=new dg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),se(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Ne.GuardRejected),!1)),ng(l=>{if(l.guards.canActivateChecks.length)return F(l).pipe(_t(d=>{let u=new ug(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(u)}),Pt(d=>{let u=!1;return F(d).pipe(HS(this.paramsInheritanceStrategy,this.environmentInjector),_t({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(d,"",Ne.NoDataFromResolver)}}))}),_t(d=>{let u=new hg(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(u)}))}),ng(l=>{let d=u=>{let h=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(u.routeConfig).pipe(_t(m=>{u.component=m}),V(()=>{})));for(let m of u.children)h.push(...d(m));return h};return vr(d(l.targetSnapshot.root)).pipe(wu(null),Ve(1))}),ng(()=>this.afterPreactivation()),Pt(()=>{let{currentSnapshot:l,targetSnapshot:d}=s,u=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return u?ft(u).pipe(V(()=>s)):F(s)}),V(l=>{let d=rS(n.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=bt(k({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,s}),_t(()=>{this.events.next(new Sa)}),uS(this.rootContexts,n.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Ve(1),_t({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Qe(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),wr(this.transitionAbortSubject.pipe(_t(l=>{throw l}))),vi(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",Ne.SupersededByNewNavigation),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Fi(l=>{if(c=!0,dI(l))this.events.next(new gn(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),aS(l)?this.events.next(new Da(l.url)):s.resolve(!1);else{this.events.next(new Ta(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(n.errorHandler(l))}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return wn}))}))}cancelNavigationTransition(n,r,o){let s=new gn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,o);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function oD(e){return e!==Ea}var sD=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=O({token:t,factory:()=>M(aD),providedIn:"root"});let e=t;return e})(),Sg=class{shouldDetach(t){return!1}store(t,i){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,i){return t.routeConfig===i.routeConfig}},aD=(()=>{let t=class t extends Sg{};t.\u0275fac=(()=>{let n;return function(o){return(n||(n=Ze(t)))(o||t)}})(),t.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),vI=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=O({token:t,factory:()=>M(cD),providedIn:"root"});let e=t;return e})(),cD=(()=>{let t=class t extends vI{constructor(){super(...arguments),this.location=M(Zo),this.urlSerializer=M(Fa),this.options=M(Ba,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=M(Fg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new fn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=rI(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof Fo)this.stateMemento=this.createStateMemento();else if(n instanceof bn)this.rawUrlTree=r.initialUrl;else if(n instanceof Od){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(o,r)}}else n instanceof Sa?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):n instanceof gn&&(n.code===Ne.GuardRejected||n.code===Ne.NoDataFromResolver)?this.restoreHistory(r):n instanceof Ta?this.restoreHistory(r,!0):n instanceof Qe&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let o=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){let s=this.browserPageId,a=k(k({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(o,"",a)}else{let s=k(k({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&s===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}};t.\u0275fac=(()=>{let n;return function(o){return(n||(n=Ze(t)))(o||t)}})(),t.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),xa=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(xa||{});function yI(e,t){e.events.pipe(se(i=>i instanceof Qe||i instanceof gn||i instanceof Ta||i instanceof bn),V(i=>i instanceof Qe||i instanceof bn?xa.COMPLETE:(i instanceof gn?i.code===Ne.Redirect||i.code===Ne.SupersededByNewNavigation:!1)?xa.REDIRECTING:xa.FAILED),se(i=>i!==xa.REDIRECTING),Ve(1)).subscribe(()=>{t()})}function lD(e){throw e}var dD={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},uD={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Mi=(()=>{let t=class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=M(dc),this.stateManager=M(vI),this.options=M(Ba,{optional:!0})||{},this.pendingTasks=M(Yo),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=M(Og),this.urlSerializer=M(Fa),this.location=M(Zo),this.urlHandlingStrategy=M(Fg),this._events=new oe,this.errorHandler=this.options.errorHandler||lD,this.navigated=!1,this.routeReuseStrategy=M(sD),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=M(qd,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!M($d,{optional:!0}),this.eventsSubscription=new qo,this.isNgZoneEnabled=M(J)instanceof J&&J.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof gn&&r.code!==Ne.Redirect&&r.code!==Ne.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Qe)this.navigated=!0;else if(r instanceof Da){let a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),c={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||oD(o.source)};this.scheduleNavigation(a,Ea,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}mD(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ea,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=k({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(n);this.scheduleNavigation(c,r,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Mg),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:l}=r,d=l?this.currentUrlTree.fragment:a,u=null;switch(c){case"merge":u=k(k({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}u!==null&&(u=this.removeEmptyProps(u));let h;try{let m=o?o.snapshot:this.routerState.snapshot.root;h=tI(m)}catch{(typeof n[0]!="string"||!n[0].startsWith("/"))&&(n=[]),h=this.currentUrlTree.root}return eI(h,n,u,d??null)}navigateByUrl(n,r={skipLocationChange:!1}){let o=No(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,Ea,null,r)}navigate(n,r={skipLocationChange:!1}){return hD(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let o;if(r===!0?o=k({},dD):r===!1?o=k({},uD):o=r,No(n))return Ox(this.currentUrlTree,n,o);let s=this.parseUrl(n);return Ox(this.currentUrlTree,s,o)}removeEmptyProps(n){return Object.entries(n).reduce((r,[o,s])=>(s!=null&&(r[o]=s),r),{})}scheduleNavigation(n,r,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,l,d;a?(c=a.resolve,l=a.reject,d=a.promise):d=new Promise((h,m)=>{c=h,l=m});let u=this.pendingTasks.add();return yI(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:c,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(h=>Promise.reject(h))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function hD(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new ot(4008,!1)}function mD(e){return!(e instanceof Sa)&&!(e instanceof Da)}var _e=(()=>{let t=class t{constructor(n,r,o,s,a,c){this.router=n,this.route=r,this.tabIndexAttribute=o,this.renderer=s,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new oe,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=n.events.subscribe(d=>{d instanceof Qe&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){n!=null?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,r,o,s,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(n!==0||r||o||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.href=n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n)):null;let r=this.href===null?null:Db(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(n,r){let o=this.renderer,s=this.el.nativeElement;r!==null?o.setAttribute(s,n,r):o.removeAttribute(s,n)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};t.\u0275fac=function(r){return new(r||t)(R(Mi),R(Zt),oc("tabindex"),R(kr),R(xt),R(Xo))},t.\u0275dir=at({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,o){r&1&&kt("click",function(a){return o.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&pe("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[ut.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Wt],skipLocationChange:[ut.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Wt],replaceUrl:[ut.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Wt],routerLink:"routerLink"},standalone:!0,features:[Le,Xe]});let e=t;return e})(),Qd=(()=>{let t=class t{get isActive(){return this._isActive}constructor(n,r,o,s,a){this.router=n,this.element=r,this.renderer=o,this.cdr=s,this.link=a,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new we,this.routerEventsSubscription=n.events.subscribe(c=>{c instanceof Qe&&this.update()})}ngAfterContentInit(){F(this.links.changes,F(null)).pipe(Go()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=ft(n).pipe(Go()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){let r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(o=>!!o)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let n=this.hasActiveLinks();this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(n))})}isLinkActive(n){let r=pD(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>{let s=o.urlTree;return s?n.isActive(s,r):!1}}hasActiveLinks(){let n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}};t.\u0275fac=function(r){return new(r||t)(R(Mi),R(xt),R(kr),R(ti),R(_e,8))},t.\u0275dir=at({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,o,s){if(r&1&&Sr(s,_e,5),r&2){let a;ji(a=Ui())&&(o.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Xe]});let e=t;return e})();function pD(e){return!!e.paths}var Gd=class{};var fD=(()=>{let t=class t{constructor(n,r,o,s,a){this.router=n,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(se(n=>n instanceof Qe),Oi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){let o=[];for(let s of r){s.providers&&!s._injector&&(s._injector=Tu(s.providers,n,`Route: ${s.path}`));let a=s._injector??n,c=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(c,s.children??s._loadedRoutes))}return ft(o).pipe(Go())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let o;r.loadChildren&&r.canLoad===void 0?o=this.loader.loadChildren(n,r):o=F(null);let s=o.pipe(ve(a=>a===null?F(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??n,a.routes))));if(r.loadComponent&&!r._loadedComponent){let a=this.loader.loadComponent(r);return ft([s,a]).pipe(Go())}else return s})}};t.\u0275fac=function(r){return new(r||t)(_(Mi),_(uc),_(An),_(Gd),_(Ng))},t.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),wI=new B(""),gD=(()=>{let t=class t{constructor(n,r,o,s,a={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Fo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Qe?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof bn&&n.code===Fd.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Vd&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Vd(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};t.\u0275fac=function(r){Tn()},t.\u0275prov=O({token:t,factory:t.\u0275fac});let e=t;return e})();function bD(e){return e.routerState.root}function ja(e,t){return{\u0275kind:e,\u0275providers:t}}function _D(){let e=M(sc);return t=>{let i=e.get(pc);if(t!==i.components[0])return;let n=e.get(Mi),r=e.get(xI);e.get(Vg)===1&&n.initialNavigation(),e.get(II,null,Eu.Optional)?.setUpPreloading(),e.get(wI,null,Eu.Optional)?.init(),n.resetRootComponentType(i.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var xI=new B("",{factory:()=>new oe}),Vg=new B("",{providedIn:"root",factory:()=>1});function vD(){return ja(2,[{provide:Vg,useValue:0},{provide:Du,multi:!0,deps:[sc],useFactory:t=>{let i=t.get(Gb,Promise.resolve());return()=>i.then(()=>new Promise(n=>{let r=t.get(Mi),o=t.get(xI);yI(r,()=>{n(!0)}),t.get(Og).afterPreactivation=()=>(n(!0),o.closed?F(void 0):o),r.initialNavigation()}))}}])}function yD(){return ja(3,[{provide:Du,multi:!0,useFactory:()=>{let t=M(Mi);return()=>{t.setUpLocationChangeListener()}}},{provide:Vg,useValue:2}])}var II=new B("");function wD(e){return ja(0,[{provide:II,useExisting:fD},{provide:Gd,useExisting:e}])}function xD(){return ja(8,[jx,{provide:$d,useExisting:jx}])}function ID(e){let t=[{provide:bI,useValue:nD},{provide:_I,useValue:k({skipNextTransition:!!e?.skipInitialTransition},e)}];return ja(9,t)}var zx=new B("ROUTER_FORROOT_GUARD"),ED=[Zo,{provide:Fa,useClass:ka},Mi,Oa,{provide:Zt,useFactory:bD,deps:[Mi]},Ng,[]],Lg=(()=>{let t=class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[ED,[],{provide:qd,multi:!0,useValue:n},{provide:zx,useFactory:TD,deps:[[Mi,new xr,new Au]]},{provide:Ba,useValue:r||{}},r?.useHash?kD():CD(),AD(),r?.preloadingStrategy?wD(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?SD(r):[],r?.bindToComponentInputs?xD().\u0275providers:[],r?.enableViewTransitions?ID().\u0275providers:[],DD()]}}static forChild(n){return{ngModule:t,providers:[{provide:qd,multi:!0,useValue:n}]}}};t.\u0275fac=function(r){return new(r||t)(_(zx,8))},t.\u0275mod=$({type:t}),t.\u0275inj=G({});let e=t;return e})();function AD(){return{provide:wI,useFactory:()=>{let e=M(Hb),t=M(J),i=M(Ba),n=M(Og),r=M(Fa);return i.scrollOffset&&e.setOffset(i.scrollOffset),new gD(r,n,e,t,i)}}}function kD(){return{provide:Xo,useClass:Kb}}function CD(){return{provide:Xo,useClass:$b}}function TD(e){return"guarded"}function SD(e){return[e.initialNavigation==="disabled"?yD().\u0275providers:[],e.initialNavigation==="enabledBlocking"?vD().\u0275providers:[]]}var qx=new B("");function DD(){return[{provide:qx,useFactory:_D},{provide:Ru,multi:!0,useExisting:qx}]}function RD(e,t){if(e&1&&(I(0,"div",5),ht(1,"img",6),y()),e&2){let i=t.$implicit,n=t.index,r=Be();Cr("width",r.slideWidth,"px"),j(),Cr("width",r.imageWidth,"px")("height",r.imageHeight,"px"),Pb("alt","Slide ",n+1,""),ct("src",i,Bi)}}var EI=(()=>{let t=class t{constructor(){this.images=["assets/image.png","assets/20.jpeg","assets/02.jpg"],this.currentIndex=0,this.slideWidth=1e3,this.imageWidth=1e3,this.imageHeight=400}ngOnInit(){this.slideWidth=window.innerWidth}prev(){this.currentIndex=this.currentIndex===0?this.images.length-1:this.currentIndex-1}next(){this.currentIndex=this.currentIndex===this.images.length-1?0:this.currentIndex+1}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Q({type:t,selectors:[["app-home"]],decls:7,vars:3,consts:[[1,"slider-container"],[1,"slider"],["class","slide",3,"width",4,"ngFor","ngForOf"],[1,"btn-prev",3,"click"],[1,"btn-next",3,"click"],[1,"slide"],[3,"src","alt"]],template:function(r,o){r&1&&(I(0,"div",0)(1,"div",1),Qt(2,RD,2,8,"div",2),y(),I(3,"button",3),kt("click",function(){return o.prev()}),C(4,"Prev"),y(),I(5,"button",4),kt("click",function(){return o.next()}),C(6,"Next"),y()()),r&2&&(j(),Cr("transform","translateX("+-o.currentIndex*o.slideWidth+"px)"),j(),ct("ngForOf",o.images))},dependencies:[zi],styles:[".slider-container[_ngcontent-%COMP%]{position:relative;overflow:hidden;height:100vh;margin-left:250px}.slider[_ngcontent-%COMP%]{display:flex;transition:transform .5s ease}.slide[_ngcontent-%COMP%]{flex:0 0 auto}.slider-image[_ngcontent-%COMP%]{overflow:hidden;object-fit:cover}.btn-prev[_ngcontent-%COMP%], .btn-next[_ngcontent-%COMP%]{position:absolute;top:55%;transform:translateY(-50%);background:none;border:none;cursor:pointer}.btn-prev[_ngcontent-%COMP%]{left:10px}.btn-next[_ngcontent-%COMP%]{right:240px}footer[_ngcontent-%COMP%]{background-image:url(/assets/109.png);background-size:cover;color:#fff;padding:95px;position:fixed;bottom:0;width:100%;height:250px}"]});let e=t;return e})();var _i=class{constructor(){this.directors=[{id:"1",image:"/assets/rjm.png",dob:"10 October, 1978",spouse:"Rama Rajamouli",upcoming:"SSMB29",latest:{name:"RRR",url:"https://www.google.com/search?q=RRR&rlz=1C1CHBF_enIN1080IN1080&oq=rrr&gs_lcrp=EgZjaHJvbWUqDggAEEUYJxg7GIAEGIoFMg4IABBFGCcYOxiABBiKBTISCAEQLhgUGIMBGIcCGLEDGIAEMg8IAhAAGEMYsQMYgAQYigUyCggDEAAYsQMYgAQyDwgEEAAYFBiHAhixAxiABDIKCAUQABixAxiABDINCAYQABiDARixAxiABDITCAcQLhiDARjUAhixAxiABBiKBTIKCAgQABixAxiABDIKCAkQABixAxiABNIBBzU1NWowajeoAgCwAgA&sourceid=chrome&ie=UTF-8"},nofilms:"14",awards:"Honored with Padmasri in the year 2016 for directing the masterclass Bahubali",films:{name:"Filmography",url:"https://www.google.com/search?sca_esv=0581e395291e2afa&rlz=1C1CHBF_enIN1080IN1080&sxsrf=ACQVn0_W4A3QBNpXRep5oKCsfvLRWi_rZA:1707903708259&q=ss+rajamouli+filmography&spell=1&sa=X&ved=2ahUKEwjhkN2OxaqEAxW8zDgGHRX9BLIQBSgAegQICBAC&biw=1536&bih=730&dpr=1.25"}},{id:"2",image:"/assets/cnolan.png",dob:"30 July,1970",spouse:"Emma Thomas",upcoming:"Not yet Announced",latest:{name:"Oppenheimer",url:" https://www.google.com/search?q=RRR&rlz=1C1CHBF_enIN1080IN1080&oq=rrr&gs_lcrp=EgZjaHJvbWUqDggAEEUYJxg7GIAEGIoFMg4IABBFGCcYOxiABBiKBTISCAEQLhgUGIMBGIcCGLEDGIAEMg8IAhAAGEMYsQMYgAQYigUyCggDEAAYsQMYgAQyDwgEEAAYFBiHAhixAxiABDIKCAUQABixAxiABDINCAYQABiDARixAxiABDITCAcQLhiDARjUAhixAxiABBiKBTIKCAgQABixAxiABDIKCAkQABixAxiABNIBBzU1NWowajeoAgCwAgA&sourceid=chrome&ie=UTF-8"},nofilms:"12",awards:"Nolan has been nominated for eight Academy Awards, eight British Academy Film Awards and six Golden Globe Awards, winning Best Director for Oppenheimer.",films:{name:"Filmography",url:"https://www.google.com/search?sca_esv=0581e395291e2afa&rlz=1C1CHBF_enIN1080IN1080&sxsrf=ACQVn0_W4A3QBNpXRep5oKCsfvLRWi_rZA:1707903708259&q=ss+rajamouli+filmography&spell=1&sa=X&ved=2ahUKEwjhkN2OxaqEAxW8zDgGHRX9BLIQBSgAegQICBAC&biw=1536&bih=730&dpr=1.25"}},{id:"3",image:"/assets/sk.png",dob:"10 October,1973",spouse:"Thabitha",upcoming:"Pushpa- The Rule",latest:{name:"Pushpa-The Rise",url:" https://www.google.com/search?q=RRR&rlz=1C1CHBF_enIN1080IN1080&oq=rrr&gs_lcrp=EgZjaHJvbWUqDggAEEUYJxg7GIAEGIoFMg4IABBFGCcYOxiABBiKBTISCAEQLhgUGIMBGIcCGLEDGIAEMg8IAhAAGEMYsQMYgAQYigUyCggDEAAYsQMYgAQyDwgEEAAYFBiHAhixAxiABDIKCAUQABixAxiABDINCAYQABiDARixAxiABDITCAcQLhiDARjUAhixAxiABBiKBTIKCAgQABixAxiABDIKCAkQABixAxiABNIBBzU1NWowajeoAgCwAgA&sourceid=chrome&ie=UTF-8"},nofilms:"14",awards:"Won Andhra Pradesh state award for the movie Arya",films:{name:"Filmography",url:"https://www.google.com/search?sca_esv=0581e395291e2afa&rlz=1C1CHBF_enIN1080IN1080&sxsrf=ACQVn0_W4A3QBNpXRep5oKCsfvLRWi_rZA:1707903708259&q=ss+rajamouli+filmography&spell=1&sa=X&ved=2ahUKEwjhkN2OxaqEAxW8zDgGHRX9BLIQBSgAegQICBAC&biw=1536&bih=730&dpr=1.25"}},{id:"4",image:"/assets/tbsk.png",dob:"5 November ,1988",spouse:"Latha Naidu",upcoming:"NOt yet announced",latest:{name:"Keeda Cola",url:" https://www.google.com/search?q=RRR&rlz=1C1CHBF_enIN1080IN1080&oq=rrr&gs_lcrp=EgZjaHJvbWUqDggAEEUYJxg7GIAEGIoFMg4IABBFGCcYOxiABBiKBTISCAEQLhgUGIMBGIcCGLEDGIAEMg8IAhAAGEMYsQMYgAQYigUyCggDEAAYsQMYgAQyDwgEEAAYFBiHAhixAxiABDIKCAUQABixAxiABDINCAYQABiDARixAxiABDITCAcQLhiDARjUAhixAxiABBiKBTIKCAgQABixAxiABDIKCAkQABixAxiABNIBBzU1NWowajeoAgCwAgA&sourceid=chrome&ie=UTF-8"},nofilms:"3",awards:"Honored with Indian National award for the New-Gen movie Pellichoopulu",films:{name:"Filmography",url:"https://www.google.com/search?sca_esv=0581e395291e2afa&rlz=1C1CHBF_enIN1080IN1080&sxsrf=ACQVn0_W4A3QBNpXRep5oKCsfvLRWi_rZA:1707903708259&q=ss+rajamouli+filmography&spell=1&sa=X&ved=2ahUKEwjhkN2OxaqEAxW8zDgGHRX9BLIQBSgAegQICBAC&biw=1536&bih=730&dpr=1.25"}},{id:"5",image:"/assets/1.png",dob:"10 October,1973",spouse:"Rama rajamouli",upcoming:"SSMB29",latest:{name:"RRR",url:" https://www.google.com/search?q=RRR&rlz=1C1CHBF_enIN1080IN1080&oq=rrr&gs_lcrp=EgZjaHJvbWUqDggAEEUYJxg7GIAEGIoFMg4IABBFGCcYOxiABBiKBTISCAEQLhgUGIMBGIcCGLEDGIAEMg8IAhAAGEMYsQMYgAQYigUyCggDEAAYsQMYgAQyDwgEEAAYFBiHAhixAxiABDIKCAUQABixAxiABDINCAYQABiDARixAxiABDITCAcQLhiDARjUAhixAxiABBiKBTIKCAgQABixAxiABDIKCAkQABixAxiABNIBBzU1NWowajeoAgCwAgA&sourceid=chrome&ie=UTF-8"},nofilms:"14",successratio:"100%",awards:"Honored with Padmasri in the year 2016 for directing the masterclass Bahubali",films:{name:"Filmography",url:"https://www.google.com/search?sca_esv=0581e395291e2afa&rlz=1C1CHBF_enIN1080IN1080&sxsrf=ACQVn0_W4A3QBNpXRep5oKCsfvLRWi_rZA:1707903708259&q=ss+rajamouli+filmography&spell=1&sa=X&ved=2ahUKEwjhkN2OxaqEAxW8zDgGHRX9BLIQBSgAegQICBAC&biw=1536&bih=730&dpr=1.25"}}]}};function MD(e,t){if(e&1&&(I(0,"li")(1,"div",4)(2,"span"),C(3),y(),I(4,"div",5)(5,"button",6),C(6," View Profile "),y(),I(7,"button",7),C(8," Upload Files "),y()()()()),e&2){let i=t.$implicit;j(3),yi(i.Director),j(2),ct("routerLink","/dashboard/dirprofile/"+i.id)}}function PD(e,t){if(e&1&&(I(0,"div",2)(1,"ul"),Qt(2,MD,9,2,"li",3),y()()),e&2){let i=Be();j(2),ct("ngForOf",i.directo)}}var AI=(()=>{let t=class t{constructor(n,r){this.route=n,this.service=r,this.directo=[{id:"1",Director:"S.S.Rajamouli",profile:"view profile",connect:"uploadfile"},{id:"2",Director:"Christopher Nolan ",profile:"view profile",connect:"uploadfile"},{id:"3",Director:"Sukumar",profile:"view profile",connect:"uploadfile"},{id:"4",Director:"Tharun Bhaskar",profile:"view profile",connect:"uploadfile"},{id:"5",Director:"Prasanth Varma",profile:"view profile",connect:"uploadfile"}]}ngOnInit(){this.director=this.service.directors}};t.\u0275fac=function(r){return new(r||t)(R(Zt),R(_i))},t.\u0275cmp=Q({type:t,selectors:[["app-filmmaker"]],decls:5,vars:1,consts:[[1,"filmmakers-container"],["class","appointment-section",4,"ngIf"],[1,"appointment-section"],[4,"ngFor","ngForOf"],[1,"filmmaker-info"],[1,"buttons-container"],[1,"btn","btn-success",3,"routerLink"],[1,"btn","btn-primary","upload-button"]],template:function(r,o){r&1&&(I(0,"div",0)(1,"h1"),C(2,"Film Makers"),y(),Qt(3,PD,3,1,"div",1),y(),ht(4,"router-outlet")),r&2&&(j(3),ct("ngIf",o.directo.length>0))},dependencies:[zi,qi,pr,_e],styles:[".filmmakers-container[_ngcontent-%COMP%]{max-width:800px;margin:auto;padding:20px;color:#000}.appointment-section[_ngcontent-%COMP%]{margin-top:10px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{font-family:Cambria,Cochin,Georgia,Times,Times New Roman,serif;color:#101112}ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}li[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:5px;padding:10px;margin-bottom:10px;display:flex;flex-direction:column;justify-content:space-between;background-color:#f8f8f8}.filmmaker-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-left:10px}.buttons-container[_ngcontent-%COMP%]{margin-bottom:10px}.upload-button[_ngcontent-%COMP%]{margin-left:25px}"]});let e=t;return e})();var NI=(()=>{let t=class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}};t.\u0275fac=function(r){return new(r||t)(R(kr),R(xt))},t.\u0275dir=at({type:t});let e=t;return e})(),ND=(()=>{let t=class t extends NI{};t.\u0275fac=(()=>{let n;return function(o){return(n||(n=Ze(t)))(o||t)}})(),t.\u0275dir=at({type:t,features:[Jt]});let e=t;return e})(),FI=new B("");var FD={provide:FI,useExisting:En(()=>jo),multi:!0};function OD(){let e=Sn()?Sn().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var VD=new B(""),jo=(()=>{let t=class t extends NI{constructor(n,r,o){super(n,r),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!OD())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}};t.\u0275fac=function(r){return new(r||t)(R(kr),R(xt),R(VD,8))},t.\u0275dir=at({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&kt("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[Te([FD]),Jt]});let e=t;return e})();function Ug(e){return e==null||(typeof e=="string"||Array.isArray(e))&&e.length===0}function LD(e){return e!=null&&typeof e.length=="number"}var $a=new B(""),OI=new B(""),BD=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function jD(e){return Ug(e.value)?{required:!0}:null}function UD(e){return Ug(e.value)||BD.test(e.value)?null:{email:!0}}function zD(e){return t=>Ug(t.value)||!LD(t.value)?null:t.value.length<e?{minlength:{requiredLength:e,actualLength:t.value.length}}:null}function kI(e){return null}function VI(e){return e!=null}function LI(e){return cc(e)?ft(e):e}function BI(e){let t={};return e.forEach(i=>{t=i!=null?k(k({},t),i):t}),Object.keys(t).length===0?null:t}function jI(e,t){return t.map(i=>i(e))}function qD(e){return!e.validate}function UI(e){return e.map(t=>qD(t)?t:i=>t.validate(i))}function GD(e){if(!e)return null;let t=e.filter(VI);return t.length==0?null:function(i){return BI(jI(i,t))}}function zg(e){return e!=null?GD(UI(e)):null}function $D(e){if(!e)return null;let t=e.filter(VI);return t.length==0?null:function(i){let n=jI(i,t).map(LI);return ec(n).pipe(V(BI))}}function qg(e){return e!=null?$D(UI(e)):null}function CI(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function KD(e){return e._rawValidators}function QD(e){return e._rawAsyncValidators}function jg(e){return e?Array.isArray(e)?e:[e]:[]}function Hd(e,t){return Array.isArray(e)?e.includes(t):e===t}function TI(e,t){let i=jg(t);return jg(e).forEach(r=>{Hd(i,r)||i.push(r)}),i}function SI(e,t){return jg(t).filter(i=>!Hd(e,i))}var Yd=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=zg(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=qg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,i){return this.control?this.control.hasError(t,i):!1}getError(t,i){return this.control?this.control.getError(t,i):null}},Bo=class extends Yd{get formDirective(){return null}get path(){return null}},Ga=class extends Yd{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Xd=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},WD={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},aF=bt(k({},WD),{"[class.ng-submitted]":"isSubmitted"}),tu=(()=>{let t=class t extends Xd{constructor(n){super(n)}};t.\u0275fac=function(r){return new(r||t)(R(Ga,2))},t.\u0275dir=at({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&te("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[Jt]});let e=t;return e})(),eu=(()=>{let t=class t extends Xd{constructor(n){super(n)}};t.\u0275fac=function(r){return new(r||t)(R(Bo,10))},t.\u0275dir=at({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,o){r&2&&te("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[Jt]});let e=t;return e})();var Ua="VALID",Wd="INVALID",Lo="PENDING",za="DISABLED";function zI(e){return(iu(e)?e.validators:e)||null}function HD(e){return Array.isArray(e)?zg(e):e||null}function qI(e,t){return(iu(t)?t.asyncValidators:e)||null}function YD(e){return Array.isArray(e)?qg(e):e||null}function iu(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function XD(e,t,i){let n=e.controls;if(!(t?Object.keys(n):n).length)throw new ot(1e3,"");if(!n[i])throw new ot(1001,"")}function ZD(e,t,i){e._forEachChild((n,r)=>{if(i[r]===void 0)throw new ot(1002,"")})}var Zd=class{constructor(t,i){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(i)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Ua}get invalid(){return this.status===Wd}get pending(){return this.status==Lo}get disabled(){return this.status===za}get enabled(){return this.status!==za}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(TI(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(TI(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(SI(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(SI(t,this._rawAsyncValidators))}hasValidator(t){return Hd(this._rawValidators,t)}hasAsyncValidator(t){return Hd(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(i=>{i.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Lo,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let i=this._parentMarkedDirty(t.onlySelf);this.status=za,this.errors=null,this._forEachChild(n=>{n.disable(bt(k({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(bt(k({},t),{skipPristineCheck:i})),this._onDisabledChange.forEach(n=>n(!0))}enable(t={}){let i=this._parentMarkedDirty(t.onlySelf);this.status=Ua,this._forEachChild(n=>{n.enable(bt(k({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(bt(k({},t),{skipPristineCheck:i})),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ua||this.status===Lo)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(i=>i._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?za:Ua}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Lo,this._hasOwnPendingAsyncValidator=!0;let i=LI(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,i={}){this.errors=t,this._updateControlsErrors(i.emitEvent!==!1)}get(t){let i=t;return i==null||(Array.isArray(i)||(i=i.split(".")),i.length===0)?null:i.reduce((n,r)=>n&&n._find(r),this)}getError(t,i){let n=i?this.get(i):this;return n&&n.errors?n.errors[t]:null}hasError(t,i){return!!this.getError(t,i)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new we,this.statusChanges=new we}_calculateStatus(){return this._allControlsDisabled()?za:this.errors?Wd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Lo)?Lo:this._anyControlsHaveStatus(Wd)?Wd:Ua}_anyControlsHaveStatus(t){return this._anyControls(i=>i.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){iu(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let i=this._parent&&this._parent.dirty;return!t&&!!i&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=HD(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=YD(this._rawAsyncValidators)}},Jd=class extends Zd{constructor(t,i,n){super(zI(i),qI(n,i)),this.controls=t,this._initObservables(),this._setUpdateStrategy(i),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,i){return this.controls[t]?this.controls[t]:(this.controls[t]=i,i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange),i)}addControl(t,i,n={}){this.registerControl(t,i),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}setControl(t,i,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],i&&this.registerControl(t,i),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,i={}){ZD(this,!0,t),Object.keys(t).forEach(n=>{XD(this,!0,n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i)}patchValue(t,i={}){t!=null&&(Object.keys(t).forEach(n=>{let r=this.controls[n];r&&r.patchValue(t[n],{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i))}reset(t={},i={}){this._forEachChild((n,r)=>{n.reset(t?t[r]:null,{onlySelf:!0,emitEvent:i.emitEvent})}),this._updatePristine(i),this._updateTouched(i),this.updateValueAndValidity(i)}getRawValue(){return this._reduceChildren({},(t,i,n)=>(t[n]=i.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(i,n)=>n._syncPendingControls()?!0:i);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(i=>{let n=this.controls[i];n&&t(n,i)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[i,n]of Object.entries(this.controls))if(this.contains(i)&&t(n))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(i,n,r)=>((n.enabled||this.disabled)&&(i[r]=n.value),i))}_reduceChildren(t,i){let n=t;return this._forEachChild((r,o)=>{n=i(n,r,o)}),n}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Gg=new B("CallSetDisabledState",{providedIn:"root",factory:()=>$g}),$g="always";function JD(e,t){return[...t.path,e]}function GI(e,t,i=$g){$I(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||i==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),eR(e,t),nR(e,t),iR(e,t),tR(e,t)}function DI(e,t){e.forEach(i=>{i.registerOnValidatorChange&&i.registerOnValidatorChange(t)})}function tR(e,t){if(t.valueAccessor.setDisabledState){let i=n=>{t.valueAccessor.setDisabledState(n)};e.registerOnDisabledChange(i),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(i)})}}function $I(e,t){let i=KD(e);t.validator!==null?e.setValidators(CI(i,t.validator)):typeof i=="function"&&e.setValidators([i]);let n=QD(e);t.asyncValidator!==null?e.setAsyncValidators(CI(n,t.asyncValidator)):typeof n=="function"&&e.setAsyncValidators([n]);let r=()=>e.updateValueAndValidity();DI(t._rawValidators,r),DI(t._rawAsyncValidators,r)}function eR(e,t){t.valueAccessor.registerOnChange(i=>{e._pendingValue=i,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&KI(e,t)})}function iR(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&KI(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function KI(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function nR(e,t){let i=(n,r)=>{t.valueAccessor.writeValue(n),r&&t.viewToModelUpdate(n)};e.registerOnChange(i),t._registerOnDestroy(()=>{e._unregisterOnChange(i)})}function rR(e,t){e==null,$I(e,t)}function oR(e,t){if(!e.hasOwnProperty("model"))return!1;let i=e.model;return i.isFirstChange()?!0:!Object.is(t,i.currentValue)}function sR(e){return Object.getPrototypeOf(e.constructor)===ND}function aR(e,t){e._syncPendingControls(),t.forEach(i=>{let n=i.control;n.updateOn==="submit"&&n._pendingChange&&(i.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function cR(e,t){if(!t)return null;Array.isArray(t);let i,n,r;return t.forEach(o=>{o.constructor===jo?i=o:sR(o)?n=o:r=o}),r||n||i||null}var lR={provide:Bo,useExisting:En(()=>Ka)},qa=Promise.resolve(),Ka=(()=>{let t=class t extends Bo{constructor(n,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new we,this.form=new Jd({},zg(n),qg(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){qa.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),GI(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){qa.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){qa.then(()=>{let r=this._findContainer(n.path),o=new Jd({});rR(o,n),r.registerControl(n.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){qa.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){qa.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,aR(this.form,this._directives),this.ngSubmit.emit(n),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}};t.\u0275fac=function(r){return new(r||t)(R($a,10),R(OI,10),R(Gg,8))},t.\u0275dir=at({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,o){r&1&&kt("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{options:[ut.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Te([lR]),Jt]});let e=t;return e})();function RI(e,t){let i=e.indexOf(t);i>-1&&e.splice(i,1)}function MI(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var dR=class extends Zd{constructor(t=null,i,n){super(zI(i),qI(n,i)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(i),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),iu(i)&&(i.nonNullable||i.initialValueIsDefault)&&(MI(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,i={}){this.value=this._pendingValue=t,this._onChange.length&&i.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,i.emitViewToModelChange!==!1)),this.updateValueAndValidity(i)}patchValue(t,i={}){this.setValue(t,i)}reset(t=this.defaultValue,i={}){this._applyFormState(t),this.markAsPristine(i),this.markAsUntouched(i),this.setValue(this.value,i),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){RI(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){RI(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){MI(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var uR={provide:Ga,useExisting:En(()=>Qa)},PI=Promise.resolve(),Qa=(()=>{let t=class t extends Ga{constructor(n,r,o,s,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new dR,this._registered=!1,this.name="",this.update=new we,this._parent=n,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=cR(this,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),oR(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){GI(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){PI.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,o=r!==0&&Wt(r);PI.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?JD(n,this._parent):[n]}};t.\u0275fac=function(r){return new(r||t)(R(Bo,9),R($a,10),R(OI,10),R(FI,10),R(ti,8),R(Gg,8))},t.\u0275dir=at({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[ut.None,"disabled","isDisabled"],model:[ut.None,"ngModel","model"],options:[ut.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Te([uR]),Jt,Xe]});let e=t;return e})(),nu=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=at({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let e=t;return e})();function hR(e){return typeof e=="number"?e:parseInt(e,10)}var Kg=(()=>{let t=class t{constructor(){this._validator=kI}ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):kI,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=at({type:t,features:[Xe]});let e=t;return e})();var mR={provide:$a,useExisting:En(()=>Wa),multi:!0};var Wa=(()=>{let t=class t extends Kg{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Wt,this.createValidator=n=>jD}enabled(n){return n}};t.\u0275fac=(()=>{let n;return function(o){return(n||(n=Ze(t)))(o||t)}})(),t.\u0275dir=at({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,o){r&2&&pe("required",o._enabled?"":null)},inputs:{required:"required"},features:[Te([mR]),Jt]});let e=t;return e})();var pR={provide:$a,useExisting:En(()=>Qg),multi:!0},Qg=(()=>{let t=class t extends Kg{constructor(){super(...arguments),this.inputName="email",this.normalizeInput=Wt,this.createValidator=n=>UD}enabled(n){return n}};t.\u0275fac=(()=>{let n;return function(o){return(n||(n=Ze(t)))(o||t)}})(),t.\u0275dir=at({type:t,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[Te([pR]),Jt]});let e=t;return e})(),fR={provide:$a,useExisting:En(()=>Wg),multi:!0},Wg=(()=>{let t=class t extends Kg{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=n=>hR(n),this.createValidator=n=>zD(n)}};t.\u0275fac=(()=>{let n;return function(o){return(n||(n=Ze(t)))(o||t)}})(),t.\u0275dir=at({type:t,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(r,o){r&2&&pe("minlength",o._enabled?o.minlength:null)},inputs:{minlength:"minlength"},features:[Te([fR]),Jt]});let e=t;return e})();var gR=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=$({type:t}),t.\u0275inj=G({});let e=t;return e})();var QI=(()=>{let t=class t{static withConfig(n){return{ngModule:t,providers:[{provide:Gg,useValue:n.callSetDisabledState??$g}]}}};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=$({type:t}),t.\u0275inj=G({imports:[gR]});let e=t;return e})();var HI=(()=>{let t=class t{constructor(){}login(){console.log("Username:",this.username),console.log("Password:",this.password)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Q({type:t,selectors:[["app-login"]],decls:14,vars:2,consts:[[1,"login-container"],[3,"ngSubmit"],[1,"form-group"],["for","username"],["type","text","id","username","name","username","required","",3,"ngModel","ngModelChange"],["for","password"],["type","password","id","password","name","password","required","",3,"ngModel","ngModelChange"],["type","submit"]],template:function(r,o){r&1&&(I(0,"div",0)(1,"h2"),C(2,"Welcome to iBot"),y(),I(3,"form",1),kt("ngSubmit",function(){return o.login()}),I(4,"div",2)(5,"label",3),C(6,"Username:"),y(),I(7,"input",4),kt("ngModelChange",function(a){return o.username=a}),y()(),I(8,"div",2)(9,"label",5),C(10,"Password:"),y(),I(11,"input",6),kt("ngModelChange",function(a){return o.password=a}),y()(),I(12,"button",7),C(13,"Login"),y()()()),r&2&&(j(7),ct("ngModel",o.username),j(4),ct("ngModel",o.password))},dependencies:[nu,jo,tu,eu,Wa,Qa,Ka],styles:[".login-container[_ngcontent-%COMP%]{background-image:url(/assets/202.gif);background-attachment:fixed;background-size:cover;max-width:400px;margin:120px auto 0;padding:20px;border:1px solid #ccc;border-radius:5px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px}input[type=text][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{width:100%;padding:10px;font-size:16px}button[_ngcontent-%COMP%]{padding:10px 20px;font-size:16px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.h2[_ngcontent-%COMP%]{text-align:center}"]});let e=t;return e})();var YI=(()=>{let t=class t{constructor(){this.images=["assets/image.png","assets/20.jpeg",""],this.currentIndex=0,this.slideWidth=1e3,this.imageWidth=1e3,this.imageHeight=400}ngOnInit(){this.slideWidth=window.innerWidth}prev(){this.currentIndex=this.currentIndex===0?this.images.length-1:this.currentIndex-1}next(){this.currentIndex=this.currentIndex===this.images.length-1?0:this.currentIndex+1}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Q({type:t,selectors:[["app-image-slider"]],decls:0,vars:0,template:function(r,o){},styles:[".slider-container[_ngcontent-%COMP%]{position:relative;overflow:hidden;height:100vh;margin-left:250px}.slider[_ngcontent-%COMP%]{display:flex;transition:transform .5s ease}.slide[_ngcontent-%COMP%]{flex:0 0 auto}.slider-image[_ngcontent-%COMP%]{overflow:hidden;object-fit:cover}.btn-prev[_ngcontent-%COMP%], .btn-next[_ngcontent-%COMP%]{position:absolute;top:60%;transform:translateY(-50%);background:none;border:none;cursor:pointer}.btn-prev[_ngcontent-%COMP%]{left:10px}.btn-next[_ngcontent-%COMP%]{right:240px}"]});let e=t;return e})();function bR(e,t){e&1&&(I(0,"div",10),C(1,"Username is required."),y())}function _R(e,t){e&1&&(I(0,"div",10),C(1,"Please enter a valid email."),y())}var XI=(()=>{let t=class t{constructor(){this.formData={username:"",email:"",password:""}}submitForm(){console.log("Form submitted:",this.formData)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Q({type:t,selectors:[["app-signup"]],decls:20,vars:6,consts:[[3,"ngSubmit"],["signupForm","ngForm"],["for","username"],["type","text","id","username","name","username","required","",3,"ngModel","ngModelChange"],["class","error",4,"ngIf"],["for","email"],["type","email","id","email","name","email","required","","email","",3,"ngModel","ngModelChange"],["for","password"],["type","password","id","password","name","password","required","","minlength","6",3,"ngModel","ngModelChange"],["type","submit",3,"disabled"],[1,"error"]],template:function(r,o){if(r&1&&(I(0,"form",0,1),kt("ngSubmit",function(){return o.submitForm()}),I(2,"h2"),C(3,"Welcome To iBot"),y(),I(4,"div")(5,"label",2),C(6,"Username:"),y(),I(7,"input",3),kt("ngModelChange",function(a){return o.formData.username=a}),y(),Qt(8,bR,2,0,"div",4),y(),I(9,"div")(10,"label",5),C(11,"Email:"),y(),I(12,"input",6),kt("ngModelChange",function(a){return o.formData.email=a}),y(),Qt(13,_R,2,0,"div",4),y(),I(14,"div")(15,"label",7),C(16,"Password:"),y(),I(17,"input",8),kt("ngModelChange",function(a){return o.formData.password=a}),y()(),I(18,"button",9),C(19,"Sign Up"),y()()),r&2){let s=Cu(1);j(7),ct("ngModel",o.formData.username),j(),ct("ngIf",o.username.touched&&o.username.invalid),j(4),ct("ngModel",o.formData.email),j(),ct("ngIf",o.email.touched&&o.email.invalid),j(4),ct("ngModel",o.formData.password),j(),ct("disabled",s.invalid)}},dependencies:[qi,nu,jo,tu,eu,Wa,Wg,Qg,Qa,Ka],styles:["form[_ngcontent-%COMP%]{background-image:url(/assets/202.gif);background-attachment:fixed;background-size:cover;max-width:400px;margin:120px auto 0;padding:20px;border:1px solid #ccc;border-radius:5px}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:8px;margin-bottom:15px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#4caf50;color:#fff;border:none;border-radius:4px;cursor:pointer}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.error[_ngcontent-%COMP%]{color:red;font-size:.8rem;margin-top:5px}"]});let e=t;return e})();var ru=(()=>{let t=class t{constructor(n){this.httpClient=n,this.apiUrl="https://doc-k-def0a-default-rtdb.firebaseio.com/user.json"}getUser(n){let r=`${this.apiUrl}/${n}`;return this.httpClient.get(this.apiUrl)}updateUser(n,r){let o=`${this.apiUrl}/${n}`;return this.httpClient.put(this.apiUrl,r)}deleteUser(n){let r=`${this.apiUrl}/${n}`;return this.httpClient.delete(this.apiUrl)}};t.\u0275fac=function(r){return new(r||t)(_(Pn))},t.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var ZI=(()=>{let t=class t{constructor(n){this.userService=n}ngOnInit(){this.getUser()}getUser(){this.userService.getUser(this.id).subscribe(n=>{this.user=n},n=>{console.error("Error fetching students:",n)})}};t.\u0275fac=function(r){return new(r||t)(R(ru))},t.\u0275cmp=Q({type:t,selectors:[["app-profile"]],decls:22,vars:3,consts:[[1,"container"],[1,"profile-header"],["alt","Profile Picture",3,"src"],[1,"profile-menu"],["routerLink","/profile/about"],["routerLink","/profile/posts"],["routerLink","/profile/photos"],["routerLink","/profile/settings"],[1,"profile-content"]],template:function(r,o){r&1&&(I(0,"section",0)(1,"div",1),ht(2,"img",2),I(3,"h2"),C(4),y(),I(5,"p"),C(6),y()(),I(7,"div",3)(8,"ul")(9,"li")(10,"a",4),C(11,"About Me"),y()(),I(12,"li")(13,"a",5),C(14,"Posts"),y()(),I(15,"li")(16,"a",6),C(17,"Photos"),y()(),I(18,"li")(19,"a",7),C(20,"Settings"),y()()()(),ht(21,"div",8),y()),r&2&&(j(2),ct("src",o.user.avatar,Bi),j(2),yi(o.user.name),j(2),yi(o.user.bio))},dependencies:[_e],styles:[".profile-header[_ngcontent-%COMP%]{display:flex;align-items:center}.profile-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;margin-left:150px;margin-top:90px}.profile-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.profile-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}.profile-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}.profile-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;margin-right:10px;display:block}.profile-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#333}.profile-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#007bff}.container[_ngcontent-%COMP%]{background-image:url(/assets/111.png);max-width:400px;margin:120px auto 0;padding:20px;border:1px solid #ccc;border-radius:5px}"]});let e=t;return e})();var JI=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Q({type:t,selectors:[["app-connection"]],decls:16,vars:0,consts:[[1,"row"],[1,"story-container"],[1,"head"],["routerLinkActive","active","routerLink","/dashboard/screenwriter",1,"btn1"],[1,"direction-container"],["routerLinkActive","active","routerLink","/dashboard/filmmaker",1,"btn2"],[1,"dop-container"],["routerLinkActive","active","routerLink","/dashboard/dop",1,"btn3"]],template:function(r,o){r&1&&(I(0,"div",0)(1,"div",1)(2,"h2",2),C(3,"Become a ScreenWriter in just 1 click!"),y(),I(4,"button",3),C(5,"Connect with Top Screenwriters"),y()(),I(6,"div",4)(7,"h2",2),C(8,"Showcase your Directorial skills."),y(),I(9,"button",5),C(10,"Connect with Top Filmmakers"),y()(),I(11,"div",6)(12,"h2",2),C(13,"Showcase your Photography skills"),y(),I(14,"button",7),C(15,"Connect with Top Cinematographers"),y()()())},dependencies:[_e,Qd],styles:[".row[_ngcontent-%COMP%]{display:flex}.story-container[_ngcontent-%COMP%]{height:348px;background-image:url(/assets/45.png);background-position-x:2%;background-size:540px;max-width:370px;padding:3px;border-radius:5px;margin:90px auto 0 125px;color:#000}.head[_ngcontent-%COMP%]{font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;margin-top:10px;text-align:center}.direction-container[_ngcontent-%COMP%]{height:360px;background-image:url(/assets/44.png);background-position-x:center;background-size:540px;max-width:370px;padding:3px;border-radius:5px;margin:90px auto 0 0;color:#000}.dop-container[_ngcontent-%COMP%]{height:340px;background-image:url(/assets/46.png);background-position-x:center;background-size:540px;max-width:370px;padding:3px;border-radius:5px;margin:90px auto 0 0;color:#000}.btn1[_ngcontent-%COMP%]{color:#151515;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;margin-left:50px}.btn2[_ngcontent-%COMP%]{color:#151515;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;margin-left:80px}.btn3[_ngcontent-%COMP%]{color:#151515;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;margin-left:65px}"]});let e=t;return e})();var vn=class{constructor(){this.cameramen=[{id:"1",image:"/assets/rjm.png",dob:"10 October, 1978",spouse:"Rama Rajamouli",upcoming:"SSMB29",latest:{name:"RRR",url:"https://www.google.com/search?q=RRR&rlz=1C1CHBF_enIN1080IN1080&oq=rrr&gs_lcrp=EgZjaHJvbWUqDggAEEUYJxg7GIAEGIoFMg4IABBFGCcYOxiABBiKBTISCAEQLhgUGIMBGIcCGLEDGIAEMg8IAhAAGEMYsQMYgAQYigUyCggDEAAYsQMYgAQyDwgEEAAYFBiHAhixAxiABDIKCAUQABixAxiABDINCAYQABiDARixAxiABDITCAcQLhiDARjUAhixAxiABBiKBTIKCAgQABixAxiABDIKCAkQABixAxiABNIBBzU1NWowajeoAgCwAgA&sourceid=chrome&ie=UTF-8"},nofilms:"14",awards:"Honored with Padmasri in the year 2016 for directing the masterclass Bahubali",films:{name:"Filmography",url:"https://www.google.com/search?sca_esv=0581e395291e2afa&rlz=1C1CHBF_enIN1080IN1080&sxsrf=ACQVn0_W4A3QBNpXRep5oKCsfvLRWi_rZA:1707903708259&q=ss+rajamouli+filmography&spell=1&sa=X&ved=2ahUKEwjhkN2OxaqEAxW8zDgGHRX9BLIQBSgAegQICBAC&biw=1536&bih=730&dpr=1.25"}},{id:"2",image:"/assets/cnolan.png",dob:"30 July,1970",spouse:"Emma Thomas",upcoming:"Not yet Announced",latest:{name:"Oppenheimer",url:" https://www.google.com/search?q=RRR&rlz=1C1CHBF_enIN1080IN1080&oq=rrr&gs_lcrp=EgZjaHJvbWUqDggAEEUYJxg7GIAEGIoFMg4IABBFGCcYOxiABBiKBTISCAEQLhgUGIMBGIcCGLEDGIAEMg8IAhAAGEMYsQMYgAQYigUyCggDEAAYsQMYgAQyDwgEEAAYFBiHAhixAxiABDIKCAUQABixAxiABDINCAYQABiDARixAxiABDITCAcQLhiDARjUAhixAxiABBiKBTIKCAgQABixAxiABDIKCAkQABixAxiABNIBBzU1NWowajeoAgCwAgA&sourceid=chrome&ie=UTF-8"},nofilms:"12",awards:"Nolan has been nominated for eight Academy Awards, eight British Academy Film Awards and six Golden Globe Awards, winning Best Director for Oppenheimer.",films:{name:"Filmography",url:"https://www.google.com/search?sca_esv=0581e395291e2afa&rlz=1C1CHBF_enIN1080IN1080&sxsrf=ACQVn0_W4A3QBNpXRep5oKCsfvLRWi_rZA:1707903708259&q=ss+rajamouli+filmography&spell=1&sa=X&ved=2ahUKEwjhkN2OxaqEAxW8zDgGHRX9BLIQBSgAegQICBAC&biw=1536&bih=730&dpr=1.25"}},{id:"3",image:"/assets/sk.png",dob:"10 October,1973",spouse:"Thabitha",upcoming:"Pushpa- The Rule",latest:{name:"Pushpa-The Rise",url:" https://www.google.com/search?q=RRR&rlz=1C1CHBF_enIN1080IN1080&oq=rrr&gs_lcrp=EgZjaHJvbWUqDggAEEUYJxg7GIAEGIoFMg4IABBFGCcYOxiABBiKBTISCAEQLhgUGIMBGIcCGLEDGIAEMg8IAhAAGEMYsQMYgAQYigUyCggDEAAYsQMYgAQyDwgEEAAYFBiHAhixAxiABDIKCAUQABixAxiABDINCAYQABiDARixAxiABDITCAcQLhiDARjUAhixAxiABBiKBTIKCAgQABixAxiABDIKCAkQABixAxiABNIBBzU1NWowajeoAgCwAgA&sourceid=chrome&ie=UTF-8"},nofilms:"14",awards:"Won Andhra Pradesh state award for the movie Arya",films:{name:"Filmography",url:"https://www.google.com/search?sca_esv=0581e395291e2afa&rlz=1C1CHBF_enIN1080IN1080&sxsrf=ACQVn0_W4A3QBNpXRep5oKCsfvLRWi_rZA:1707903708259&q=ss+rajamouli+filmography&spell=1&sa=X&ved=2ahUKEwjhkN2OxaqEAxW8zDgGHRX9BLIQBSgAegQICBAC&biw=1536&bih=730&dpr=1.25"}},{id:"4",image:"/assets/tbsk.png",dob:"5 November ,1988",spouse:"Latha Naidu",upcoming:"NOt yet announced",latest:{name:"Keeda Cola",url:" https://www.google.com/search?q=RRR&rlz=1C1CHBF_enIN1080IN1080&oq=rrr&gs_lcrp=EgZjaHJvbWUqDggAEEUYJxg7GIAEGIoFMg4IABBFGCcYOxiABBiKBTISCAEQLhgUGIMBGIcCGLEDGIAEMg8IAhAAGEMYsQMYgAQYigUyCggDEAAYsQMYgAQyDwgEEAAYFBiHAhixAxiABDIKCAUQABixAxiABDINCAYQABiDARixAxiABDITCAcQLhiDARjUAhixAxiABBiKBTIKCAgQABixAxiABDIKCAkQABixAxiABNIBBzU1NWowajeoAgCwAgA&sourceid=chrome&ie=UTF-8"},nofilms:"3",awards:"Honored with Indian National award for the New-Gen movie Pellichoopulu",films:{name:"Filmography",url:"https://www.google.com/search?sca_esv=0581e395291e2afa&rlz=1C1CHBF_enIN1080IN1080&sxsrf=ACQVn0_W4A3QBNpXRep5oKCsfvLRWi_rZA:1707903708259&q=ss+rajamouli+filmography&spell=1&sa=X&ved=2ahUKEwjhkN2OxaqEAxW8zDgGHRX9BLIQBSgAegQICBAC&biw=1536&bih=730&dpr=1.25"}},{id:"5",image:"/assets/1.png",dob:"10 October,1973",spouse:"Rama rajamouli",upcoming:"SSMB29",latest:{name:"RRR",url:" https://www.google.com/search?q=RRR&rlz=1C1CHBF_enIN1080IN1080&oq=rrr&gs_lcrp=EgZjaHJvbWUqDggAEEUYJxg7GIAEGIoFMg4IABBFGCcYOxiABBiKBTISCAEQLhgUGIMBGIcCGLEDGIAEMg8IAhAAGEMYsQMYgAQYigUyCggDEAAYsQMYgAQyDwgEEAAYFBiHAhixAxiABDIKCAUQABixAxiABDINCAYQABiDARixAxiABDITCAcQLhiDARjUAhixAxiABBiKBTIKCAgQABixAxiABDIKCAkQABixAxiABNIBBzU1NWowajeoAgCwAgA&sourceid=chrome&ie=UTF-8"},nofilms:"14",successratio:"100%",awards:"Honored with Padmasri in the year 2016 for directing the masterclass Bahubali",films:{name:"Filmography",url:"https://www.google.com/search?sca_esv=0581e395291e2afa&rlz=1C1CHBF_enIN1080IN1080&sxsrf=ACQVn0_W4A3QBNpXRep5oKCsfvLRWi_rZA:1707903708259&q=ss+rajamouli+filmography&spell=1&sa=X&ved=2ahUKEwjhkN2OxaqEAxW8zDgGHRX9BLIQBSgAegQICBAC&biw=1536&bih=730&dpr=1.25"}}]}};function yR(e,t){if(e&1&&(I(0,"li")(1,"div",4)(2,"span"),C(3),y(),I(4,"div",5)(5,"button",6),C(6," View Profile "),y(),I(7,"button",7),C(8," Upload Files "),y()()()()),e&2){let i=t.$implicit;j(3),yi(i.Cameraman),j(2),ct("routerLink","/dashboard/dirprofile1/"+i.id)}}function wR(e,t){if(e&1&&(I(0,"div",2)(1,"ul"),Qt(2,yR,9,2,"li",3),y()()),e&2){let i=Be();j(2),ct("ngForOf",i.dops)}}var eE=(()=>{let t=class t{constructor(n,r){this.route=n,this.service=r,this.dops=[{id:"1",Cameraman:"Santosh Sivan",profile:"view profile",connect:"uploadfile"},{id:"2",Cameraman:"P.C. Sreeram ",profile:"view profile",connect:"uploadfile"},{id:"3",Cameraman:"Sujith Vasudev",profile:"view profile",connect:"uploadfile"},{id:"4",Cameraman:"senthil kumar",profile:"view profile",connect:"uploadfile"},{id:"5",Cameraman:"P.s. Vinod",profile:"view profile",connect:"uploadfile"}]}ngOnInit(){this.dop=this.service.cameramen}};t.\u0275fac=function(r){return new(r||t)(R(Zt),R(vn))},t.\u0275cmp=Q({type:t,selectors:[["app-dop"]],decls:4,vars:1,consts:[[1,"filmmakers-container"],["class","appointment-section",4,"ngIf"],[1,"appointment-section"],[4,"ngFor","ngForOf"],[1,"filmmaker-info"],[1,"buttons-container"],[1,"btn","btn-success",3,"routerLink"],["routerLink","/file-upload",1,"btn","btn-primary","upload-button"]],template:function(r,o){r&1&&(I(0,"div",0)(1,"h1"),C(2,"Cameramen"),y(),Qt(3,wR,3,1,"div",1),y()),r&2&&(j(3),ct("ngIf",o.dops.length>0))},dependencies:[zi,qi,_e],styles:[".filmmakers-container[_ngcontent-%COMP%]{max-width:800px;margin:auto;padding:20px;color:#000}.appointment-section[_ngcontent-%COMP%]{margin-top:10px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{font-family:Cambria,Cochin,Georgia,Times,Times New Roman,serif;color:#101112}ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}li[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:5px;padding:10px;margin-bottom:10px;display:flex;flex-direction:column;justify-content:space-between;background-color:#f8f8f8}.filmmaker-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-left:10px}.buttons-container[_ngcontent-%COMP%]{margin-bottom:10px}.upload-button[_ngcontent-%COMP%]{margin-left:25px}"]});let e=t;return e})();function xR(e,t){if(e&1&&(I(0,"li")(1,"div",4)(2,"span"),C(3),y(),I(4,"div",5)(5,"button",6),C(6," View Profile "),y(),I(7,"button",7),C(8," Upload Files "),y()()()()),e&2){let i=t.$implicit;j(3),yi(i.Director),j(2),ct("routerLink","/dashboard/dirprofile/"+i.id)}}function IR(e,t){if(e&1&&(I(0,"div",2)(1,"ul"),Qt(2,xR,9,2,"li",3),y()()),e&2){let i=Be();j(2),ct("ngForOf",i.directo)}}var iE=(()=>{let t=class t{constructor(n,r){this.route=n,this.service=r,this.directo=[{id:"1",Director:"S.S.Rajamouli",profile:"view profile",connect:"uploadfile"},{id:"2",Director:"Christopher Nolan ",profile:"view profile",connect:"uploadfile"},{id:"3",Director:"Sukumar",profile:"view profile",connect:"uploadfile"},{id:"4",Director:"Tharun Bhaskar",profile:"view profile",connect:"uploadfile"},{id:"5",Director:"Prasanth Varma",profile:"view profile",connect:"uploadfile"}]}ngOnInit(){this.director=this.service.directors}};t.\u0275fac=function(r){return new(r||t)(R(Zt),R(_i))},t.\u0275cmp=Q({type:t,selectors:[["app-screenwriter"]],decls:5,vars:1,consts:[[1,"filmmakers-container"],["class","appointment-section",4,"ngIf"],[1,"appointment-section"],[4,"ngFor","ngForOf"],[1,"filmmaker-info"],[1,"buttons-container"],[1,"btn","btn-success",3,"routerLink"],[1,"btn","btn-primary","upload-button"]],template:function(r,o){r&1&&(I(0,"div",0)(1,"h1"),C(2,"Film Makers"),y(),Qt(3,IR,3,1,"div",1),y(),ht(4,"router-outlet")),r&2&&(j(3),ct("ngIf",o.directo.length>0))},dependencies:[zi,qi,pr,_e],styles:[".filmmakers-container[_ngcontent-%COMP%]{max-width:800px;margin:auto;padding:20px;color:#000}.appointment-section[_ngcontent-%COMP%]{margin-top:10px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{font-family:Cambria,Cochin,Georgia,Times,Times New Roman,serif;color:#101112}ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}li[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:5px;padding:10px;margin-bottom:10px;display:flex;flex-direction:column;justify-content:space-between;background-color:#f8f8f8}.filmmaker-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-left:10px}.buttons-container[_ngcontent-%COMP%]{margin-bottom:10px}.upload-button[_ngcontent-%COMP%]{margin-left:25px}"]});let e=t;return e})();var nE=(()=>{let t=class t{constructor(n){this.http=n}uploadFile(n){return this.http.post("https://doc-k-def0a-default-rtdb.firebaseio.com",n)}};t.\u0275fac=function(r){return new(r||t)(_(Pn))},t.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var rE=(()=>{let t=class t{constructor(n){this.uploadfileService=n}onFileSelected(n){let r=n.target.files[0],o=new FormData;o.append("file",r),this.uploadfileService.uploadFile(o).subscribe(s=>{console.log("File uploaded successfully:",s)},s=>{console.error("Error uploading file:",s)})}};t.\u0275fac=function(r){return new(r||t)(R(nE))},t.\u0275cmp=Q({type:t,selectors:[["app-uploadfile"]],decls:6,vars:0,consts:[[1,"uploadfiles"],["for","file-input",1,"upload-btn"],["id","file-input","type","file","value","Upload",3,"change"]],template:function(r,o){r&1&&(I(0,"div",0)(1,"h2"),C(2,"Upload Files"),y(),I(3,"label",1),C(4,"Choose File"),y(),I(5,"input",2),kt("change",function(a){return o.onFileSelected(a)}),y()())},styles:[".uploadfiles[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.uploadfiles[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;color:#333}input[type=file][_ngcontent-%COMP%]{display:none}.upload-btn[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer}.upload-btn[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]});let e=t;return e})();var oE=(()=>{let t=class t{constructor(n,r){this.service=n,this.activatedroute=r}ngOnInit(){this.directorId=this.activatedroute.snapshot.params.id,this.director=this.service.directors.find(n=>n.id===this.directorId)}};t.\u0275fac=function(r){return new(r||t)(R(_i),R(Zt))},t.\u0275cmp=Q({type:t,selectors:[["app-dirprofile"]],decls:21,vars:9,consts:[[1,"row"],[1,"imag"],["alt","","height","320px",3,"src"],[1,"container"]],template:function(r,o){r&1&&(I(0,"div",0)(1,"div",1),ht(2,"img",2),y(),I(3,"div",3)(4,"ul")(5,"li"),C(6),y(),I(7,"li"),C(8),y(),I(9,"li"),C(10),y(),I(11,"li"),C(12),y(),I(13,"li"),C(14),y(),I(15,"li"),C(16),y(),I(17,"li"),C(18),y(),I(19,"li"),C(20),y()()()()),r&2&&(j(2),lc("src",o.director.image,Bi),j(4),jt("Date Of Birth:",o.director.dob,""),j(2),jt("Spouse:",o.director.spouse,""),j(2),jt("Upcoming Film:",o.director.upcoming,""),j(2),jt("Latest Release:",o.director.latest," "),j(2),jt("Total No. of Films:",o.director.nofilms,""),j(2),jt("Success Ratio:",o.director.successratio,""),j(2),jt("Awards:",o.director.awards,""),j(2),jt("Filmography:",o.director.films,""))},styles:[".row[_ngcontent-%COMP%]{display:flex;align-items:center}.imag[_ngcontent-%COMP%]{margin-left:153px;max-width:10px;flex:1}.container[_ngcontent-%COMP%]{font-size:x-large;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif;font-weight:700;margin-top:100px;max-width:550px;background:transparent;color:#141212;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;margin-left:353px;flex:2}"]});let e=t;return e})();var sE=(()=>{let t=class t{constructor(n,r){this.route=n,this.service=r}ngOnInit(){this.dopId=this.route.snapshot.params.id,this.dop=this.service.cameramen.find(n=>n.id===this.dopId)}};t.\u0275fac=function(r){return new(r||t)(R(Zt),R(vn))},t.\u0275cmp=Q({type:t,selectors:[["app-dirprofile1"]],decls:21,vars:9,consts:[[1,"row"],[1,"imag"],["alt","","height","320px",3,"src"],[1,"container"]],template:function(r,o){r&1&&(I(0,"div",0)(1,"div",1),ht(2,"img",2),y(),I(3,"div",3)(4,"ul")(5,"li"),C(6),y(),I(7,"li"),C(8),y(),I(9,"li"),C(10),y(),I(11,"li"),C(12),y(),I(13,"li"),C(14),y(),I(15,"li"),C(16),y(),I(17,"li"),C(18),y(),I(19,"li"),C(20),y()()()()),r&2&&(j(2),lc("src",o.dop.image,Bi),j(4),jt("Date Of Birth:",o.dop.dob,""),j(2),jt("Spouse:",o.dop.spouse,""),j(2),jt("Upcoming Film:",o.dop.upcoming,""),j(2),jt("Latest Release:",o.dop.latest," "),j(2),jt("Total No. of Films:",o.dop.nofilms,""),j(2),jt("Success Ratio:",o.dop.successratio,""),j(2),jt("Awards:",o.dop.awards,""),j(2),jt("Filmography:",o.dop.films,""))},styles:[".row[_ngcontent-%COMP%]{display:flex;align-items:center}.imag[_ngcontent-%COMP%]{margin-left:153px;max-width:10px;flex:1}.container[_ngcontent-%COMP%]{font-size:x-large;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif;font-weight:700;margin-top:100px;max-width:550px;background:transparent;color:#141212;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;margin-left:353px;flex:2}"]});let e=t;return e})();var AR=[{path:"dashboard",children:[{path:"",component:EI},{path:"filmmaker",component:AI},{path:"login",component:HI},{path:"imageslider",component:YI},{path:"signup",component:XI},{path:"profile",component:ZI},{path:"connection",component:JI},{path:"dop",component:eE},{path:"screenwriter",component:iE},{path:"uploadfile",component:rE},{path:"dirprofile/:id",component:oE},{path:"dirprofile1/:id",component:sE}]}],aE=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=$({type:t}),t.\u0275inj=G({imports:[Lg.forRoot(AR),Lg]});let e=t;return e})();function Hg(e){return Array.isArray(e)?e:[e]}function fr(e){return e instanceof xt?e.nativeElement:e}var Xg;try{Xg=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Xg=!1}var he=(()=>{let t=class t{constructor(n){this._platformId=n,this.isBrowser=this._platformId?Wb(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Xg)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};t.\u0275fac=function(r){return new(r||t)(_(ae))},t.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Ha;function kR(){if(Ha==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ha=!0}))}finally{Ha=Ha||!1}return Ha}function Uo(e){return kR()?e:!!e.capture}var Yg;function CR(){if(Yg==null){let e=typeof document<"u"?document.head:null;Yg=!!(e&&(e.createShadowRoot||e.attachShadow))}return Yg}function cE(e){if(CR()){let t=e.getRootNode?e.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function yn(e){return e.composedPath?e.composedPath()[0]:e.target}function lE(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var dE=new Set,gr,TR=(()=>{let t=class t{constructor(n,r){this._platform=n,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):DR}matchMedia(n){return(this._platform.WEBKIT||this._platform.BLINK)&&SR(n,this._nonce),this._matchMedia(n)}};t.\u0275fac=function(r){return new(r||t)(_(he),_(Wo,8))},t.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function SR(e,t){if(!dE.has(e))try{gr||(gr=document.createElement("style"),t&&(gr.nonce=t),gr.setAttribute("type","text/css"),document.head.appendChild(gr)),gr.sheet&&(gr.sheet.insertRule(`@media ${e} {body{ }}`,0),dE.add(e))}catch(i){console.error(i)}}function DR(e){return{matches:e==="all"||e==="",media:e,addListener:()=>{},removeListener:()=>{}}}var ou=(()=>{let t=class t{constructor(n,r){this._mediaMatcher=n,this._zone=r,this._queries=new Map,this._destroySubject=new oe}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(n){return uE(Hg(n)).some(o=>this._registerQuery(o).mql.matches)}observe(n){let o=uE(Hg(n)).map(a=>this._registerQuery(a).observable),s=vr(o);return s=tc(s.pipe(Ve(1)),s.pipe(rc(1),yu(0))),s.pipe(V(a=>{let c={matches:!1,breakpoints:{}};return a.forEach(({matches:l,query:d})=>{c.matches=c.matches||l,c.breakpoints[d]=l}),c}))}_registerQuery(n){if(this._queries.has(n))return this._queries.get(n);let r=this._mediaMatcher.matchMedia(n),s={observable:new He(a=>{let c=l=>this._zone.run(()=>a.next(l));return r.addListener(c),()=>{r.removeListener(c)}}).pipe(Vi(r),V(({matches:a})=>({query:n,matches:a})),wr(this._destroySubject)),mql:r};return this._queries.set(n,s),s}};t.\u0275fac=function(r){return new(r||t)(_(TR),_(J))},t.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function uE(e){return e.map(t=>t.split(",")).reduce((t,i)=>t.concat(i)).map(t=>t.trim())}var hE={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};var RR=(()=>{let t=class t{create(n){return typeof MutationObserver>"u"?null:new MutationObserver(n)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var mE=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=$({type:t}),t.\u0275inj=G({providers:[RR]});let e=t;return e})();function Jg(e){return e.buttons===0||e.detail===0}function tb(e){let t=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var MR=new B("cdk-input-modality-detector-options"),PR={ignoreKeys:[18,17,224,91,16]},gE=650,zo=Uo({passive:!0,capture:!0}),NR=(()=>{let t=class t{get mostRecentModality(){return this._modality.value}constructor(n,r,o,s){this._platform=n,this._mostRecentTarget=null,this._modality=new me(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(c=>c===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=yn(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<gE||(this._modality.next(Jg(a)?"keyboard":"mouse"),this._mostRecentTarget=yn(a))},this._onTouchstart=a=>{if(tb(a)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=yn(a)},this._options=k(k({},PR),s),this.modalityDetected=this._modality.pipe(rc(1)),this.modalityChanged=this.modalityDetected.pipe(ic()),n.isBrowser&&r.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,zo),o.addEventListener("mousedown",this._onMousedown,zo),o.addEventListener("touchstart",this._onTouchstart,zo)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,zo),document.removeEventListener("mousedown",this._onMousedown,zo),document.removeEventListener("touchstart",this._onTouchstart,zo))}};t.\u0275fac=function(r){return new(r||t)(_(he),_(J),_(mt),_(MR,8))},t.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var au=function(e){return e[e.IMMEDIATE=0]="IMMEDIATE",e[e.EVENTUAL=1]="EVENTUAL",e}(au||{}),FR=new B("cdk-focus-monitor-default-options"),su=Uo({passive:!0,capture:!0}),bE=(()=>{let t=class t{constructor(n,r,o,s,a){this._ngZone=n,this._platform=r,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new oe,this._rootNodeFocusAndBlurListener=c=>{let l=yn(c);for(let d=l;d;d=d.parentElement)c.type==="focus"?this._onFocus(c,d):this._onBlur(c,d)},this._document=s,this._detectionMode=a?.detectionMode||au.IMMEDIATE}monitor(n,r=!1){let o=fr(n);if(!this._platform.isBrowser||o.nodeType!==1)return F();let s=cE(o)||this._getDocument(),a=this._elementInfo.get(o);if(a)return r&&(a.checkChildren=!0),a.subject;let c={checkChildren:r,subject:new oe,rootNode:s};return this._elementInfo.set(o,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(n){let r=fr(n),o=this._elementInfo.get(r);o&&(o.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(o))}focusVia(n,r,o){let s=fr(n),a=this._getDocument().activeElement;s===a?this._getClosestElementsInfo(s).forEach(([c,l])=>this._originChanged(c,r,l)):(this._setOrigin(r),typeof s.focus=="function"&&s.focus(o))}ngOnDestroy(){this._elementInfo.forEach((n,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(n){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(n)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:n&&this._isLastInteractionFromInputLabel(n)?"mouse":"program"}_shouldBeAttributedToTouch(n){return this._detectionMode===au.EVENTUAL||!!n?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(n,r){n.classList.toggle("cdk-focused",!!r),n.classList.toggle("cdk-touch-focused",r==="touch"),n.classList.toggle("cdk-keyboard-focused",r==="keyboard"),n.classList.toggle("cdk-mouse-focused",r==="mouse"),n.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(n,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=n,this._originFromTouchInteraction=n==="touch"&&r,this._detectionMode===au.IMMEDIATE){clearTimeout(this._originTimeoutId);let o=this._originFromTouchInteraction?gE:1;this._originTimeoutId=setTimeout(()=>this._origin=null,o)}})}_onFocus(n,r){let o=this._elementInfo.get(r),s=yn(n);!o||!o.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),o)}_onBlur(n,r){let o=this._elementInfo.get(r);!o||o.checkChildren&&n.relatedTarget instanceof Node&&r.contains(n.relatedTarget)||(this._setClasses(r),this._emitOrigin(o,null))}_emitOrigin(n,r){n.subject.observers.length&&this._ngZone.run(()=>n.subject.next(r))}_registerGlobalListeners(n){if(!this._platform.isBrowser)return;let r=n.rootNode,o=this._rootNodeFocusListenerCount.get(r)||0;o||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,su),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,su)}),this._rootNodeFocusListenerCount.set(r,o+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(wr(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(n){let r=n.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let o=this._rootNodeFocusListenerCount.get(r);o>1?this._rootNodeFocusListenerCount.set(r,o-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,su),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,su),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(n,r,o){this._setClasses(n,r),this._emitOrigin(o,r),this._lastFocusOrigin=r}_getClosestElementsInfo(n){let r=[];return this._elementInfo.forEach((o,s)=>{(s===n||o.checkChildren&&s.contains(n))&&r.push([s,o])}),r}_isLastInteractionFromInputLabel(n){let{_mostRecentTarget:r,mostRecentModality:o}=this._inputModalityDetector;if(o!=="mouse"||!r||r===n||n.nodeName!=="INPUT"&&n.nodeName!=="TEXTAREA"||n.disabled)return!1;let s=n.labels;if(s){for(let a=0;a<s.length;a++)if(s[a].contains(r))return!0}return!1}};t.\u0275fac=function(r){return new(r||t)(_(J),_(he),_(NR),_(mt,8),_(FR,8))},t.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var br=function(e){return e[e.NONE=0]="NONE",e[e.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",e[e.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",e}(br||{}),pE="cdk-high-contrast-black-on-white",fE="cdk-high-contrast-white-on-black",Zg="cdk-high-contrast-active",_E=(()=>{let t=class t{constructor(n,r){this._platform=n,this._document=r,this._breakpointSubscription=M(ou).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return br.NONE;let n=this._document.createElement("div");n.style.backgroundColor="rgb(1,2,3)",n.style.position="absolute",this._document.body.appendChild(n);let r=this._document.defaultView||window,o=r&&r.getComputedStyle?r.getComputedStyle(n):null,s=(o&&o.backgroundColor||"").replace(/ /g,"");switch(n.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return br.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return br.BLACK_ON_WHITE}return br.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let n=this._document.body.classList;n.remove(Zg,pE,fE),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===br.BLACK_ON_WHITE?n.add(Zg,pE):r===br.WHITE_ON_BLACK&&n.add(Zg,fE)}}};t.\u0275fac=function(r){return new(r||t)(_(he),_(mt))},t.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var eb=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=$({type:t}),t.\u0275inj=G({});let e=t;return e})();function VR(){return!0}var LR=new B("mat-sanity-checks",{providedIn:"root",factory:VR}),Bt=(()=>{let t=class t{constructor(n,r,o){this._sanityChecks=r,this._document=o,this._hasDoneGlobalChecks=!1,n._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(n){return lE()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[n]}};t.\u0275fac=function(r){return new(r||t)(_(_E),_(LR,8),_(mt))},t.\u0275mod=$({type:t}),t.\u0275inj=G({imports:[eb,eb]});let e=t;return e})();var Oe=function(e){return e[e.FADING_IN=0]="FADING_IN",e[e.VISIBLE=1]="VISIBLE",e[e.FADING_OUT=2]="FADING_OUT",e[e.HIDDEN=3]="HIDDEN",e}(Oe||{}),rb=class{constructor(t,i,n,r=!1){this._renderer=t,this.element=i,this.config=n,this._animationForciblyDisabledThroughCss=r,this.state=Oe.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},vE=Uo({passive:!0,capture:!0}),ob=class{constructor(){this._events=new Map,this._delegateEventHandler=t=>{let i=yn(t);i&&this._events.get(t.type)?.forEach((n,r)=>{(r===i||r.contains(i))&&n.forEach(o=>o.handleEvent(t))})}}addHandler(t,i,n,r){let o=this._events.get(i);if(o){let s=o.get(n);s?s.add(r):o.set(n,new Set([r]))}else this._events.set(i,new Map([[n,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(i,this._delegateEventHandler,vE)})}removeHandler(t,i,n){let r=this._events.get(t);if(!r)return;let o=r.get(i);o&&(o.delete(n),o.size===0&&r.delete(i),r.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,vE)))}},yE={enterDuration:225,exitDuration:150},BR=800,wE=Uo({passive:!0,capture:!0}),xE=["mousedown","touchstart"],IE=["mouseup","mouseleave","touchend","touchcancel"],Xa=class Xa{constructor(t,i,n,r){this._target=t,this._ngZone=i,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=fr(n))}fadeInRipple(t,i,n={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=k(k({},yE),n.animation);n.centered&&(t=r.left+r.width/2,i=r.top+r.height/2);let s=n.radius||jR(t,i,r),a=t-r.left,c=i-r.top,l=o.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=`${a-s}px`,d.style.top=`${c-s}px`,d.style.height=`${s*2}px`,d.style.width=`${s*2}px`,n.color!=null&&(d.style.backgroundColor=n.color),d.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(d);let u=window.getComputedStyle(d),h=u.transitionProperty,m=u.transitionDuration,E=h==="none"||m==="0s"||m==="0s, 0s"||r.width===0&&r.height===0,w=new rb(this,d,n,E);d.style.transform="scale3d(1, 1, 1)",w.state=Oe.FADING_IN,n.persistent||(this._mostRecentTransientRipple=w);let b=null;return!E&&(l||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let A=()=>this._finishRippleTransition(w),q=()=>this._destroyRipple(w);d.addEventListener("transitionend",A),d.addEventListener("transitioncancel",q),b={onTransitionEnd:A,onTransitionCancel:q}}),this._activeRipples.set(w,b),(E||!l)&&this._finishRippleTransition(w),w}fadeOutRipple(t){if(t.state===Oe.FADING_OUT||t.state===Oe.HIDDEN)return;let i=t.element,n=k(k({},yE),t.config.animation);i.style.transitionDuration=`${n.exitDuration}ms`,i.style.opacity="0",t.state=Oe.FADING_OUT,(t._animationForciblyDisabledThroughCss||!n.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let i=fr(t);!this._platform.isBrowser||!i||i===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=i,xE.forEach(n=>{Xa._eventManager.addHandler(this._ngZone,n,i,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{IE.forEach(i=>{this._triggerElement.addEventListener(i,this,wE)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===Oe.FADING_IN?this._startFadeOutTransition(t):t.state===Oe.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let i=t===this._mostRecentTransientRipple,{persistent:n}=t.config;t.state=Oe.VISIBLE,!n&&(!i||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let i=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=Oe.HIDDEN,i!==null&&(t.element.removeEventListener("transitionend",i.onTransitionEnd),t.element.removeEventListener("transitioncancel",i.onTransitionCancel)),t.element.remove()}_onMousedown(t){let i=Jg(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+BR;!this._target.rippleDisabled&&!i&&!n&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!tb(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let i=t.changedTouches;if(i)for(let n=0;n<i.length;n++)this.fadeInRipple(i[n].clientX,i[n].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let i=t.state===Oe.VISIBLE||t.config.terminateOnPointerUp&&t.state===Oe.FADING_IN;!t.config.persistent&&i&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(xE.forEach(i=>Xa._eventManager.removeHandler(i,t,this)),this._pointerUpEventsRegistered&&IE.forEach(i=>t.removeEventListener(i,this,wE)))}};Xa._eventManager=new ob;var lu=Xa;function jR(e,t,i){let n=Math.max(Math.abs(e-i.left),Math.abs(e-i.right)),r=Math.max(Math.abs(t-i.top),Math.abs(t-i.bottom));return Math.sqrt(n*n+r*r)}var ab=new B("mat-ripple-global-options"),UR=(()=>{let t=class t{get disabled(){return this._disabled}set disabled(n){n&&this.fadeOutAllNonPersistent(),this._disabled=n,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(n){this._trigger=n,this._setupTriggerEventsIfEnabled()}constructor(n,r,o,s,a){this._elementRef=n,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new lu(this,r,n,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:k(k(k({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(n,r=0,o){return typeof n=="number"?this._rippleRenderer.fadeInRipple(n,r,k(k({},this.rippleConfig),o)):this._rippleRenderer.fadeInRipple(0,0,k(k({},this.rippleConfig),n))}};t.\u0275fac=function(r){return new(r||t)(R(xt),R(J),R(he),R(ab,8),R(kn,8))},t.\u0275dir=at({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,o){r&2&&te("mat-ripple-unbounded",o.unbounded)},inputs:{color:[ut.None,"matRippleColor","color"],unbounded:[ut.None,"matRippleUnbounded","unbounded"],centered:[ut.None,"matRippleCentered","centered"],radius:[ut.None,"matRippleRadius","radius"],animation:[ut.None,"matRippleAnimation","animation"],disabled:[ut.None,"matRippleDisabled","disabled"],trigger:[ut.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let e=t;return e})(),du=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=$({type:t}),t.\u0275inj=G({imports:[Bt,Bt]});let e=t;return e})();var TE=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=$({type:t}),t.\u0275inj=G({imports:[Bt]});let e=t;return e})();var EE={capture:!0},AE=["focus","click","mouseenter","touchstart"],ib="mat-ripple-loader-uninitialized",nb="mat-ripple-loader-class-name",kE="mat-ripple-loader-centered",cu="mat-ripple-loader-disabled",SE=(()=>{let t=class t{constructor(){this._document=M(mt,{optional:!0}),this._animationMode=M(kn,{optional:!0}),this._globalRippleOptions=M(ab,{optional:!0}),this._platform=M(he),this._ngZone=M(J),this._hosts=new Map,this._onInteraction=n=>{if(!(n.target instanceof HTMLElement))return;let o=n.target.closest(`[${ib}]`);o&&this._createRipple(o)},this._ngZone.runOutsideAngular(()=>{for(let n of AE)this._document?.addEventListener(n,this._onInteraction,EE)})}ngOnDestroy(){let n=this._hosts.keys();for(let r of n)this.destroyRipple(r);for(let r of AE)this._document?.removeEventListener(r,this._onInteraction,EE)}configureRipple(n,r){n.setAttribute(ib,""),(r.className||!n.hasAttribute(nb))&&n.setAttribute(nb,r.className||""),r.centered&&n.setAttribute(kE,""),r.disabled&&n.setAttribute(cu,"")}getRipple(n){return this._hosts.get(n)||this._createRipple(n)}setDisabled(n,r){let o=this._hosts.get(n);if(o){o.disabled=r;return}r?n.setAttribute(cu,""):n.removeAttribute(cu)}_createRipple(n){if(!this._document)return;let r=this._hosts.get(n);if(r)return r;n.querySelector(".mat-ripple")?.remove();let o=this._document.createElement("span");o.classList.add("mat-ripple",n.getAttribute(nb)),n.append(o);let s=new UR(new xt(o),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return s._isInitialized=!0,s.trigger=n,s.centered=n.hasAttribute(kE),s.disabled=n.hasAttribute(cu),this.attachRipple(n,s),s}attachRipple(n,r){n.removeAttribute(ib),this._hosts.set(n,r)}destroyRipple(n){let r=this._hosts.get(n);r&&(r.ngOnDestroy(),this._hosts.delete(n))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var zR=["*",[["mat-toolbar-row"]]],qR=["*","mat-toolbar-row"],GR=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=at({type:t,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"],standalone:!0});let e=t;return e})(),DE=(()=>{let t=class t{constructor(n,r,o){this._elementRef=n,this._platform=r,this._document=o}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}};t.\u0275fac=function(r){return new(r||t)(R(xt),R(he),R(mt))},t.\u0275cmp=Q({type:t,selectors:[["mat-toolbar"]],contentQueries:function(r,o,s){if(r&1&&Sr(s,GR,5),r&2){let a;ji(a=Ui())&&(o._toolbarRows=a)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(r,o){r&2&&(Tr(o.color?"mat-"+o.color:""),te("mat-toolbar-multiple-rows",o._toolbarRows.length>0)("mat-toolbar-single-row",o._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],standalone:!0,features:[Ie],ngContentSelectors:qR,decls:2,vars:0,template:function(r,o){r&1&&(ei(zR),xe(0),xe(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color);color:var(--mat-toolbar-container-text-color)}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font);font-size:var(--mat-toolbar-title-text-size);line-height:var(--mat-toolbar-title-text-line-height);font-weight:var(--mat-toolbar-title-text-weight);letter-spacing:var(--mat-toolbar-title-text-tracking);margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color);--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color)}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0});let e=t;return e})();var uu=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=$({type:t}),t.\u0275inj=G({imports:[Bt,Bt]});let e=t;return e})();var KR=["mat-button",""],QR=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],WR=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],HR='.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);box-shadow:var(--mdc-protected-button-container-elevation-shadow)}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',YR=".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}";var XR=new B("MAT_BUTTON_CONFIG");var ZR=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],JR=(()=>{let t=class t{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(n){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,n)}get disableRipple(){return this._disableRipple}set disableRipple(n){this._disableRipple=n,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(n){this._disabled=n,this._updateRippleDisabled()}constructor(n,r,o,s){this._elementRef=n,this._platform=r,this._ngZone=o,this._animationMode=s,this._focusMonitor=M(bE),this._rippleLoader=M(SE),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let a=M(XR,{optional:!0}),c=n.nativeElement,l=c.classList;this.disabledInteractive=a?.disabledInteractive??!1,this._rippleLoader?.configureRipple(c,{className:"mat-mdc-button-ripple"});for(let{attribute:d,mdcClasses:u}of ZR)c.hasAttribute(d)&&l.add(...u)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(n="program",r){n?this._focusMonitor.focusVia(this._elementRef.nativeElement,n,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}};t.\u0275fac=function(r){Tn()},t.\u0275dir=at({type:t,inputs:{color:"color",disableRipple:[ut.HasDecoratorInputTransform,"disableRipple","disableRipple",Wt],disabled:[ut.HasDecoratorInputTransform,"disabled","disabled",Wt],ariaDisabled:[ut.HasDecoratorInputTransform,"aria-disabled","ariaDisabled",Wt],disabledInteractive:[ut.HasDecoratorInputTransform,"disabledInteractive","disabledInteractive",Wt]},features:[Le]});let e=t;return e})();var tM=(()=>{let t=class t extends JR{constructor(n,r,o,s){super(n,r,o,s),this._haltDisabledEvents=a=>{this.disabled&&(a.preventDefault(),a.stopImmediatePropagation())}}ngOnInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)})}ngOnDestroy(){super.ngOnDestroy(),this._elementRef.nativeElement.removeEventListener("click",this._haltDisabledEvents)}_getAriaDisabled(){return this.ariaDisabled==null?this.disabled:this.ariaDisabled}};t.\u0275fac=function(r){Tn()},t.\u0275dir=at({type:t,inputs:{tabIndex:[ut.HasDecoratorInputTransform,"tabIndex","tabIndex",n=>n==null?void 0:jb(n)]},features:[Le,Jt]});let e=t;return e})();var RE=(()=>{let t=class t extends tM{constructor(n,r,o,s){super(n,r,o,s)}};t.\u0275fac=function(r){return new(r||t)(R(xt),R(he),R(J),R(kn,8))},t.\u0275cmp=Q({type:t,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-flat-button",""],["a","mat-stroked-button",""]],hostVars:15,hostBindings:function(r,o){r&2&&(pe("disabled",o._getDisabledAttribute())("tabindex",o.disabled&&!o.disabledInteractive?-1:o.tabIndex)("aria-disabled",o._getDisabledAttribute()),Tr(o.color?"mat-"+o.color:""),te("mat-mdc-button-disabled",o.disabled)("mat-mdc-button-disabled-interactive",o.disabledInteractive)("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},exportAs:["matButton","matAnchor"],standalone:!0,features:[Jt,Ie],attrs:KR,ngContentSelectors:WR,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,o){r&1&&(ei(QR),ht(0,"span",0),xe(1),I(2,"span",1),xe(3,1),y(),xe(4,2),ht(5,"span",2)(6,"span",3)),r&2&&te("mdc-button__ripple",!o._isFab)("mdc-fab__ripple",o._isFab)},styles:[HR,YR],encapsulation:2,changeDetection:0});let e=t;return e})();var ME=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=$({type:t}),t.\u0275inj=G({imports:[Bt,du,Bt]});let e=t;return e})();var iM=["*"],hu;function nM(){if(hu===void 0&&(hu=null,typeof window<"u")){let e=window;e.trustedTypes!==void 0&&(hu=e.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return hu}function Za(e){return nM()?.createHTML(e)||e}function PE(e){return Error(`Unable to find icon with the name "${e}"`)}function rM(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}function NE(e){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${e}".`)}function FE(e){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${e}".`)}var Ni=class{constructor(t,i,n){this.url=t,this.svgText=i,this.options=n}},oM=(()=>{let t=class t{constructor(n,r,o,s){this._httpClient=n,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=o}addSvgIcon(n,r,o){return this.addSvgIconInNamespace("",n,r,o)}addSvgIconLiteral(n,r,o){return this.addSvgIconLiteralInNamespace("",n,r,o)}addSvgIconInNamespace(n,r,o,s){return this._addSvgIconConfig(n,r,new Ni(o,null,s))}addSvgIconResolver(n){return this._resolvers.push(n),this}addSvgIconLiteralInNamespace(n,r,o,s){let a=this._sanitizer.sanitize(ye.HTML,o);if(!a)throw FE(o);let c=Za(a);return this._addSvgIconConfig(n,r,new Ni("",c,s))}addSvgIconSet(n,r){return this.addSvgIconSetInNamespace("",n,r)}addSvgIconSetLiteral(n,r){return this.addSvgIconSetLiteralInNamespace("",n,r)}addSvgIconSetInNamespace(n,r,o){return this._addSvgIconSetConfig(n,new Ni(r,null,o))}addSvgIconSetLiteralInNamespace(n,r,o){let s=this._sanitizer.sanitize(ye.HTML,r);if(!s)throw FE(r);let a=Za(s);return this._addSvgIconSetConfig(n,new Ni("",a,o))}registerFontClassAlias(n,r=n){return this._fontCssClassesByAlias.set(n,r),this}classNameForFontAlias(n){return this._fontCssClassesByAlias.get(n)||n}setDefaultFontSetClass(...n){return this._defaultFontSetClass=n,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(n){let r=this._sanitizer.sanitize(ye.RESOURCE_URL,n);if(!r)throw NE(n);let o=this._cachedIconsByUrl.get(r);return o?F(mu(o)):this._loadSvgIconFromConfig(new Ni(n,null)).pipe(_t(s=>this._cachedIconsByUrl.set(r,s)),V(s=>mu(s)))}getNamedSvgIcon(n,r=""){let o=OE(r,n),s=this._svgIconConfigs.get(o);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,n),s)return this._svgIconConfigs.set(o,s),this._getSvgFromConfig(s);let a=this._iconSetConfigs.get(r);return a?this._getSvgFromIconSetConfigs(n,a):In(PE(o))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(n){return n.svgText?F(mu(this._svgElementFromConfig(n))):this._loadSvgIconFromConfig(n).pipe(V(r=>mu(r)))}_getSvgFromIconSetConfigs(n,r){let o=this._extractIconWithNameFromAnySet(n,r);if(o)return F(o);let s=r.filter(a=>!a.svgText).map(a=>this._loadSvgIconSetFromConfig(a).pipe(Fi(c=>{let d=`Loading icon set URL: ${this._sanitizer.sanitize(ye.RESOURCE_URL,a.url)} failed: ${c.message}`;return this._errorHandler.handleError(new Error(d)),F(null)})));return ec(s).pipe(V(()=>{let a=this._extractIconWithNameFromAnySet(n,r);if(!a)throw PE(n);return a}))}_extractIconWithNameFromAnySet(n,r){for(let o=r.length-1;o>=0;o--){let s=r[o];if(s.svgText&&s.svgText.toString().indexOf(n)>-1){let a=this._svgElementFromConfig(s),c=this._extractSvgIconFromSet(a,n,s.options);if(c)return c}}return null}_loadSvgIconFromConfig(n){return this._fetchIcon(n).pipe(_t(r=>n.svgText=r),V(()=>this._svgElementFromConfig(n)))}_loadSvgIconSetFromConfig(n){return n.svgText?F(null):this._fetchIcon(n).pipe(_t(r=>n.svgText=r))}_extractSvgIconFromSet(n,r,o){let s=n.querySelector(`[id="${r}"]`);if(!s)return null;let a=s.cloneNode(!0);if(a.removeAttribute("id"),a.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(a,o);if(a.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(a),o);let c=this._svgElementFromString(Za("<svg></svg>"));return c.appendChild(a),this._setSvgAttributes(c,o)}_svgElementFromString(n){let r=this._document.createElement("DIV");r.innerHTML=n;let o=r.querySelector("svg");if(!o)throw Error("<svg> tag not found");return o}_toSvgElement(n){let r=this._svgElementFromString(Za("<svg></svg>")),o=n.attributes;for(let s=0;s<o.length;s++){let{name:a,value:c}=o[s];a!=="id"&&r.setAttribute(a,c)}for(let s=0;s<n.childNodes.length;s++)n.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(n.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(n,r){return n.setAttribute("fit",""),n.setAttribute("height","100%"),n.setAttribute("width","100%"),n.setAttribute("preserveAspectRatio","xMidYMid meet"),n.setAttribute("focusable","false"),r&&r.viewBox&&n.setAttribute("viewBox",r.viewBox),n}_fetchIcon(n){let{url:r,options:o}=n,s=o?.withCredentials??!1;if(!this._httpClient)throw rM();if(r==null)throw Error(`Cannot fetch icon from URL "${r}".`);let a=this._sanitizer.sanitize(ye.RESOURCE_URL,r);if(!a)throw NE(r);let c=this._inProgressUrlFetches.get(a);if(c)return c;let l=this._httpClient.get(a,{responseType:"text",withCredentials:s}).pipe(V(d=>Za(d)),vi(()=>this._inProgressUrlFetches.delete(a)),_b());return this._inProgressUrlFetches.set(a,l),l}_addSvgIconConfig(n,r,o){return this._svgIconConfigs.set(OE(n,r),o),this}_addSvgIconSetConfig(n,r){let o=this._iconSetConfigs.get(n);return o?o.push(r):this._iconSetConfigs.set(n,[r]),this}_svgElementFromConfig(n){if(!n.svgElement){let r=this._svgElementFromString(n.svgText);this._setSvgAttributes(r,n.options),n.svgElement=r}return n.svgElement}_getIconConfigFromResolvers(n,r){for(let o=0;o<this._resolvers.length;o++){let s=this._resolvers[o](r,n);if(s)return sM(s)?new Ni(s.url,null,s.options):new Ni(s,null)}}};t.\u0275fac=function(r){return new(r||t)(_(Pn,8),_(Yu),_(mt,8),_(Cn))},t.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function mu(e){return e.cloneNode(!0)}function OE(e,t){return e+":"+t}function sM(e){return!!(e.url&&e.options)}var aM=new B("MAT_ICON_DEFAULT_OPTIONS"),cM=new B("mat-icon-location",{providedIn:"root",factory:lM});function lM(){let e=M(mt),t=e?e.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}var VE=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],dM=VE.map(e=>`[${e}]`).join(", "),uM=/^url\(['"]?#(.*?)['"]?\)$/,LE=(()=>{let t=class t{get color(){return this._color||this._defaultColor}set color(n){this._color=n}get svgIcon(){return this._svgIcon}set svgIcon(n){n!==this._svgIcon&&(n?this._updateSvgIcon(n):this._svgIcon&&this._clearSvgElement(),this._svgIcon=n)}get fontSet(){return this._fontSet}set fontSet(n){let r=this._cleanupFontValue(n);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(n){let r=this._cleanupFontValue(n);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(n,r,o,s,a,c){this._elementRef=n,this._iconRegistry=r,this._location=s,this._errorHandler=a,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=qo.EMPTY,c&&(c.color&&(this.color=this._defaultColor=c.color),c.fontSet&&(this.fontSet=c.fontSet)),o||n.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(n){if(!n)return["",""];let r=n.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${n}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let n=this._elementsWithExternalReferences;if(n&&n.size){let r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(n){this._clearSvgElement();let r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(n),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(n)}_clearSvgElement(){let n=this._elementRef.nativeElement,r=n.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){let o=n.childNodes[r];(o.nodeType!==1||o.nodeName.toLowerCase()==="svg")&&o.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let n=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(o=>o.length>0);this._previousFontSetClass.forEach(o=>n.classList.remove(o)),r.forEach(o=>n.classList.add(o)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&n.classList.remove(this._previousFontIconClass),this.fontIcon&&n.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(n){return typeof n=="string"?n.trim().split(" ")[0]:n}_prependPathToReferences(n){let r=this._elementsWithExternalReferences;r&&r.forEach((o,s)=>{o.forEach(a=>{s.setAttribute(a.name,`url('${n}#${a.value}')`)})})}_cacheChildrenWithExternalReferences(n){let r=n.querySelectorAll(dM),o=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)VE.forEach(a=>{let c=r[s],l=c.getAttribute(a),d=l?l.match(uM):null;if(d){let u=o.get(c);u||(u=[],o.set(c,u)),u.push({name:a,value:d[1]})}})}_updateSvgIcon(n){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),n){let[r,o]=this._splitIconName(n);r&&(this._svgNamespace=r),o&&(this._svgName=o),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(o,r).pipe(Ve(1)).subscribe(s=>this._setSvgElement(s),s=>{let a=`Error retrieving icon ${r}:${o}! ${s.message}`;this._errorHandler.handleError(new Error(a))})}}};t.\u0275fac=function(r){return new(r||t)(R(xt),R(oM),oc("aria-hidden"),R(cM),R(Cn),R(aM,8))},t.\u0275cmp=Q({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(r,o){r&2&&(pe("data-mat-icon-type",o._usingFontIcon()?"font":"svg")("data-mat-icon-name",o._svgName||o.fontIcon)("data-mat-icon-namespace",o._svgNamespace||o.fontSet)("fontIcon",o._usingFontIcon()?o.fontIcon:null),Tr(o.color?"mat-"+o.color:""),te("mat-icon-inline",o.inline)("mat-icon-no-color",o.color!=="primary"&&o.color!=="accent"&&o.color!=="warn"))},inputs:{color:"color",inline:[ut.HasDecoratorInputTransform,"inline","inline",Wt],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[Le,Ie],ngContentSelectors:iM,decls:1,vars:0,template:function(r,o){r&1&&(ei(),xe(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0});let e=t;return e})(),pu=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=$({type:t}),t.\u0275inj=G({imports:[Bt,Bt]});let e=t;return e})();var BE=(()=>{let t=class t{constructor(){this.breakpointObserver=M(ou),this.isHandset$=this.breakpointObserver.observe(hE.Handset).pipe(V(n=>n.matches),$o())}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Q({type:t,selectors:[["app-navbar"]],decls:26,vars:0,consts:[[1,"nav"],[1,"logo"],["src","\\assets\\101.ico","alt","","height","50px","width","50px"],[1,"head"],[1,"spacer"],["mat-button","","routerLink","dashboard//",1,"hom"],["mat-button","","routerLinkActive","active","routerLink","dashboard/connection"],["mat-button","","routerLinkActive","active","routerLink","dashboard/profile"],["mat-button","","routerLinkActive","active","routerLink","dashboard/login"],["mat-button","","routerLinkActive","active","routerLink","dashboard/signup"]],template:function(r,o){r&1&&(I(0,"mat-toolbar",0)(1,"div",1),ht(2,"img",2),y(),I(3,"span",3),C(4,"iBot"),y(),ht(5,"div",4),I(6,"a",5)(7,"mat-icon"),C(8,"home"),y(),C(9,"Home"),y(),I(10,"a",6)(11,"mat-icon"),C(12,"smart_toy"),y(),C(13,"Become a Bot"),y(),I(14,"a",7)(15,"mat-icon"),C(16,"account_circle"),y(),C(17,"Profile"),y(),I(18,"a",8)(19,"mat-icon"),C(20,"login"),y(),C(21,"Login"),y(),I(22,"a",9)(23,"mat-icon"),C(24,"person_pin_circle"),y(),C(25,"Sign Up"),y()())},dependencies:[_e,Qd,DE,RE,LE],styles:[".mat-toolbar[_ngcontent-%COMP%]{color:#160101;text-align:center;font-size:x-large;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.head[_ngcontent-%COMP%]{font-size:x-large;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif}.logo[_ngcontent-%COMP%]{margin-right:30px}.mat-toolbar[_ngcontent-%COMP%]   a.mat-button[_ngcontent-%COMP%], .mat-toolbar[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#000}.spacer[_ngcontent-%COMP%]{margin-left:819px}.nav[_ngcontent-%COMP%]{background-image:url(/assets/201.gif);background-size:contain;height:65px}.slider-container[_ngcontent-%COMP%]{position:relative;overflow:hidden;height:100vh;margin-left:250px}.slider[_ngcontent-%COMP%]{display:flex;transition:transform .5s ease}.slide[_ngcontent-%COMP%]{flex:0 0 auto}.slider-image[_ngcontent-%COMP%]{overflow:hidden;object-fit:cover}.btn-prev[_ngcontent-%COMP%], .btn-next[_ngcontent-%COMP%]{position:absolute;top:60%;transform:translateY(-50%);background:none;border:none;cursor:pointer}.btn-prev[_ngcontent-%COMP%]{left:10px}.btn-next[_ngcontent-%COMP%]{right:240px}"]});let e=t;return e})();var jE=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Q({type:t,selectors:[["app-footer"]],decls:1,vars:0,template:function(r,o){r&1&&ht(0,"footer")},styles:["footer[_ngcontent-%COMP%]{background-image:url(/assets/109.png);background-size:cover;color:#fff;padding:95px;position:fixed;bottom:0;width:100%;height:250px}"]});let e=t;return e})();var UE=(()=>{let t=class t{constructor(){this.title="project-k"}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Q({type:t,selectors:[["app-root"]],decls:3,vars:0,template:function(r,o){r&1&&ht(0,"app-navbar")(1,"router-outlet")(2,"app-footer")},dependencies:[pr,BE,jE]});let e=t;return e})();var fM="@",gM=(()=>{let t=class t{constructor(n,r,o,s,a){this.doc=n,this.delegate=r,this.zone=o,this.animationType=s,this.moduleImpl=a,this._rendererFactoryPromise=null,this.scheduler=M(Rb,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-RLPNLPVE.js")).catch(r=>{throw new ot(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:o})=>{this._engine=r(this.animationType,this.doc,this.scheduler);let s=new o(this.delegate,this._engine,this.zone);return this.delegate=s,s})}createRenderer(n,r){let o=this.delegate.createRenderer(n,r);if(o.\u0275type===0)return o;typeof o.throwOnSyntheticProps=="boolean"&&(o.throwOnSyntheticProps=!1);let s=new cb(o);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let c=a.createRenderer(n,r);s.use(c)}).catch(a=>{s.use(o)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};t.\u0275fac=function(r){Tn()},t.\u0275prov=O({token:t,factory:t.\u0275fac});let e=t;return e})(),cb=class{constructor(t){this.delegate=t,this.replay=[],this.\u0275type=1}use(t){if(this.delegate=t,this.replay!==null){for(let i of this.replay)i(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,i){return this.delegate.createElement(t,i)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,i){this.delegate.appendChild(t,i)}insertBefore(t,i,n,r){this.delegate.insertBefore(t,i,n,r)}removeChild(t,i,n){this.delegate.removeChild(t,i,n)}selectRootElement(t,i){return this.delegate.selectRootElement(t,i)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,i,n,r){this.delegate.setAttribute(t,i,n,r)}removeAttribute(t,i,n){this.delegate.removeAttribute(t,i,n)}addClass(t,i){this.delegate.addClass(t,i)}removeClass(t,i){this.delegate.removeClass(t,i)}setStyle(t,i,n,r){this.delegate.setStyle(t,i,n,r)}removeStyle(t,i,n){this.delegate.removeStyle(t,i,n)}setProperty(t,i,n){this.shouldReplay(i)&&this.replay.push(r=>r.setProperty(t,i,n)),this.delegate.setProperty(t,i,n)}setValue(t,i){this.delegate.setValue(t,i)}listen(t,i,n){return this.shouldReplay(i)&&this.replay.push(r=>r.listen(t,i,n)),this.delegate.listen(t,i,n)}shouldReplay(t){return this.replay!==null&&t.startsWith(fM)}};function zE(e="animations"){return Ir([{provide:ac,useFactory:(t,i,n)=>new gM(t,i,n,e),deps:[mt,kc,J]},{provide:kn,useValue:e==="noop"?"NoopAnimations":"BrowserAnimations"}])}var fu=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=$({type:t}),t.\u0275inj=G({imports:[Bt,Bt]});let e=t;return e})();var qE=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=$({type:t}),t.\u0275inj=G({imports:[Rr,pu,uu,fu]});let e=t;return e})();var GE={production:!0,firebaseConfig:{apiKey:"AIzaSyAd3fxjkmoZ-WHqwmPlZa6zHSC_DM0EhGo",authDomain:"project-k-70b28.firebaseapp.com",projectId:"project-k-70b28",storageBucket:"project-k-70b28.appspot.com",messagingSenderId:"753248237330",appId:"1:753248237330:web:7c72833a89e9b008cf25cb"}};var lb=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=$({type:t}),t.\u0275inj=G({});let e=t;return e})();var $E=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=$({type:t}),t.\u0275inj=G({imports:[Bt,lb,lb,Bt]});let e=t;return e})();var KE=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=$({type:t}),t.\u0275inj=G({imports:[mE,Rr,Bt,du,TE,fu]});let e=t;return e})();var QE=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=$({type:t,bootstrap:[UE]}),t.\u0275inj=G({providers:[zE(),ru,_i,vn],imports:[y_,aE,QI,A_.initializeApp(GE.firebaseConfig),Fx,qE,uu,ME,$E,pu,KE,h_]});let e=t;return e})();v_().bootstrapModule(QE).catch(e=>console.error(e));
